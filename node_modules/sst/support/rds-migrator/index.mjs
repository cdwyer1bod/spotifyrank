var aq=Object.create;var ja=Object.defineProperty;var cq=Object.getOwnPropertyDescriptor;var dq=Object.getOwnPropertyNames;var uq=Object.getPrototypeOf,lq=Object.prototype.hasOwnProperty;var n=(t,e)=>ja(t,"name",{value:e,configurable:!0}),W=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var Be=(t,e)=>()=>(t&&(e=t(t=0)),e);var u=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),GE=(t,e)=>{for(var r in e)ja(t,r,{get:e[r],enumerable:!0})},BE=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of dq(e))!lq.call(t,s)&&s!==r&&ja(t,s,{get:()=>e[s],enumerable:!(i=cq(e,s))||i.enumerable});return t};var pq=(t,e,r)=>(r=t!=null?aq(uq(t)):{},BE(e||!t||!t.__esModule?ja(r,"default",{value:t,enumerable:!0}):r,t)),b=t=>BE(ja({},"__esModule",{value:!0}),t);var x={};GE(x,{__assign:()=>py,__asyncDelegator:()=>hC,__asyncGenerator:()=>mC,__asyncValues:()=>_C,__await:()=>Sc,__awaiter:()=>cC,__classPrivateFieldGet:()=>vC,__classPrivateFieldIn:()=>NC,__classPrivateFieldSet:()=>SC,__createBinding:()=>my,__decorate:()=>tC,__esDecorate:()=>iC,__exportStar:()=>uC,__extends:()=>Zq,__generator:()=>dC,__importDefault:()=>EC,__importStar:()=>wC,__makeTemplateObject:()=>yC,__metadata:()=>aC,__param:()=>rC,__propKey:()=>sC,__read:()=>jv,__rest:()=>eC,__runInitializers:()=>nC,__setFunctionName:()=>oC,__spread:()=>lC,__spreadArray:()=>fC,__spreadArrays:()=>pC,__values:()=>fy});function Zq(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ly(t,e);function r(){this.constructor=t}n(r,"__"),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function eC(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function tC(t,e,r,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(o=(s<3?a(o):s>3?a(e,r,o):a(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function rC(t,e){return function(r,i){e(r,i,t)}}function iC(t,e,r,i,s,o){function a(ie){if(ie!==void 0&&typeof ie!="function")throw new TypeError("Function expected");return ie}n(a,"accept");for(var c=i.kind,l=c==="getter"?"get":c==="setter"?"set":"value",p=!e&&t?i.static?t:t.prototype:null,f=e||(p?Object.getOwnPropertyDescriptor(p,i.name):{}),m,h=!1,_=r.length-1;_>=0;_--){var w={};for(var g in i)w[g]=g==="access"?{}:i[g];for(var g in i.access)w.access[g]=i.access[g];w.addInitializer=function(ie){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(ie||null))};var S=(0,r[_])(c==="accessor"?{get:f.get,set:f.set}:f[l],w);if(c==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(m=a(S.get))&&(f.get=m),(m=a(S.set))&&(f.set=m),(m=a(S.init))&&s.push(m)}else(m=a(S))&&(c==="field"?s.push(m):f[l]=m)}p&&Object.defineProperty(p,i.name,f),h=!0}function nC(t,e,r){for(var i=arguments.length>2,s=0;s<e.length;s++)r=i?e[s].call(t,r):e[s].call(t);return i?r:void 0}function sC(t){return typeof t=="symbol"?t:"".concat(t)}function oC(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function aC(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function cC(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})}function dC(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,s,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(p){return function(f){return l([p,f])}}function l(p){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,p[0]&&(r=0)),r;)try{if(i=1,s&&(o=p[0]&2?s.return:p[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,p[1])).done)return o;switch(s=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,s=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(t,r)}catch(f){p=[6,f],s=0}finally{i=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function uC(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&my(e,t,r)}function fy(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jv(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),s,o=[],a;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)o.push(s.value)}catch(c){a={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}function lC(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(jv(arguments[e]));return t}function pC(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,c=o.length;a<c;a++,s++)i[s]=o[a];return i}function fC(t,e,r){if(r||arguments.length===2)for(var i=0,s=e.length,o;i<s;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}function Sc(t){return this instanceof Sc?(this.v=t,this):new Sc(t)}function mC(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),s,o=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(h){i[h]&&(s[h]=function(_){return new Promise(function(w,g){o.push([h,_,w,g])>1||c(h,_)})})}function c(h,_){try{l(i[h](_))}catch(w){m(o[0][3],w)}}function l(h){h.value instanceof Sc?Promise.resolve(h.value.v).then(p,f):m(o[0][2],h)}function p(h){c("next",h)}function f(h){c("throw",h)}function m(h,_){h(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}function hC(t){var e,r;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,o){e[s]=t[s]?function(a){return(r=!r)?{value:Sc(t[s](a)),done:!1}:o?o(a):a}:o}}function _C(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof fy=="function"?fy(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(o){r[o]=t[o]&&function(a){return new Promise(function(c,l){a=t[o](a),s(c,l,a.done,a.value)})}}function s(o,a,c,l){Promise.resolve(l).then(function(p){o({value:p,done:c})},a)}}function yC(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function wC(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&my(e,t,r);return gC(e,t),e}function EC(t){return t&&t.__esModule?t:{default:t}}function vC(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)}function SC(t,e,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function NC(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}var ly,py,my,gC,A=Be(()=>{ly=n(function(t,e){return ly=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},ly(t,e)},"extendStatics");n(Zq,"__extends");py=n(function(){return py=Object.assign||n(function(e){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},"__assign"),py.apply(this,arguments)},"__assign");n(eC,"__rest");n(tC,"__decorate");n(rC,"__param");n(iC,"__esDecorate");n(nC,"__runInitializers");n(sC,"__propKey");n(oC,"__setFunctionName");n(aC,"__metadata");n(cC,"__awaiter");n(dC,"__generator");my=Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]};n(uC,"__exportStar");n(fy,"__values");n(jv,"__read");n(lC,"__spread");n(pC,"__spreadArrays");n(fC,"__spreadArray");n(Sc,"__await");n(mC,"__asyncGenerator");n(hC,"__asyncDelegator");n(_C,"__asyncValues");n(yC,"__makeTemplateObject");gC=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};n(wC,"__importStar");n(EC,"__importDefault");n(vC,"__classPrivateFieldGet");n(SC,"__classPrivateFieldSet");n(NC,"__classPrivateFieldIn")});var Vv=u(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.isArnBucketName=_t.isDnsCompatibleBucketName=_t.S3_HOSTNAME_PATTERN=_t.DOT_PATTERN=_t.resolveParamsForS3=void 0;var bC=n(async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),(0,_t.isArnBucketName)(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!(0,_t.isDnsCompatibleBucketName)(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},"resolveParamsForS3");_t.resolveParamsForS3=bC;var xC=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,AC=/(\d+\.){3}\d+/,OC=/\.\./;_t.DOT_PATTERN=/\./;_t.S3_HOSTNAME_PATTERN=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./;var TC=n(t=>xC.test(t)&&!AC.test(t)&&!OC.test(t),"isDnsCompatibleBucketName");_t.isDnsCompatibleBucketName=TC;var PC=n(t=>{let[e,r,i,s,o,a]=t.split(":"),c=e==="arn"&&t.split(":").length>=6,l=[e,r,i,o,a].filter(Boolean).length===5;if(c&&!l)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return e==="arn"&&!!r&&!!i&&!!o&&!!a},"isArnBucketName");_t.isArnBucketName=PC});var $v=u(hy=>{"use strict";Object.defineProperty(hy,"__esModule",{value:!0});var RC=(A(),b(x));RC.__exportStar(Vv(),hy)});var Hv=u(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.createConfigValueProvider=void 0;var IC=n((t,e,r)=>{let i=n(async()=>{var s;let o=(s=r[t])!==null&&s!==void 0?s:r[e];return typeof o=="function"?o():o},"configProvider");return t==="endpoint"||e==="endpoint"?async()=>{let s=await i();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:o,hostname:a,port:c,path:l}=s;return`${o}//${a}${c?":"+c:""}${l}`}}return s}:i},"createConfigValueProvider");Eu.createConfigValueProvider=IC});var _y=u(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.resolveParams=jn.getEndpointFromInstructions=void 0;var qC=$v(),CC=Hv(),kC=n(async(t,e,r,i)=>{let s=await(0,jn.resolveParams)(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,i)},"getEndpointFromInstructions");jn.getEndpointFromInstructions=kC;var MC=n(async(t,e,r)=>{var i;let s={},o=((i=e?.getEndpointParameterInstructions)===null||i===void 0?void 0:i.call(e))||{};for(let[a,c]of Object.entries(o))switch(c.type){case"staticContextParams":s[a]=c.value;break;case"contextParams":s[a]=t[c.name];break;case"clientContextParams":case"builtInParams":s[a]=await(0,CC.createConfigValueProvider)(c.name,a,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(c))}return Object.keys(o).length===0&&Object.assign(s,r),String(r.serviceId).toLowerCase()==="s3"&&await(0,qC.resolveParamsForS3)(s),s},"resolveParams");jn.resolveParams=MC});var Gv=u(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.parseQueryString=void 0;function DC(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[i,s=null]=r.split("=");i=decodeURIComponent(i),s&&(s=decodeURIComponent(s)),i in e?Array.isArray(e[i])?e[i].push(s):e[i]=[e[i],s]:e[i]=s}return e}n(DC,"parseQueryString");vu.parseQueryString=DC});var Vn=u(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.parseUrl=void 0;var FC=Gv(),LC=n(t=>{if(typeof t=="string")return(0,Nc.parseUrl)(new URL(t));let{hostname:e,pathname:r,port:i,protocol:s,search:o}=t,a;return o&&(a=(0,FC.parseQueryString)(o)),{hostname:e,port:i?parseInt(i):void 0,protocol:s,path:r,query:a}},"parseUrl");Nc.parseUrl=LC});var yy=u(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.toEndpointV1=void 0;var Bv=Vn(),zC=n(t=>typeof t=="object"?"url"in t?(0,Bv.parseUrl)(t.url):t:(0,Bv.parseUrl)(t),"toEndpointV1");Su.toEndpointV1=zC});var Kv=u(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});var Jv=(A(),b(x));Jv.__exportStar(_y(),Nu);Jv.__exportStar(yy(),Nu)});var gy=u(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.endpointMiddleware=void 0;var WC=_y(),UC=n(({config:t,instructions:e})=>(r,i)=>async s=>{var o,a;let c=await(0,WC.getEndpointFromInstructions)(s.input,{getEndpointParameterInstructions(){return e}},{...t},i);i.endpointV2=c,i.authSchemes=(o=c.properties)===null||o===void 0?void 0:o.authSchemes;let l=(a=i.authSchemes)===null||a===void 0?void 0:a[0];return l&&(i.signing_region=l.signingRegion,i.signing_service=l.signingName),r({...s})},"endpointMiddleware");bu.endpointMiddleware=UC});var wy=u(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.deserializerMiddleware=void 0;var jC=n((t,e)=>(r,i)=>async s=>{let{response:o}=await r(s);try{let a=await e(o,t);return{response:o,output:a}}catch(a){throw Object.defineProperty(a,"$response",{value:o}),a}},"deserializerMiddleware");xu.deserializerMiddleware=jC});var Ey=u(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.serializerMiddleware=void 0;var VC=n((t,e)=>(r,i)=>async s=>{var o;let a=!((o=i.endpointV2)===null||o===void 0)&&o.url&&t.urlParser?async()=>t.urlParser(i.endpointV2.url):t.endpoint;if(!a)throw new Error("No valid endpoint provider available.");let c=await e(s.input,{...t,endpoint:a});return r({...s,request:c})},"serializerMiddleware");Au.serializerMiddleware=VC});var Yv=u(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.getSerdePlugin=gr.serializerMiddlewareOption=gr.deserializerMiddlewareOption=void 0;var $C=wy(),HC=Ey();gr.deserializerMiddlewareOption={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0};gr.serializerMiddlewareOption={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function GC(t,e,r){return{applyToStack:i=>{i.add((0,$C.deserializerMiddleware)(t,r),gr.deserializerMiddlewareOption),i.add((0,HC.serializerMiddleware)(t,e),gr.serializerMiddlewareOption)}}}n(GC,"getSerdePlugin");gr.getSerdePlugin=GC});var ge=u(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});var vy=(A(),b(x));vy.__exportStar(wy(),bc);vy.__exportStar(Yv(),bc);vy.__exportStar(Ey(),bc)});var Qv=u($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.getEndpointPlugin=$n.endpointMiddlewareOptions=void 0;var BC=ge(),JC=gy();$n.endpointMiddlewareOptions={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:BC.serializerMiddlewareOption.name};var KC=n((t,e)=>({applyToStack:r=>{r.addRelativeTo((0,JC.endpointMiddleware)({config:t,instructions:e}),$n.endpointMiddlewareOptions)}}),"getEndpointPlugin");$n.getEndpointPlugin=KC});var Xv=u(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.normalizeProvider=void 0;var YC=n(t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e},"normalizeProvider");Ou.normalizeProvider=YC});var Hn=u(Sy=>{"use strict";Object.defineProperty(Sy,"__esModule",{value:!0});var QC=(A(),b(x));QC.__exportStar(Xv(),Sy)});var Zv=u(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.resolveEndpointConfig=void 0;var Ny=Hn(),XC=yy(),ZC=n(t=>{var e,r,i;let s=(e=t.tls)!==null&&e!==void 0?e:!0,{endpoint:o}=t,a=o!=null?async()=>(0,XC.toEndpointV1)(await(0,Ny.normalizeProvider)(o)()):void 0;return{...t,endpoint:a,tls:s,isCustomEndpoint:!!o,useDualstackEndpoint:(0,Ny.normalizeProvider)((r=t.useDualstackEndpoint)!==null&&r!==void 0?r:!1),useFipsEndpoint:(0,Ny.normalizeProvider)((i=t.useFipsEndpoint)!==null&&i!==void 0?i:!1)}},"resolveEndpointConfig");Tu.resolveEndpointConfig=ZC});var tS=u(eS=>{"use strict";Object.defineProperty(eS,"__esModule",{value:!0})});var ne=u(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});var xc=(A(),b(x));xc.__exportStar(Kv(),Gn);xc.__exportStar(gy(),Gn);xc.__exportStar(Qv(),Gn);xc.__exportStar(Zv(),Gn);xc.__exportStar(tS(),Gn)});var rS=u(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.NoOpLogger=void 0;var Pu=class{trace(){}debug(){}info(){}warn(){}error(){}};n(Pu,"NoOpLogger");Ru.NoOpLogger=Pu});var sS=u(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.constructStack=void 0;var e1=n(()=>{let t=[],e=[],r=new Set,i=n(f=>f.sort((m,h)=>iS[h.step]-iS[m.step]||nS[h.priority||"normal"]-nS[m.priority||"normal"]),"sort"),s=n(f=>{let m=!1,h=n(_=>_.name&&_.name===f?(m=!0,r.delete(f),!1):!0,"filterCb");return t=t.filter(h),e=e.filter(h),m},"removeByName"),o=n(f=>{let m=!1,h=n(_=>_.middleware===f?(m=!0,_.name&&r.delete(_.name),!1):!0,"filterCb");return t=t.filter(h),e=e.filter(h),m},"removeByReference"),a=n(f=>(t.forEach(m=>{f.add(m.middleware,{...m})}),e.forEach(m=>{f.addRelativeTo(m.middleware,{...m})}),f),"cloneTo"),c=n(f=>{let m=[];return f.before.forEach(h=>{h.before.length===0&&h.after.length===0?m.push(h):m.push(...c(h))}),m.push(f),f.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?m.push(h):m.push(...c(h))}),m},"expandRelativeMiddlewareList"),l=n((f=!1)=>{let m=[],h=[],_={};return t.forEach(g=>{let S={...g,before:[],after:[]};S.name&&(_[S.name]=S),m.push(S)}),e.forEach(g=>{let S={...g,before:[],after:[]};S.name&&(_[S.name]=S),h.push(S)}),h.forEach(g=>{if(g.toMiddleware){let S=_[g.toMiddleware];if(S===void 0){if(f)return;throw new Error(`${g.toMiddleware} is not found when adding ${g.name||"anonymous"} middleware ${g.relation} ${g.toMiddleware}`)}g.relation==="after"&&S.after.push(g),g.relation==="before"&&S.before.push(g)}}),i(m).map(c).reduce((g,S)=>(g.push(...S),g),[])},"getMiddlewareList"),p={add:(f,m={})=>{let{name:h,override:_}=m,w={step:"initialize",priority:"normal",middleware:f,...m};if(h){if(r.has(h)){if(!_)throw new Error(`Duplicate middleware name '${h}'`);let g=t.findIndex(ie=>ie.name===h),S=t[g];if(S.step!==w.step||S.priority!==w.priority)throw new Error(`"${h}" middleware with ${S.priority} priority in ${S.step} step cannot be overridden by same-name middleware with ${w.priority} priority in ${w.step} step.`);t.splice(g,1)}r.add(h)}t.push(w)},addRelativeTo:(f,m)=>{let{name:h,override:_}=m,w={middleware:f,...m};if(h){if(r.has(h)){if(!_)throw new Error(`Duplicate middleware name '${h}'`);let g=e.findIndex(ie=>ie.name===h),S=e[g];if(S.toMiddleware!==w.toMiddleware||S.relation!==w.relation)throw new Error(`"${h}" middleware ${S.relation} "${S.toMiddleware}" middleware cannot be overridden by same-name middleware ${w.relation} "${w.toMiddleware}" middleware.`);e.splice(g,1)}r.add(h)}e.push(w)},clone:()=>a((0,Fs.constructStack)()),use:f=>{f.applyToStack(p)},remove:f=>typeof f=="string"?s(f):o(f),removeByTag:f=>{let m=!1,h=n(_=>{let{tags:w,name:g}=_;return w&&w.includes(f)?(g&&r.delete(g),m=!0,!1):!0},"filterCb");return t=t.filter(h),e=e.filter(h),m},concat:f=>{let m=a((0,Fs.constructStack)());return m.use(f),m},applyToStack:a,identify:()=>l(!0).map(f=>f.name+": "+(f.tags||[]).join(",")),resolve:(f,m)=>{for(let h of l().map(_=>_.middleware).reverse())f=h(f,m);return f}};return p},"constructStack");Fs.constructStack=e1;var iS={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},nS={high:3,normal:2,low:1}});var xy=u(by=>{"use strict";Object.defineProperty(by,"__esModule",{value:!0});var t1=(A(),b(x));t1.__exportStar(sS(),by)});var oS=u(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.Client=void 0;var r1=xy(),Iu=class{constructor(e){this.middlewareStack=(0,r1.constructStack)(),this.config=e}send(e,r,i){let s=typeof r!="function"?r:void 0,o=typeof r=="function"?r:i,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(o)a(e).then(c=>o(null,c.output),c=>o(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};n(Iu,"Client");qu.Client=Iu});var aS=u(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.Command=void 0;var i1=xy(),Cu=class{constructor(){this.middlewareStack=(0,i1.constructStack)()}};n(Cu,"Command");ku.Command=Cu});var cS=u(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.SENSITIVE_STRING=void 0;Mu.SENSITIVE_STRING="***SensitiveInformation***"});var Oy=u(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.logger=v.strictParseByte=v.strictParseShort=v.strictParseInt32=v.strictParseInt=v.strictParseLong=v.limitedParseFloat32=v.limitedParseFloat=v.handleFloat=v.limitedParseDouble=v.strictParseFloat32=v.strictParseFloat=v.strictParseDouble=v.expectUnion=v.expectString=v.expectObject=v.expectNonNull=v.expectByte=v.expectShort=v.expectInt32=v.expectInt=v.expectLong=v.expectFloat32=v.expectNumber=v.expectBoolean=v.parseBoolean=void 0;var n1=n(t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},"parseBoolean");v.parseBoolean=n1;var s1=n(t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&v.logger.warn(Du(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&v.logger.warn(Du(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},"expectBoolean");v.expectBoolean=s1;var o1=n(t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&v.logger.warn(Du(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},"expectNumber");v.expectNumber=o1;var a1=Math.ceil(2**127*(2-2**-23)),c1=n(t=>{let e=(0,v.expectNumber)(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>a1)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},"expectFloat32");v.expectFloat32=c1;var d1=n(t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},"expectLong");v.expectLong=d1;v.expectInt=v.expectLong;var u1=n(t=>Ay(t,32),"expectInt32");v.expectInt32=u1;var l1=n(t=>Ay(t,16),"expectShort");v.expectShort=l1;var p1=n(t=>Ay(t,8),"expectByte");v.expectByte=p1;var Ay=n((t,e)=>{let r=(0,v.expectLong)(t);if(r!==void 0&&f1(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},"expectSizedInt"),f1=n((t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},"castInt"),m1=n((t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},"expectNonNull");v.expectNonNull=m1;var h1=n(t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},"expectObject");v.expectObject=h1;var _1=n(t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return v.logger.warn(Du(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},"expectString");v.expectString=_1;var y1=n(t=>{if(t==null)return;let e=(0,v.expectObject)(t),r=Object.entries(e).filter(([,i])=>i!=null).map(([i])=>i);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},"expectUnion");v.expectUnion=y1;var g1=n(t=>typeof t=="string"?(0,v.expectNumber)(Ls(t)):(0,v.expectNumber)(t),"strictParseDouble");v.strictParseDouble=g1;v.strictParseFloat=v.strictParseDouble;var w1=n(t=>typeof t=="string"?(0,v.expectFloat32)(Ls(t)):(0,v.expectFloat32)(t),"strictParseFloat32");v.strictParseFloat32=w1;var E1=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Ls=n(t=>{let e=t.match(E1);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},"parseNumber"),v1=n(t=>typeof t=="string"?dS(t):(0,v.expectNumber)(t),"limitedParseDouble");v.limitedParseDouble=v1;v.handleFloat=v.limitedParseDouble;v.limitedParseFloat=v.limitedParseDouble;var S1=n(t=>typeof t=="string"?dS(t):(0,v.expectFloat32)(t),"limitedParseFloat32");v.limitedParseFloat32=S1;var dS=n(t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},"parseFloatString"),N1=n(t=>typeof t=="string"?(0,v.expectLong)(Ls(t)):(0,v.expectLong)(t),"strictParseLong");v.strictParseLong=N1;v.strictParseInt=v.strictParseLong;var b1=n(t=>typeof t=="string"?(0,v.expectInt32)(Ls(t)):(0,v.expectInt32)(t),"strictParseInt32");v.strictParseInt32=b1;var x1=n(t=>typeof t=="string"?(0,v.expectShort)(Ls(t)):(0,v.expectShort)(t),"strictParseShort");v.strictParseShort=x1;var A1=n(t=>typeof t=="string"?(0,v.expectByte)(Ls(t)):(0,v.expectByte)(t),"strictParseByte");v.strictParseByte=A1;var Du=n(t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),"stackTraceWarning");v.logger={warn:console.warn}});var uS=u(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.parseEpochTimestamp=Dt.parseRfc7231DateTime=Dt.parseRfc3339DateTimeWithOffset=Dt.parseRfc3339DateTime=Dt.dateToUtcString=void 0;var Gi=Oy(),O1=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Py=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T1(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),i=t.getUTCDay(),s=t.getUTCDate(),o=t.getUTCHours(),a=t.getUTCMinutes(),c=t.getUTCSeconds(),l=s<10?`0${s}`:`${s}`,p=o<10?`0${o}`:`${o}`,f=a<10?`0${a}`:`${a}`,m=c<10?`0${c}`:`${c}`;return`${O1[i]}, ${l} ${Py[r]} ${e} ${p}:${f}:${m} GMT`}n(T1,"dateToUtcString");Dt.dateToUtcString=T1;var P1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),R1=n(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=P1.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,i,s,o,a,c,l,p]=e,f=(0,Gi.strictParseShort)(zs(i)),m=wr(s,"month",1,12),h=wr(o,"day",1,31);return Ac(f,m,h,{hours:a,minutes:c,seconds:l,fractionalMilliseconds:p})},"parseRfc3339DateTime");Dt.parseRfc3339DateTime=R1;var I1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),q1=n(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=I1.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,i,s,o,a,c,l,p,f]=e,m=(0,Gi.strictParseShort)(zs(i)),h=wr(s,"month",1,12),_=wr(o,"day",1,31),w=Ac(m,h,_,{hours:a,minutes:c,seconds:l,fractionalMilliseconds:p});return f.toUpperCase()!="Z"&&w.setTime(w.getTime()-H1(f)),w},"parseRfc3339DateTimeWithOffset");Dt.parseRfc3339DateTimeWithOffset=q1;var C1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),k1=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),M1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),D1=n(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=C1.exec(t);if(e){let[r,i,s,o,a,c,l,p]=e;return Ac((0,Gi.strictParseShort)(zs(o)),Ty(s),wr(i,"day",1,31),{hours:a,minutes:c,seconds:l,fractionalMilliseconds:p})}if(e=k1.exec(t),e){let[r,i,s,o,a,c,l,p]=e;return W1(Ac(L1(o),Ty(s),wr(i,"day",1,31),{hours:a,minutes:c,seconds:l,fractionalMilliseconds:p}))}if(e=M1.exec(t),e){let[r,i,s,o,a,c,l,p]=e;return Ac((0,Gi.strictParseShort)(zs(p)),Ty(i),wr(s.trimLeft(),"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:l})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime");Dt.parseRfc7231DateTime=D1;var F1=n(t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=(0,Gi.strictParseDouble)(t);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},"parseEpochTimestamp");Dt.parseEpochTimestamp=F1;var Ac=n((t,e,r,i)=>{let s=e-1;return j1(t,s,r),new Date(Date.UTC(t,s,r,wr(i.hours,"hour",0,23),wr(i.minutes,"minute",0,59),wr(i.seconds,"seconds",0,60),$1(i.fractionalMilliseconds)))},"buildDate"),L1=n(t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+(0,Gi.strictParseShort)(zs(t));return r<e?r+100:r},"parseTwoDigitYear"),z1=50*365*24*60*60*1e3,W1=n(t=>t.getTime()-new Date().getTime()>z1?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,"adjustRfc850Year"),Ty=n(t=>{let e=Py.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},"parseMonthByShortName"),U1=[31,28,31,30,31,30,31,31,30,31,30,31],j1=n((t,e,r)=>{let i=U1[e];if(e===1&&V1(t)&&(i=29),r>i)throw new TypeError(`Invalid day for ${Py[e]} in ${t}: ${r}`)},"validateDayOfMonth"),V1=n(t=>t%4===0&&(t%100!==0||t%400===0),"isLeapYear"),wr=n((t,e,r,i)=>{let s=(0,Gi.strictParseByte)(zs(t));if(s<r||s>i)throw new TypeError(`${e} must be between ${r} and ${i}, inclusive`);return s},"parseDateValue"),$1=n(t=>t==null?0:(0,Gi.strictParseFloat32)("0."+t)*1e3,"parseMilliseconds"),H1=n(t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let i=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(i*60+s)*60*1e3},"parseOffsetToMilliseconds"),zs=n(t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)},"stripLeadingZeroes")});var Ry=u(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.decorateServiceException=Us.ServiceException=void 0;var Ws=class extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,Ws.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}};n(Ws,"ServiceException");Us.ServiceException=Ws;var G1=n((t,e={})=>{Object.entries(e).filter(([,i])=>i!==void 0).forEach(([i,s])=>{(t[i]==null||t[i]==="")&&(t[i]=s)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},"decorateServiceException");Us.decorateServiceException=G1});var lS=u(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.throwDefaultError=void 0;var B1=Ry(),J1=n(({output:t,parsedBody:e,exceptionCtor:r,errorCode:i})=>{let s=K1(t),o=s.httpStatusCode?s.httpStatusCode+"":void 0,a=new r({name:e?.code||e?.Code||i||o||"UnknownError",$fault:"client",$metadata:s});throw(0,B1.decorateServiceException)(a,e)},"throwDefaultError");Fu.throwDefaultError=J1;var K1=n(t=>{var e,r;return{httpStatusCode:t.statusCode,requestId:(r=(e=t.headers["x-amzn-requestid"])!==null&&e!==void 0?e:t.headers["x-amzn-request-id"])!==null&&r!==void 0?r:t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}},"deserializeMetadata")});var pS=u(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.loadConfigsForDefaultMode=void 0;var Y1=n(t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode");Lu.loadConfigsForDefaultMode=Y1});var mS=u(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.emitWarningIfUnsupportedVersion=void 0;var fS=!1,Q1=n(t=>{t&&!fS&&parseInt(t.substring(1,t.indexOf(".")))<14&&(fS=!0)},"emitWarningIfUnsupportedVersion");zu.emitWarningIfUnsupportedVersion=Q1});var Iy=u(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.extendedEncodeURIComponent=void 0;function X1(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}n(X1,"extendedEncodeURIComponent");Wu.extendedEncodeURIComponent=X1});var hS=u(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.getArrayIfSingleItem=void 0;var Z1=n(t=>Array.isArray(t)?t:[t],"getArrayIfSingleItem");Uu.getArrayIfSingleItem=Z1});var _S=u(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.getValueFromTextNode=void 0;var ek=n(t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=(0,Oc.getValueFromTextNode)(t[r]));return t},"getValueFromTextNode");Oc.getValueFromTextNode=ek});var yS=u(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.LazyJsonString=Er.StringWrapper=void 0;var tk=n(function(){let t=Object.getPrototypeOf(this).constructor,e=Function.bind.apply(String,[null,...arguments]),r=new e;return Object.setPrototypeOf(r,t.prototype),r},"StringWrapper");Er.StringWrapper=tk;Er.StringWrapper.prototype=Object.create(String.prototype,{constructor:{value:Er.StringWrapper,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Er.StringWrapper,String);var Bi=class extends Er.StringWrapper{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(e){return e instanceof Bi?e:e instanceof String||typeof e=="string"?new Bi(e):new Bi(JSON.stringify(e))}};n(Bi,"LazyJsonString");Er.LazyJsonString=Bi});var wS=u(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.convertMap=js.map=void 0;function gS(t,e,r){let i,s,o;if(typeof e>"u"&&typeof r>"u")i={},o=t;else{if(i=t,typeof e=="function")return s=e,o=r,ik(i,s,o);o=e}for(let a of Object.keys(o)){if(!Array.isArray(o[a])){i[a]=o[a];continue}let[c,l]=o[a];if(typeof l=="function"){let p,f=c===void 0&&(p=l())!=null,m=typeof c=="function"&&!!c(void 0)||typeof c!="function"&&!!c;f?i[a]=p:m&&(i[a]=l())}else{let p=c===void 0&&l!=null,f=typeof c=="function"&&!!c(l)||typeof c!="function"&&!!c;(p||f)&&(i[a]=l)}}return i}n(gS,"map");js.map=gS;var rk=n(t=>{let e={};for(let[r,i]of Object.entries(t||{}))e[r]=[,i];return e},"convertMap");js.convertMap=rk;var ik=n((t,e,r)=>gS(t,Object.entries(r).reduce((i,[s,o])=>(Array.isArray(o)?i[s]=o:typeof o=="function"?i[s]=[e,o()]:i[s]=[e,o],i),{})),"mapWithFilter")});var vS=u(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.resolvedPath=void 0;var ES=Iy(),nk=n((t,e,r,i,s,o)=>{if(e!=null&&e[r]!==void 0){let a=i();if(a.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,o?a.split("/").map(c=>(0,ES.extendedEncodeURIComponent)(c)).join("/"):(0,ES.extendedEncodeURIComponent)(a))}else throw new Error("No value provided for input HTTP label: "+r+".");return t},"resolvedPath");ju.resolvedPath=nk});var SS=u(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.serializeFloat=void 0;var sk=n(t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},"serializeFloat");Vu.serializeFloat=sk});var NS=u($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.splitEvery=void 0;function ok(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let i=t.split(e);if(r===1)return i;let s=[],o="";for(let a=0;a<i.length;a++)o===""?o=i[a]:o+=e+i[a],(a+1)%r===0&&(s.push(o),o="");return o!==""&&s.push(o),s}n(ok,"splitEvery");$u.splitEvery=ok});var k=u(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});var Fe=(A(),b(x));Fe.__exportStar(rS(),Oe);Fe.__exportStar(oS(),Oe);Fe.__exportStar(aS(),Oe);Fe.__exportStar(cS(),Oe);Fe.__exportStar(uS(),Oe);Fe.__exportStar(lS(),Oe);Fe.__exportStar(pS(),Oe);Fe.__exportStar(mS(),Oe);Fe.__exportStar(Ry(),Oe);Fe.__exportStar(Iy(),Oe);Fe.__exportStar(hS(),Oe);Fe.__exportStar(_S(),Oe);Fe.__exportStar(yS(),Oe);Fe.__exportStar(wS(),Oe);Fe.__exportStar(Oy(),Oe);Fe.__exportStar(vS(),Oe);Fe.__exportStar(SS(),Oe);Fe.__exportStar(NS(),Oe)});var Gu=u(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.RDSDataServiceException=void 0;var ak=k(),Vs=class extends ak.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,Vs.prototype)}};n(Vs,"RDSDataServiceException");Hu.RDSDataServiceException=Vs});var ui=u(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.ExecuteSqlResponseFilterSensitiveLog=y.SqlStatementResultFilterSensitiveLog=y.ResultFrameFilterSensitiveLog=y.ExecuteStatementResponseFilterSensitiveLog=y._RecordFilterSensitiveLog=y.BatchExecuteStatementResponseFilterSensitiveLog=y.BatchExecuteStatementRequestFilterSensitiveLog=y.StructValueFilterSensitiveLog=y.ExecuteStatementRequestFilterSensitiveLog=y.ValueFilterSensitiveLog=y.UpdateResultFilterSensitiveLog=y.SqlParameterFilterSensitiveLog=y.FieldFilterSensitiveLog=y.ArrayValueFilterSensitiveLog=y.RollbackTransactionResponseFilterSensitiveLog=y.RollbackTransactionRequestFilterSensitiveLog=y.ResultSetOptionsFilterSensitiveLog=y.ResultSetMetadataFilterSensitiveLog=y.ExecuteSqlRequestFilterSensitiveLog=y.CommitTransactionResponseFilterSensitiveLog=y.CommitTransactionRequestFilterSensitiveLog=y.ColumnMetadataFilterSensitiveLog=y.BeginTransactionResponseFilterSensitiveLog=y.BeginTransactionRequestFilterSensitiveLog=y.Value=y.Field=y.ArrayValue=y.LongReturnType=y.RecordsFormatType=y.DecimalReturnType=y.NotFoundException=y.StatementTimeoutException=y.ServiceUnavailableError=y.InternalServerErrorException=y.ForbiddenException=y.TypeHint=y.BadRequestException=y.AccessDeniedException=void 0;var Bn=Gu(),$s=class extends Bn.RDSDataServiceException{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,$s.prototype)}};n($s,"AccessDeniedException");y.AccessDeniedException=$s;var Hs=class extends Bn.RDSDataServiceException{constructor(e){super({name:"BadRequestException",$fault:"client",...e}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,Hs.prototype)}};n(Hs,"BadRequestException");y.BadRequestException=Hs;var ck;(function(t){t.DATE="DATE",t.DECIMAL="DECIMAL",t.JSON="JSON",t.TIME="TIME",t.TIMESTAMP="TIMESTAMP",t.UUID="UUID"})(ck=y.TypeHint||(y.TypeHint={}));var Gs=class extends Bn.RDSDataServiceException{constructor(e){super({name:"ForbiddenException",$fault:"client",...e}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,Gs.prototype)}};n(Gs,"ForbiddenException");y.ForbiddenException=Gs;var Bs=class extends Bn.RDSDataServiceException{constructor(e){super({name:"InternalServerErrorException",$fault:"server",...e}),this.name="InternalServerErrorException",this.$fault="server",Object.setPrototypeOf(this,Bs.prototype)}};n(Bs,"InternalServerErrorException");y.InternalServerErrorException=Bs;var Js=class extends Bn.RDSDataServiceException{constructor(e){super({name:"ServiceUnavailableError",$fault:"server",...e}),this.name="ServiceUnavailableError",this.$fault="server",Object.setPrototypeOf(this,Js.prototype)}};n(Js,"ServiceUnavailableError");y.ServiceUnavailableError=Js;var Ks=class extends Bn.RDSDataServiceException{constructor(e){super({name:"StatementTimeoutException",$fault:"client",...e}),this.name="StatementTimeoutException",this.$fault="client",Object.setPrototypeOf(this,Ks.prototype),this.dbConnectionId=e.dbConnectionId}};n(Ks,"StatementTimeoutException");y.StatementTimeoutException=Ks;var Ys=class extends Bn.RDSDataServiceException{constructor(e){super({name:"NotFoundException",$fault:"client",...e}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,Ys.prototype)}};n(Ys,"NotFoundException");y.NotFoundException=Ys;var dk;(function(t){t.DOUBLE_OR_LONG="DOUBLE_OR_LONG",t.STRING="STRING"})(dk=y.DecimalReturnType||(y.DecimalReturnType={}));var uk;(function(t){t.JSON="JSON",t.NONE="NONE"})(uk=y.RecordsFormatType||(y.RecordsFormatType={}));var lk;(function(t){t.LONG="LONG",t.STRING="STRING"})(lk=y.LongReturnType||(y.LongReturnType={}));var pk;(function(t){t.visit=(e,r)=>e.booleanValues!==void 0?r.booleanValues(e.booleanValues):e.longValues!==void 0?r.longValues(e.longValues):e.doubleValues!==void 0?r.doubleValues(e.doubleValues):e.stringValues!==void 0?r.stringValues(e.stringValues):e.arrayValues!==void 0?r.arrayValues(e.arrayValues):r._(e.$unknown[0],e.$unknown[1])})(pk=y.ArrayValue||(y.ArrayValue={}));var fk;(function(t){t.visit=(e,r)=>e.isNull!==void 0?r.isNull(e.isNull):e.booleanValue!==void 0?r.booleanValue(e.booleanValue):e.longValue!==void 0?r.longValue(e.longValue):e.doubleValue!==void 0?r.doubleValue(e.doubleValue):e.stringValue!==void 0?r.stringValue(e.stringValue):e.blobValue!==void 0?r.blobValue(e.blobValue):e.arrayValue!==void 0?r.arrayValue(e.arrayValue):r._(e.$unknown[0],e.$unknown[1])})(fk=y.Field||(y.Field={}));var mk;(function(t){t.visit=(e,r)=>e.isNull!==void 0?r.isNull(e.isNull):e.bitValue!==void 0?r.bitValue(e.bitValue):e.bigIntValue!==void 0?r.bigIntValue(e.bigIntValue):e.intValue!==void 0?r.intValue(e.intValue):e.doubleValue!==void 0?r.doubleValue(e.doubleValue):e.realValue!==void 0?r.realValue(e.realValue):e.stringValue!==void 0?r.stringValue(e.stringValue):e.blobValue!==void 0?r.blobValue(e.blobValue):e.arrayValues!==void 0?r.arrayValues(e.arrayValues):e.structValue!==void 0?r.structValue(e.structValue):r._(e.$unknown[0],e.$unknown[1])})(mk=y.Value||(y.Value={}));var hk=n(t=>({...t}),"BeginTransactionRequestFilterSensitiveLog");y.BeginTransactionRequestFilterSensitiveLog=hk;var _k=n(t=>({...t}),"BeginTransactionResponseFilterSensitiveLog");y.BeginTransactionResponseFilterSensitiveLog=_k;var yk=n(t=>({...t}),"ColumnMetadataFilterSensitiveLog");y.ColumnMetadataFilterSensitiveLog=yk;var gk=n(t=>({...t}),"CommitTransactionRequestFilterSensitiveLog");y.CommitTransactionRequestFilterSensitiveLog=gk;var wk=n(t=>({...t}),"CommitTransactionResponseFilterSensitiveLog");y.CommitTransactionResponseFilterSensitiveLog=wk;var Ek=n(t=>({...t}),"ExecuteSqlRequestFilterSensitiveLog");y.ExecuteSqlRequestFilterSensitiveLog=Ek;var vk=n(t=>({...t}),"ResultSetMetadataFilterSensitiveLog");y.ResultSetMetadataFilterSensitiveLog=vk;var Sk=n(t=>({...t}),"ResultSetOptionsFilterSensitiveLog");y.ResultSetOptionsFilterSensitiveLog=Sk;var Nk=n(t=>({...t}),"RollbackTransactionRequestFilterSensitiveLog");y.RollbackTransactionRequestFilterSensitiveLog=Nk;var bk=n(t=>({...t}),"RollbackTransactionResponseFilterSensitiveLog");y.RollbackTransactionResponseFilterSensitiveLog=bk;var xk=n(t=>{if(t.booleanValues!==void 0)return{booleanValues:t.booleanValues};if(t.longValues!==void 0)return{longValues:t.longValues};if(t.doubleValues!==void 0)return{doubleValues:t.doubleValues};if(t.stringValues!==void 0)return{stringValues:t.stringValues};if(t.arrayValues!==void 0)return{arrayValues:t.arrayValues.map(e=>(0,y.ArrayValueFilterSensitiveLog)(e))};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},"ArrayValueFilterSensitiveLog");y.ArrayValueFilterSensitiveLog=xk;var Ak=n(t=>{if(t.isNull!==void 0)return{isNull:t.isNull};if(t.booleanValue!==void 0)return{booleanValue:t.booleanValue};if(t.longValue!==void 0)return{longValue:t.longValue};if(t.doubleValue!==void 0)return{doubleValue:t.doubleValue};if(t.stringValue!==void 0)return{stringValue:t.stringValue};if(t.blobValue!==void 0)return{blobValue:t.blobValue};if(t.arrayValue!==void 0)return{arrayValue:(0,y.ArrayValueFilterSensitiveLog)(t.arrayValue)};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},"FieldFilterSensitiveLog");y.FieldFilterSensitiveLog=Ak;var Ok=n(t=>({...t,...t.value&&{value:(0,y.FieldFilterSensitiveLog)(t.value)}}),"SqlParameterFilterSensitiveLog");y.SqlParameterFilterSensitiveLog=Ok;var Tk=n(t=>({...t,...t.generatedFields&&{generatedFields:t.generatedFields.map(e=>(0,y.FieldFilterSensitiveLog)(e))}}),"UpdateResultFilterSensitiveLog");y.UpdateResultFilterSensitiveLog=Tk;var Pk=n(t=>{if(t.isNull!==void 0)return{isNull:t.isNull};if(t.bitValue!==void 0)return{bitValue:t.bitValue};if(t.bigIntValue!==void 0)return{bigIntValue:t.bigIntValue};if(t.intValue!==void 0)return{intValue:t.intValue};if(t.doubleValue!==void 0)return{doubleValue:t.doubleValue};if(t.realValue!==void 0)return{realValue:t.realValue};if(t.stringValue!==void 0)return{stringValue:t.stringValue};if(t.blobValue!==void 0)return{blobValue:t.blobValue};if(t.arrayValues!==void 0)return{arrayValues:t.arrayValues.map(e=>(0,y.ValueFilterSensitiveLog)(e))};if(t.structValue!==void 0)return{structValue:(0,y.StructValueFilterSensitiveLog)(t.structValue)};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},"ValueFilterSensitiveLog");y.ValueFilterSensitiveLog=Pk;var Rk=n(t=>({...t,...t.parameters&&{parameters:t.parameters.map(e=>(0,y.SqlParameterFilterSensitiveLog)(e))}}),"ExecuteStatementRequestFilterSensitiveLog");y.ExecuteStatementRequestFilterSensitiveLog=Rk;var Ik=n(t=>({...t,...t.attributes&&{attributes:t.attributes.map(e=>(0,y.ValueFilterSensitiveLog)(e))}}),"StructValueFilterSensitiveLog");y.StructValueFilterSensitiveLog=Ik;var qk=n(t=>({...t,...t.parameterSets&&{parameterSets:t.parameterSets.map(e=>e.map(r=>(0,y.SqlParameterFilterSensitiveLog)(r)))}}),"BatchExecuteStatementRequestFilterSensitiveLog");y.BatchExecuteStatementRequestFilterSensitiveLog=qk;var Ck=n(t=>({...t,...t.updateResults&&{updateResults:t.updateResults.map(e=>(0,y.UpdateResultFilterSensitiveLog)(e))}}),"BatchExecuteStatementResponseFilterSensitiveLog");y.BatchExecuteStatementResponseFilterSensitiveLog=Ck;var kk=n(t=>({...t,...t.values&&{values:t.values.map(e=>(0,y.ValueFilterSensitiveLog)(e))}}),"_RecordFilterSensitiveLog");y._RecordFilterSensitiveLog=kk;var Mk=n(t=>({...t,...t.records&&{records:t.records.map(e=>e.map(r=>(0,y.FieldFilterSensitiveLog)(r)))},...t.generatedFields&&{generatedFields:t.generatedFields.map(e=>(0,y.FieldFilterSensitiveLog)(e))}}),"ExecuteStatementResponseFilterSensitiveLog");y.ExecuteStatementResponseFilterSensitiveLog=Mk;var Dk=n(t=>({...t,...t.records&&{records:t.records.map(e=>(0,y._RecordFilterSensitiveLog)(e))}}),"ResultFrameFilterSensitiveLog");y.ResultFrameFilterSensitiveLog=Dk;var Fk=n(t=>({...t}),"SqlStatementResultFilterSensitiveLog");y.SqlStatementResultFilterSensitiveLog=Fk;var Lk=n(t=>({...t}),"ExecuteSqlResponseFilterSensitiveLog");y.ExecuteSqlResponseFilterSensitiveLog=Lk});var qy=u(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.FieldPosition=void 0;var zk;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(zk=Tc.FieldPosition||(Tc.FieldPosition={}))});var bS=u(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.Field=void 0;var Wk=qy(),Bu=class{constructor({name:e,kind:r=Wk.FieldPosition.HEADER,values:i=[]}){this.name=e,this.kind=r,this.values=i}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}};n(Bu,"Field");Ju.Field=Bu});var xS=u(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.Fields=void 0;var Ku=class{constructor({fields:e=[],encoding:r="utf-8"}){this.entries={},e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name]=e}getField(e){return this.entries[e]}removeField(e){delete this.entries[e]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}};n(Ku,"Fields");Yu.Fields=Ku});var OS=u(AS=>{"use strict";Object.defineProperty(AS,"__esModule",{value:!0})});var TS=u(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.HttpRequest=void 0;var Qs=class{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/"}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let e=new Qs({...this,headers:{...this.headers}});return e.query&&(e.query=Uk(e.query)),e}};n(Qs,"HttpRequest");Qu.HttpRequest=Qs;function Uk(t){return Object.keys(t).reduce((e,r)=>{let i=t[r];return{...e,[r]:Array.isArray(i)?[...i]:i}},{})}n(Uk,"cloneQuery")});var PS=u(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.HttpResponse=void 0;var Xu=class{constructor(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};n(Xu,"HttpResponse");Zu.HttpResponse=Xu});var RS=u(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.isValidHostname=void 0;function jk(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}n(jk,"isValidHostname");el.isValidHostname=jk});var at=u(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});var Jn=(A(),b(x));Jn.__exportStar(bS(),li);Jn.__exportStar(qy(),li);Jn.__exportStar(xS(),li);Jn.__exportStar(OS(),li);Jn.__exportStar(TS(),li);Jn.__exportStar(PS(),li);Jn.__exportStar(RS(),li)});var Yn=u(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.deserializeAws_restJson1RollbackTransactionCommand=se.deserializeAws_restJson1ExecuteStatementCommand=se.deserializeAws_restJson1ExecuteSqlCommand=se.deserializeAws_restJson1CommitTransactionCommand=se.deserializeAws_restJson1BeginTransactionCommand=se.deserializeAws_restJson1BatchExecuteStatementCommand=se.serializeAws_restJson1RollbackTransactionCommand=se.serializeAws_restJson1ExecuteStatementCommand=se.serializeAws_restJson1ExecuteSqlCommand=se.serializeAws_restJson1CommitTransactionCommand=se.serializeAws_restJson1BeginTransactionCommand=se.serializeAws_restJson1BatchExecuteStatementCommand=void 0;var Xs=at(),E=k(),pi=ui(),Zs=Gu(),Vk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/BatchExecute`,l;return l=JSON.stringify({...t.database!=null&&{database:t.database},...t.parameterSets!=null&&{parameterSets:mM(t.parameterSets,e)},...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.schema!=null&&{schema:t.schema},...t.secretArn!=null&&{secretArn:t.secretArn},...t.sql!=null&&{sql:t.sql},...t.transactionId!=null&&{transactionId:t.transactionId}}),new Xs.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1BatchExecuteStatementCommand");se.serializeAws_restJson1BatchExecuteStatementCommand=Vk;var $k=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/BeginTransaction`,l;return l=JSON.stringify({...t.database!=null&&{database:t.database},...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.schema!=null&&{schema:t.schema},...t.secretArn!=null&&{secretArn:t.secretArn}}),new Xs.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1BeginTransactionCommand");se.serializeAws_restJson1BeginTransactionCommand=$k;var Hk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/CommitTransaction`,l;return l=JSON.stringify({...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.secretArn!=null&&{secretArn:t.secretArn},...t.transactionId!=null&&{transactionId:t.transactionId}}),new Xs.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1CommitTransactionCommand");se.serializeAws_restJson1CommitTransactionCommand=Hk;var Gk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/ExecuteSql`,l;return l=JSON.stringify({...t.awsSecretStoreArn!=null&&{awsSecretStoreArn:t.awsSecretStoreArn},...t.database!=null&&{database:t.database},...t.dbClusterOrInstanceArn!=null&&{dbClusterOrInstanceArn:t.dbClusterOrInstanceArn},...t.schema!=null&&{schema:t.schema},...t.sqlStatements!=null&&{sqlStatements:t.sqlStatements}}),new Xs.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1ExecuteSqlCommand");se.serializeAws_restJson1ExecuteSqlCommand=Gk;var Bk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/Execute`,l;return l=JSON.stringify({...t.continueAfterTimeout!=null&&{continueAfterTimeout:t.continueAfterTimeout},...t.database!=null&&{database:t.database},...t.formatRecordsAs!=null&&{formatRecordsAs:t.formatRecordsAs},...t.includeResultMetadata!=null&&{includeResultMetadata:t.includeResultMetadata},...t.parameters!=null&&{parameters:CS(t.parameters,e)},...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.resultSetOptions!=null&&{resultSetOptions:pM(t.resultSetOptions,e)},...t.schema!=null&&{schema:t.schema},...t.secretArn!=null&&{secretArn:t.secretArn},...t.sql!=null&&{sql:t.sql},...t.transactionId!=null&&{transactionId:t.transactionId}}),new Xs.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1ExecuteStatementCommand");se.serializeAws_restJson1ExecuteStatementCommand=Bk;var Jk=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/RollbackTransaction`,l;return l=JSON.stringify({...t.resourceArn!=null&&{resourceArn:t.resourceArn},...t.secretArn!=null&&{secretArn:t.secretArn},...t.transactionId!=null&&{transactionId:t.transactionId}}),new Xs.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1RollbackTransactionCommand");se.serializeAws_restJson1RollbackTransactionCommand=Jk;var Kk=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Yk(t,e);let r=Ot({$metadata:Tt(t)}),i=(0,E.expectNonNull)((0,E.expectObject)(await Kn(t.body,e)),"body");return i.updateResults!=null&&(r.updateResults=CM(i.updateResults,e)),r},"deserializeAws_restJson1BatchExecuteStatementCommand");se.deserializeAws_restJson1BatchExecuteStatementCommand=Kk;var Yk=n(async(t,e)=>{let r={...t,body:await so(t.body,e)},i=oo(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await eo(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await to(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await ro(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await io(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await no(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Pc(r,e);default:let s=r.body;(0,E.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Zs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1BatchExecuteStatementCommandError"),Qk=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Xk(t,e);let r=Ot({$metadata:Tt(t)}),i=(0,E.expectNonNull)((0,E.expectObject)(await Kn(t.body,e)),"body");return i.transactionId!=null&&(r.transactionId=(0,E.expectString)(i.transactionId)),r},"deserializeAws_restJson1BeginTransactionCommand");se.deserializeAws_restJson1BeginTransactionCommand=Qk;var Xk=n(async(t,e)=>{let r={...t,body:await so(t.body,e)},i=oo(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await eo(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await to(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await ro(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await io(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await no(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Pc(r,e);default:let s=r.body;(0,E.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Zs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1BeginTransactionCommandError"),Zk=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return eM(t,e);let r=Ot({$metadata:Tt(t)}),i=(0,E.expectNonNull)((0,E.expectObject)(await Kn(t.body,e)),"body");return i.transactionStatus!=null&&(r.transactionStatus=(0,E.expectString)(i.transactionStatus)),r},"deserializeAws_restJson1CommitTransactionCommand");se.deserializeAws_restJson1CommitTransactionCommand=Zk;var eM=n(async(t,e)=>{let r={...t,body:await so(t.body,e)},i=oo(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await eo(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await to(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await ro(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await io(r,e);case"NotFoundException":case"com.amazonaws.rdsdata#NotFoundException":throw await IS(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await no(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Pc(r,e);default:let s=r.body;(0,E.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Zs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1CommitTransactionCommandError"),tM=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return rM(t,e);let r=Ot({$metadata:Tt(t)}),i=(0,E.expectNonNull)((0,E.expectObject)(await Kn(t.body,e)),"body");return i.sqlStatementResults!=null&&(r.sqlStatementResults=PM(i.sqlStatementResults,e)),r},"deserializeAws_restJson1ExecuteSqlCommand");se.deserializeAws_restJson1ExecuteSqlCommand=tM;var rM=n(async(t,e)=>{let r={...t,body:await so(t.body,e)},i=oo(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await eo(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await to(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await ro(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await io(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await no(r,e);default:let s=r.body;(0,E.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Zs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1ExecuteSqlCommandError"),iM=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return nM(t,e);let r=Ot({$metadata:Tt(t)}),i=(0,E.expectNonNull)((0,E.expectObject)(await Kn(t.body,e)),"body");return i.columnMetadata!=null&&(r.columnMetadata=DS(i.columnMetadata,e)),i.formattedRecords!=null&&(r.formattedRecords=(0,E.expectString)(i.formattedRecords)),i.generatedFields!=null&&(r.generatedFields=Cy(i.generatedFields,e)),i.numberOfRecordsUpdated!=null&&(r.numberOfRecordsUpdated=(0,E.expectLong)(i.numberOfRecordsUpdated)),i.records!=null&&(r.records=OM(i.records,e)),r},"deserializeAws_restJson1ExecuteStatementCommand");se.deserializeAws_restJson1ExecuteStatementCommand=iM;var nM=n(async(t,e)=>{let r={...t,body:await so(t.body,e)},i=oo(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await eo(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await to(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await ro(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await io(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await no(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Pc(r,e);default:let s=r.body;(0,E.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Zs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1ExecuteStatementCommandError"),sM=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return oM(t,e);let r=Ot({$metadata:Tt(t)}),i=(0,E.expectNonNull)((0,E.expectObject)(await Kn(t.body,e)),"body");return i.transactionStatus!=null&&(r.transactionStatus=(0,E.expectString)(i.transactionStatus)),r},"deserializeAws_restJson1RollbackTransactionCommand");se.deserializeAws_restJson1RollbackTransactionCommand=sM;var oM=n(async(t,e)=>{let r={...t,body:await so(t.body,e)},i=oo(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await eo(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await to(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await ro(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await io(r,e);case"NotFoundException":case"com.amazonaws.rdsdata#NotFoundException":throw await IS(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await no(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await Pc(r,e);default:let s=r.body;(0,E.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:Zs.RDSDataServiceException,errorCode:i})}},"deserializeAws_restJson1RollbackTransactionCommandError"),Ot=E.map,eo=n(async(t,e)=>{let r=Ot({}),i=t.body;i.message!=null&&(r.message=(0,E.expectString)(i.message));let s=new pi.AccessDeniedException({$metadata:Tt(t),...r});return(0,E.decorateServiceException)(s,t.body)},"deserializeAws_restJson1AccessDeniedExceptionResponse"),to=n(async(t,e)=>{let r=Ot({}),i=t.body;i.message!=null&&(r.message=(0,E.expectString)(i.message));let s=new pi.BadRequestException({$metadata:Tt(t),...r});return(0,E.decorateServiceException)(s,t.body)},"deserializeAws_restJson1BadRequestExceptionResponse"),ro=n(async(t,e)=>{let r=Ot({}),i=t.body;i.message!=null&&(r.message=(0,E.expectString)(i.message));let s=new pi.ForbiddenException({$metadata:Tt(t),...r});return(0,E.decorateServiceException)(s,t.body)},"deserializeAws_restJson1ForbiddenExceptionResponse"),io=n(async(t,e)=>{let r=Ot({}),i=t.body,s=new pi.InternalServerErrorException({$metadata:Tt(t),...r});return(0,E.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InternalServerErrorExceptionResponse"),IS=n(async(t,e)=>{let r=Ot({}),i=t.body;i.message!=null&&(r.message=(0,E.expectString)(i.message));let s=new pi.NotFoundException({$metadata:Tt(t),...r});return(0,E.decorateServiceException)(s,t.body)},"deserializeAws_restJson1NotFoundExceptionResponse"),no=n(async(t,e)=>{let r=Ot({}),i=t.body,s=new pi.ServiceUnavailableError({$metadata:Tt(t),...r});return(0,E.decorateServiceException)(s,t.body)},"deserializeAws_restJson1ServiceUnavailableErrorResponse"),Pc=n(async(t,e)=>{let r=Ot({}),i=t.body;i.dbConnectionId!=null&&(r.dbConnectionId=(0,E.expectLong)(i.dbConnectionId)),i.message!=null&&(r.message=(0,E.expectString)(i.message));let s=new pi.StatementTimeoutException({$metadata:Tt(t),...r});return(0,E.decorateServiceException)(s,t.body)},"deserializeAws_restJson1StatementTimeoutExceptionResponse"),aM=n((t,e)=>t.filter(r=>r!=null).map(r=>qS(r,e)),"serializeAws_restJson1ArrayOfArray"),qS=n((t,e)=>pi.ArrayValue.visit(t,{arrayValues:r=>({arrayValues:aM(r,e)}),booleanValues:r=>({booleanValues:cM(r,e)}),doubleValues:r=>({doubleValues:dM(r,e)}),longValues:r=>({longValues:lM(r,e)}),stringValues:r=>({stringValues:hM(r,e)}),_:(r,i)=>({name:i})}),"serializeAws_restJson1ArrayValue"),cM=n((t,e)=>t.filter(r=>r!=null).map(r=>r),"serializeAws_restJson1BooleanArray"),dM=n((t,e)=>t.filter(r=>r!=null).map(r=>(0,E.serializeFloat)(r)),"serializeAws_restJson1DoubleArray"),uM=n((t,e)=>pi.Field.visit(t,{arrayValue:r=>({arrayValue:qS(r,e)}),blobValue:r=>({blobValue:e.base64Encoder(r)}),booleanValue:r=>({booleanValue:r}),doubleValue:r=>({doubleValue:(0,E.serializeFloat)(r)}),isNull:r=>({isNull:r}),longValue:r=>({longValue:r}),stringValue:r=>({stringValue:r}),_:(r,i)=>({name:i})}),"serializeAws_restJson1Field"),lM=n((t,e)=>t.filter(r=>r!=null).map(r=>r),"serializeAws_restJson1LongArray"),pM=n((t,e)=>({...t.decimalReturnType!=null&&{decimalReturnType:t.decimalReturnType},...t.longReturnType!=null&&{longReturnType:t.longReturnType}}),"serializeAws_restJson1ResultSetOptions"),fM=n((t,e)=>({...t.name!=null&&{name:t.name},...t.typeHint!=null&&{typeHint:t.typeHint},...t.value!=null&&{value:uM(t.value,e)}}),"serializeAws_restJson1SqlParameter"),mM=n((t,e)=>t.filter(r=>r!=null).map(r=>CS(r,e)),"serializeAws_restJson1SqlParameterSets"),CS=n((t,e)=>t.filter(r=>r!=null).map(r=>fM(r,e)),"serializeAws_restJson1SqlParametersList"),hM=n((t,e)=>t.filter(r=>r!=null).map(r=>r),"serializeAws_restJson1StringArray"),_M=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:kS((0,E.expectUnion)(i),e)),"deserializeAws_restJson1ArrayOfArray"),kS=n((t,e)=>t.arrayValues!=null?{arrayValues:_M(t.arrayValues,e)}:t.booleanValues!=null?{booleanValues:yM(t.booleanValues,e)}:t.doubleValues!=null?{doubleValues:wM(t.doubleValues,e)}:t.longValues!=null?{longValues:vM(t.longValues,e)}:t.stringValues!=null?{stringValues:RM(t.stringValues,e)}:{$unknown:Object.entries(t)[0]},"deserializeAws_restJson1ArrayValue"),MS=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:FS((0,E.expectUnion)(i),e)),"deserializeAws_restJson1ArrayValueList"),yM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:(0,E.expectBoolean)(i)),"deserializeAws_restJson1BooleanArray"),gM=n((t,e)=>({arrayBaseColumnType:(0,E.expectInt32)(t.arrayBaseColumnType),isAutoIncrement:(0,E.expectBoolean)(t.isAutoIncrement),isCaseSensitive:(0,E.expectBoolean)(t.isCaseSensitive),isCurrency:(0,E.expectBoolean)(t.isCurrency),isSigned:(0,E.expectBoolean)(t.isSigned),label:(0,E.expectString)(t.label),name:(0,E.expectString)(t.name),nullable:(0,E.expectInt32)(t.nullable),precision:(0,E.expectInt32)(t.precision),scale:(0,E.expectInt32)(t.scale),schemaName:(0,E.expectString)(t.schemaName),tableName:(0,E.expectString)(t.tableName),type:(0,E.expectInt32)(t.type),typeName:(0,E.expectString)(t.typeName)}),"deserializeAws_restJson1ColumnMetadata"),wM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:(0,E.limitedParseDouble)(i)),"deserializeAws_restJson1DoubleArray"),EM=n((t,e)=>t.arrayValue!=null?{arrayValue:kS((0,E.expectUnion)(t.arrayValue),e)}:t.blobValue!=null?{blobValue:e.base64Decoder(t.blobValue)}:(0,E.expectBoolean)(t.booleanValue)!==void 0?{booleanValue:(0,E.expectBoolean)(t.booleanValue)}:(0,E.limitedParseDouble)(t.doubleValue)!==void 0?{doubleValue:(0,E.limitedParseDouble)(t.doubleValue)}:(0,E.expectBoolean)(t.isNull)!==void 0?{isNull:(0,E.expectBoolean)(t.isNull)}:(0,E.expectLong)(t.longValue)!==void 0?{longValue:(0,E.expectLong)(t.longValue)}:(0,E.expectString)(t.stringValue)!==void 0?{stringValue:(0,E.expectString)(t.stringValue)}:{$unknown:Object.entries(t)[0]},"deserializeAws_restJson1Field"),Cy=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:EM((0,E.expectUnion)(i),e)),"deserializeAws_restJson1FieldList"),vM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:(0,E.expectLong)(i)),"deserializeAws_restJson1LongArray"),DS=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:gM(i,e)),"deserializeAws_restJson1Metadata"),SM=n((t,e)=>({values:t.values!=null?AM(t.values,e):void 0}),"deserializeAws_restJson1_Record"),NM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:SM(i,e)),"deserializeAws_restJson1Records"),bM=n((t,e)=>({records:t.records!=null?NM(t.records,e):void 0,resultSetMetadata:t.resultSetMetadata!=null?xM(t.resultSetMetadata,e):void 0}),"deserializeAws_restJson1ResultFrame"),xM=n((t,e)=>({columnCount:(0,E.expectLong)(t.columnCount),columnMetadata:t.columnMetadata!=null?DS(t.columnMetadata,e):void 0}),"deserializeAws_restJson1ResultSetMetadata"),AM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:FS((0,E.expectUnion)(i),e)),"deserializeAws_restJson1Row"),OM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:Cy(i,e)),"deserializeAws_restJson1SqlRecords"),TM=n((t,e)=>({numberOfRecordsUpdated:(0,E.expectLong)(t.numberOfRecordsUpdated),resultFrame:t.resultFrame!=null?bM(t.resultFrame,e):void 0}),"deserializeAws_restJson1SqlStatementResult"),PM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:TM(i,e)),"deserializeAws_restJson1SqlStatementResults"),RM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:(0,E.expectString)(i)),"deserializeAws_restJson1StringArray"),IM=n((t,e)=>({attributes:t.attributes!=null?MS(t.attributes,e):void 0}),"deserializeAws_restJson1StructValue"),qM=n((t,e)=>({generatedFields:t.generatedFields!=null?Cy(t.generatedFields,e):void 0}),"deserializeAws_restJson1UpdateResult"),CM=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:qM(i,e)),"deserializeAws_restJson1UpdateResults"),FS=n((t,e)=>t.arrayValues!=null?{arrayValues:MS(t.arrayValues,e)}:(0,E.expectLong)(t.bigIntValue)!==void 0?{bigIntValue:(0,E.expectLong)(t.bigIntValue)}:(0,E.expectBoolean)(t.bitValue)!==void 0?{bitValue:(0,E.expectBoolean)(t.bitValue)}:t.blobValue!=null?{blobValue:e.base64Decoder(t.blobValue)}:(0,E.limitedParseDouble)(t.doubleValue)!==void 0?{doubleValue:(0,E.limitedParseDouble)(t.doubleValue)}:(0,E.expectInt32)(t.intValue)!==void 0?{intValue:(0,E.expectInt32)(t.intValue)}:(0,E.expectBoolean)(t.isNull)!==void 0?{isNull:(0,E.expectBoolean)(t.isNull)}:(0,E.limitedParseFloat32)(t.realValue)!==void 0?{realValue:(0,E.limitedParseFloat32)(t.realValue)}:(0,E.expectString)(t.stringValue)!==void 0?{stringValue:(0,E.expectString)(t.stringValue)}:t.structValue!=null?{structValue:IM(t.structValue,e)}:{$unknown:Object.entries(t)[0]},"deserializeAws_restJson1Value"),Tt=n(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),kM=n((t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),"collectBody"),MM=n((t,e)=>kM(t,e).then(r=>e.utf8Encoder(r)),"collectBodyString"),Kn=n((t,e)=>MM(t,e).then(r=>r.length?JSON.parse(r):{}),"parseBody"),so=n(async(t,e)=>{let r=await Kn(t,e);return r.message=r.message??r.Message,r},"parseErrorBody"),oo=n((t,e)=>{let r=n((o,a)=>Object.keys(o).find(c=>c.toLowerCase()===a.toLowerCase()),"findKey"),i=n(o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},"sanitizeErrorCode"),s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return i(t.headers[s]);if(e.code!==void 0)return i(e.code);if(e.__type!==void 0)return i(e.__type)},"loadRestJsonErrorCode")});var ky=u(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.BatchExecuteStatementCommand=void 0;var DM=ne(),FM=ge(),LM=k(),LS=ui(),zS=Yn(),ao=class extends LM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,FM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,DM.getEndpointPlugin)(r,ao.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"BatchExecuteStatementCommand",inputFilterSensitiveLog:LS.BatchExecuteStatementRequestFilterSensitiveLog,outputFilterSensitiveLog:LS.BatchExecuteStatementResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,zS.serializeAws_restJson1BatchExecuteStatementCommand)(e,r)}deserialize(e,r){return(0,zS.deserializeAws_restJson1BatchExecuteStatementCommand)(e,r)}};n(ao,"BatchExecuteStatementCommand");tl.BatchExecuteStatementCommand=ao});var My=u(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.BeginTransactionCommand=void 0;var zM=ne(),WM=ge(),UM=k(),WS=ui(),US=Yn(),co=class extends UM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,WM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,zM.getEndpointPlugin)(r,co.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"BeginTransactionCommand",inputFilterSensitiveLog:WS.BeginTransactionRequestFilterSensitiveLog,outputFilterSensitiveLog:WS.BeginTransactionResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,US.serializeAws_restJson1BeginTransactionCommand)(e,r)}deserialize(e,r){return(0,US.deserializeAws_restJson1BeginTransactionCommand)(e,r)}};n(co,"BeginTransactionCommand");rl.BeginTransactionCommand=co});var Dy=u(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.CommitTransactionCommand=void 0;var jM=ne(),VM=ge(),$M=k(),jS=ui(),VS=Yn(),uo=class extends $M.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,VM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,jM.getEndpointPlugin)(r,uo.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"CommitTransactionCommand",inputFilterSensitiveLog:jS.CommitTransactionRequestFilterSensitiveLog,outputFilterSensitiveLog:jS.CommitTransactionResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,VS.serializeAws_restJson1CommitTransactionCommand)(e,r)}deserialize(e,r){return(0,VS.deserializeAws_restJson1CommitTransactionCommand)(e,r)}};n(uo,"CommitTransactionCommand");il.CommitTransactionCommand=uo});var Fy=u(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.ExecuteSqlCommand=void 0;var HM=ne(),GM=ge(),BM=k(),$S=ui(),HS=Yn(),lo=class extends BM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,GM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,HM.getEndpointPlugin)(r,lo.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"ExecuteSqlCommand",inputFilterSensitiveLog:$S.ExecuteSqlRequestFilterSensitiveLog,outputFilterSensitiveLog:$S.ExecuteSqlResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,HS.serializeAws_restJson1ExecuteSqlCommand)(e,r)}deserialize(e,r){return(0,HS.deserializeAws_restJson1ExecuteSqlCommand)(e,r)}};n(lo,"ExecuteSqlCommand");nl.ExecuteSqlCommand=lo});var Ly=u(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.ExecuteStatementCommand=void 0;var JM=ne(),KM=ge(),YM=k(),GS=ui(),BS=Yn(),po=class extends YM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,KM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,JM.getEndpointPlugin)(r,po.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"ExecuteStatementCommand",inputFilterSensitiveLog:GS.ExecuteStatementRequestFilterSensitiveLog,outputFilterSensitiveLog:GS.ExecuteStatementResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,BS.serializeAws_restJson1ExecuteStatementCommand)(e,r)}deserialize(e,r){return(0,BS.deserializeAws_restJson1ExecuteStatementCommand)(e,r)}};n(po,"ExecuteStatementCommand");sl.ExecuteStatementCommand=po});var zy=u(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});ol.RollbackTransactionCommand=void 0;var QM=ne(),XM=ge(),ZM=k(),JS=ui(),KS=Yn(),fo=class extends ZM.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,XM.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,QM.getEndpointPlugin)(r,fo.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"RDSDataClient",commandName:"RollbackTransactionCommand",inputFilterSensitiveLog:JS.RollbackTransactionRequestFilterSensitiveLog,outputFilterSensitiveLog:JS.RollbackTransactionResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,KS.serializeAws_restJson1RollbackTransactionCommand)(e,r)}deserialize(e,r){return(0,KS.deserializeAws_restJson1RollbackTransactionCommand)(e,r)}};n(fo,"RollbackTransactionCommand");ol.RollbackTransactionCommand=fo});var YS=u(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.booleanSelector=Qn.SelectorType=void 0;var eD;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(eD=Qn.SelectorType||(Qn.SelectorType={}));var tD=n((t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},"booleanSelector");Qn.booleanSelector=tD});var Uy=u(Wy=>{"use strict";Object.defineProperty(Wy,"__esModule",{value:!0});var rD=(A(),b(x));rD.__exportStar(YS(),Wy)});var QS=u(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=Ft.DEFAULT_USE_DUALSTACK_ENDPOINT=Ft.CONFIG_USE_DUALSTACK_ENDPOINT=Ft.ENV_USE_DUALSTACK_ENDPOINT=void 0;var al=Uy();Ft.ENV_USE_DUALSTACK_ENDPOINT="AWS_USE_DUALSTACK_ENDPOINT";Ft.CONFIG_USE_DUALSTACK_ENDPOINT="use_dualstack_endpoint";Ft.DEFAULT_USE_DUALSTACK_ENDPOINT=!1;Ft.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:t=>(0,al.booleanSelector)(t,Ft.ENV_USE_DUALSTACK_ENDPOINT,al.SelectorType.ENV),configFileSelector:t=>(0,al.booleanSelector)(t,Ft.CONFIG_USE_DUALSTACK_ENDPOINT,al.SelectorType.CONFIG),default:!1}});var XS=u(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=Lt.DEFAULT_USE_FIPS_ENDPOINT=Lt.CONFIG_USE_FIPS_ENDPOINT=Lt.ENV_USE_FIPS_ENDPOINT=void 0;var cl=Uy();Lt.ENV_USE_FIPS_ENDPOINT="AWS_USE_FIPS_ENDPOINT";Lt.CONFIG_USE_FIPS_ENDPOINT="use_fips_endpoint";Lt.DEFAULT_USE_FIPS_ENDPOINT=!1;Lt.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:t=>(0,cl.booleanSelector)(t,Lt.ENV_USE_FIPS_ENDPOINT,cl.SelectorType.ENV),configFileSelector:t=>(0,cl.booleanSelector)(t,Lt.CONFIG_USE_FIPS_ENDPOINT,cl.SelectorType.CONFIG),default:!1}});var eN=u(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.resolveCustomEndpointsConfig=void 0;var ZS=Hn(),iD=n(t=>{var e,r;let{endpoint:i,urlParser:s}=t;return{...t,tls:(e=t.tls)!==null&&e!==void 0?e:!0,endpoint:(0,ZS.normalizeProvider)(typeof i=="string"?s(i):i),isCustomEndpoint:!0,useDualstackEndpoint:(0,ZS.normalizeProvider)((r=t.useDualstackEndpoint)!==null&&r!==void 0?r:!1)}},"resolveCustomEndpointsConfig");dl.resolveCustomEndpointsConfig=iD});var tN=u(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.getEndpointFromRegion=void 0;var nD=n(async t=>{var e;let{tls:r=!0}=t,i=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(i))throw new Error("Invalid region in client config");let o=await t.useDualstackEndpoint(),a=await t.useFipsEndpoint(),{hostname:c}=(e=await t.regionInfoProvider(i,{useDualstackEndpoint:o,useFipsEndpoint:a}))!==null&&e!==void 0?e:{};if(!c)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${r?"https:":"http:"}//${c}`)},"getEndpointFromRegion");ul.getEndpointFromRegion=nD});var iN=u(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.resolveEndpointsConfig=void 0;var rN=Hn(),sD=tN(),oD=n(t=>{var e,r;let i=(0,rN.normalizeProvider)((e=t.useDualstackEndpoint)!==null&&e!==void 0?e:!1),{endpoint:s,useFipsEndpoint:o,urlParser:a}=t;return{...t,tls:(r=t.tls)!==null&&r!==void 0?r:!0,endpoint:s?(0,rN.normalizeProvider)(typeof s=="string"?a(s):s):()=>(0,sD.getEndpointFromRegion)({...t,useDualstackEndpoint:i,useFipsEndpoint:o}),isCustomEndpoint:!!s,useDualstackEndpoint:i}},"resolveEndpointsConfig");ll.resolveEndpointsConfig=oD});var nN=u(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});var pl=(A(),b(x));pl.__exportStar(QS(),mo);pl.__exportStar(XS(),mo);pl.__exportStar(eN(),mo);pl.__exportStar(iN(),mo)});var sN=u(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.NODE_REGION_CONFIG_FILE_OPTIONS=zt.NODE_REGION_CONFIG_OPTIONS=zt.REGION_INI_NAME=zt.REGION_ENV_NAME=void 0;zt.REGION_ENV_NAME="AWS_REGION";zt.REGION_INI_NAME="region";zt.NODE_REGION_CONFIG_OPTIONS={environmentVariableSelector:t=>t[zt.REGION_ENV_NAME],configFileSelector:t=>t[zt.REGION_INI_NAME],default:()=>{throw new Error("Region is missing")}};zt.NODE_REGION_CONFIG_FILE_OPTIONS={preferredFile:"credentials"}});var jy=u(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.isFipsRegion=void 0;var aD=n(t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),"isFipsRegion");fl.isFipsRegion=aD});var oN=u(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.getRealRegion=void 0;var cD=jy(),dD=n(t=>(0,cD.isFipsRegion)(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,"getRealRegion");ml.getRealRegion=dD});var cN=u(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.resolveRegionConfig=void 0;var aN=oN(),uD=jy(),lD=n(t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return(0,aN.getRealRegion)(e);let i=await e();return(0,aN.getRealRegion)(i)},useFipsEndpoint:async()=>{let i=typeof e=="string"?e:await e();return(0,uD.isFipsRegion)(i)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},"resolveRegionConfig");hl.resolveRegionConfig=lD});var uN=u(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});var dN=(A(),b(x));dN.__exportStar(sN(),_l);dN.__exportStar(cN(),_l)});var pN=u(lN=>{"use strict";Object.defineProperty(lN,"__esModule",{value:!0})});var mN=u(fN=>{"use strict";Object.defineProperty(fN,"__esModule",{value:!0})});var hN=u(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.getHostnameFromVariants=void 0;var pD=n((t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>{var i;return(i=t.find(({tags:s})=>e===s.includes("fips")&&r===s.includes("dualstack")))===null||i===void 0?void 0:i.hostname},"getHostnameFromVariants");yl.getHostnameFromVariants=pD});var _N=u(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.getResolvedHostname=void 0;var fD=n((t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),"getResolvedHostname");gl.getResolvedHostname=fD});var yN=u(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.getResolvedPartition=void 0;var mD=n((t,{partitionHash:e})=>{var r;return(r=Object.keys(e||{}).find(i=>e[i].regions.includes(t)))!==null&&r!==void 0?r:"aws"},"getResolvedPartition");wl.getResolvedPartition=mD});var gN=u(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.getResolvedSigningRegion=void 0;var hD=n((t,{signingRegion:e,regionRegex:r,useFipsEndpoint:i})=>{if(e)return e;if(i){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=t.match(s);if(o)return o[0].slice(1,-1)}},"getResolvedSigningRegion");El.getResolvedSigningRegion=hD});var EN=u(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.getRegionInfo=void 0;var wN=hN(),_D=_N(),yD=yN(),gD=gN(),wD=n((t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:i,regionHash:s,partitionHash:o})=>{var a,c,l,p,f,m;let h=(0,yD.getResolvedPartition)(t,{partitionHash:o}),_=t in s?t:(c=(a=o[h])===null||a===void 0?void 0:a.endpoint)!==null&&c!==void 0?c:t,w={useFipsEndpoint:e,useDualstackEndpoint:r},g=(0,wN.getHostnameFromVariants)((l=s[_])===null||l===void 0?void 0:l.variants,w),S=(0,wN.getHostnameFromVariants)((p=o[h])===null||p===void 0?void 0:p.variants,w),ie=(0,_D.getResolvedHostname)(_,{regionHostname:g,partitionHostname:S});if(ie===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:_,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let ke=(0,gD.getResolvedSigningRegion)(ie,{signingRegion:(f=s[_])===null||f===void 0?void 0:f.signingRegion,regionRegex:o[h].regionRegex,useFipsEndpoint:e});return{partition:h,signingService:i,hostname:ie,...ke&&{signingRegion:ke},...((m=s[_])===null||m===void 0?void 0:m.signingService)&&{signingService:s[_].signingService}}},"getRegionInfo");vl.getRegionInfo=wD});var vN=u(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});var Vy=(A(),b(x));Vy.__exportStar(pN(),Rc);Vy.__exportStar(mN(),Rc);Vy.__exportStar(EN(),Rc)});var vr=u(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});var $y=(A(),b(x));$y.__exportStar(nN(),Ic);$y.__exportStar(uN(),Ic);$y.__exportStar(vN(),Ic)});var qc=u(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.getContentLengthPlugin=fi.contentLengthMiddlewareOptions=fi.contentLengthMiddleware=void 0;var ED=at(),SN="content-length";function NN(t){return e=>async r=>{let i=r.request;if(ED.HttpRequest.isInstance(i)){let{body:s,headers:o}=i;if(s&&Object.keys(o).map(a=>a.toLowerCase()).indexOf(SN)===-1)try{let a=t(s);i.headers={...i.headers,[SN]:String(a)}}catch{}}return e({...r,request:i})}}n(NN,"contentLengthMiddleware");fi.contentLengthMiddleware=NN;fi.contentLengthMiddlewareOptions={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0};var vD=n(t=>({applyToStack:e=>{e.add(NN(t.bodyLengthChecker),fi.contentLengthMiddlewareOptions)}}),"getContentLengthPlugin");fi.getContentLengthPlugin=vD});var Cc=u(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.getHostHeaderPlugin=Wt.hostHeaderMiddlewareOptions=Wt.hostHeaderMiddleware=Wt.resolveHostHeaderConfig=void 0;var SD=at();function ND(t){return t}n(ND,"resolveHostHeaderConfig");Wt.resolveHostHeaderConfig=ND;var bD=n(t=>e=>async r=>{if(!SD.HttpRequest.isInstance(r.request))return e(r);let{request:i}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!i.headers[":authority"])delete i.headers.host,i.headers[":authority"]="";else if(!i.headers.host){let o=i.hostname;i.port!=null&&(o+=`:${i.port}`),i.headers.host=o}return e(r)},"hostHeaderMiddleware");Wt.hostHeaderMiddleware=bD;Wt.hostHeaderMiddlewareOptions={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0};var xD=n(t=>({applyToStack:e=>{e.add((0,Wt.hostHeaderMiddleware)(t),Wt.hostHeaderMiddlewareOptions)}}),"getHostHeaderPlugin");Wt.getHostHeaderPlugin=xD});var bN=u(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.getLoggerPlugin=Sr.loggerMiddlewareOptions=Sr.loggerMiddleware=void 0;var AD=n(()=>(t,e)=>async r=>{let i=await t(r),{clientName:s,commandName:o,logger:a,inputFilterSensitiveLog:c,outputFilterSensitiveLog:l,dynamoDbDocumentClientOptions:p={}}=e,{overrideInputFilterSensitiveLog:f,overrideOutputFilterSensitiveLog:m}=p;if(!a)return i;if(typeof a.info=="function"){let{$metadata:h,..._}=i.output;a.info({clientName:s,commandName:o,input:(f??c)(r.input),output:(m??l)(_),metadata:h})}return i},"loggerMiddleware");Sr.loggerMiddleware=AD;Sr.loggerMiddlewareOptions={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0};var OD=n(t=>({applyToStack:e=>{e.add((0,Sr.loggerMiddleware)(),Sr.loggerMiddlewareOptions)}}),"getLoggerPlugin");Sr.getLoggerPlugin=OD});var kc=u(Hy=>{"use strict";Object.defineProperty(Hy,"__esModule",{value:!0});var TD=(A(),b(x));TD.__exportStar(bN(),Hy)});var Mc=u(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.getRecursionDetectionPlugin=Nr.addRecursionDetectionMiddlewareOptions=Nr.recursionDetectionMiddleware=void 0;var PD=at(),xN="X-Amzn-Trace-Id",RD="AWS_LAMBDA_FUNCTION_NAME",ID="_X_AMZN_TRACE_ID",qD=n(t=>e=>async r=>{let{request:i}=r;if(!PD.HttpRequest.isInstance(i)||t.runtime!=="node"||i.headers.hasOwnProperty(xN))return e(r);let s=process.env[RD],o=process.env[ID],a=n(c=>typeof c=="string"&&c.length>0,"nonEmptyString");return a(s)&&a(o)&&(i.headers[xN]=o),e({...r,request:i})},"recursionDetectionMiddleware");Nr.recursionDetectionMiddleware=qD;Nr.addRecursionDetectionMiddlewareOptions={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"};var CD=n(t=>({applyToStack:e=>{e.add((0,Nr.recursionDetectionMiddleware)(t),Nr.addRecursionDetectionMiddlewareOptions)}}),"getRecursionDetectionPlugin");Nr.getRecursionDetectionPlugin=CD});var Sl=u(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});mi.DEFAULT_RETRY_MODE=mi.DEFAULT_MAX_ATTEMPTS=mi.RETRY_MODES=void 0;var kD;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(kD=mi.RETRY_MODES||(mi.RETRY_MODES={}));mi.DEFAULT_MAX_ATTEMPTS=3;mi.DEFAULT_RETRY_MODE="STANDARD"});var AN=u(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.NODEJS_TIMEOUT_ERROR_CODES=Ut.TRANSIENT_ERROR_STATUS_CODES=Ut.TRANSIENT_ERROR_CODES=Ut.THROTTLING_ERROR_CODES=Ut.CLOCK_SKEW_ERROR_CODES=void 0;Ut.CLOCK_SKEW_ERROR_CODES=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"];Ut.THROTTLING_ERROR_CODES=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"];Ut.TRANSIENT_ERROR_CODES=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"];Ut.TRANSIENT_ERROR_STATUS_CODES=[500,502,503,504];Ut.NODEJS_TIMEOUT_ERROR_CODES=["ECONNRESET","EPIPE","ETIMEDOUT"]});var Fc=u(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.isServerError=Pt.isTransientError=Pt.isThrottlingError=Pt.isClockSkewError=Pt.isRetryableByTrait=void 0;var Dc=AN(),MD=n(t=>t.$retryable!==void 0,"isRetryableByTrait");Pt.isRetryableByTrait=MD;var DD=n(t=>Dc.CLOCK_SKEW_ERROR_CODES.includes(t.name),"isClockSkewError");Pt.isClockSkewError=DD;var FD=n(t=>{var e,r;return((e=t.$metadata)===null||e===void 0?void 0:e.httpStatusCode)===429||Dc.THROTTLING_ERROR_CODES.includes(t.name)||((r=t.$retryable)===null||r===void 0?void 0:r.throttling)==!0},"isThrottlingError");Pt.isThrottlingError=FD;var LD=n(t=>{var e;return Dc.TRANSIENT_ERROR_CODES.includes(t.name)||Dc.NODEJS_TIMEOUT_ERROR_CODES.includes(t?.code||"")||Dc.TRANSIENT_ERROR_STATUS_CODES.includes(((e=t.$metadata)===null||e===void 0?void 0:e.httpStatusCode)||0)},"isTransientError");Pt.isTransientError=LD;var zD=n(t=>{var e;if(((e=t.$metadata)===null||e===void 0?void 0:e.httpStatusCode)!==void 0){let r=t.$metadata.httpStatusCode;return 500<=r&&r<=599&&!(0,Pt.isTransientError)(t)}return!1},"isServerError");Pt.isServerError=zD});var Gy=u(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.DefaultRateLimiter=void 0;var WD=Fc(),Nl=class{constructor(e){var r,i,s,o,a;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(r=e?.beta)!==null&&r!==void 0?r:.7,this.minCapacity=(i=e?.minCapacity)!==null&&i!==void 0?i:1,this.minFillRate=(s=e?.minFillRate)!==null&&s!==void 0?s:.5,this.scaleConstant=(o=e?.scaleConstant)!==null&&o!==void 0?o:.4,this.smooth=(a=e?.smooth)!==null&&a!==void 0?a:.8;let c=this.getCurrentTimeInSeconds();this.lastThrottleTime=c,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(i=>setTimeout(i,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),(0,WD.isThrottlingError)(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let i=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(i)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let i=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(i*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}};n(Nl,"DefaultRateLimiter");bl.DefaultRateLimiter=Nl});var Lc=u(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.REQUEST_HEADER=Te.INVOCATION_ID_HEADER=Te.NO_RETRY_INCREMENT=Te.TIMEOUT_RETRY_COST=Te.RETRY_COST=Te.INITIAL_RETRY_TOKENS=Te.THROTTLING_RETRY_DELAY_BASE=Te.MAXIMUM_RETRY_DELAY=Te.DEFAULT_RETRY_DELAY_BASE=void 0;Te.DEFAULT_RETRY_DELAY_BASE=100;Te.MAXIMUM_RETRY_DELAY=20*1e3;Te.THROTTLING_RETRY_DELAY_BASE=500;Te.INITIAL_RETRY_TOKENS=500;Te.RETRY_COST=5;Te.TIMEOUT_RETRY_COST=10;Te.NO_RETRY_INCREMENT=1;Te.INVOCATION_ID_HEADER="amz-sdk-invocation-id";Te.REQUEST_HEADER="amz-sdk-request"});var TN=u(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.getDefaultRetryBackoffStrategy=void 0;var ON=Lc(),UD=n(()=>{let t=ON.DEFAULT_RETRY_DELAY_BASE;return{computeNextBackoffDelay:n(i=>Math.floor(Math.min(ON.MAXIMUM_RETRY_DELAY,Math.random()*2**i*t)),"computeNextBackoffDelay"),setDelayBase:n(i=>{t=i},"setDelayBase")}},"getDefaultRetryBackoffStrategy");xl.getDefaultRetryBackoffStrategy=UD});var PN=u(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.getDefaultRetryToken=void 0;var ho=Lc(),jD=TN(),VD=n((t,e,r,i)=>{var s,o,a;let c=t,l=(s=i?.retryCost)!==null&&s!==void 0?s:ho.RETRY_COST,p=(o=i?.timeoutRetryCost)!==null&&o!==void 0?o:ho.TIMEOUT_RETRY_COST,f=(a=i?.retryBackoffStrategy)!==null&&a!==void 0?a:(0,jD.getDefaultRetryBackoffStrategy)(),m=t,h=Math.min(ho.MAXIMUM_RETRY_DELAY,e),_,w=r??0,g=n(Zt=>Zt==="TRANSIENT"?p:l,"getCapacityAmount"),S=n(()=>w,"getRetryCount"),ie=n(()=>h,"getRetryDelay"),ke=n(()=>_,"getLastRetryCost"),be=n(Zt=>g(Zt)<=m,"hasRetryTokens");return{getRetryCount:S,getRetryDelay:ie,getLastRetryCost:ke,hasRetryTokens:be,getRetryTokenCount:n(Zt=>{let F_=Zt.errorType;if(!be(F_))throw new Error("No retry token available");let L_=g(F_),sq=F_==="THROTTLING"?ho.THROTTLING_RETRY_DELAY_BASE:ho.DEFAULT_RETRY_DELAY_BASE;f.setDelayBase(sq);let HE=f.computeNextBackoffDelay(w);if(Zt.retryAfterHint){let oq=Zt.retryAfterHint.getTime()-Date.now();h=Math.max(oq||0,HE)}else h=HE;return w++,_=L_,m-=L_,L_},"getRetryTokenCount"),releaseRetryTokens:n(Zt=>{m+=Zt??ho.NO_RETRY_INCREMENT,m=Math.min(m,c)},"releaseRetryTokens")}},"getDefaultRetryToken");Al.getDefaultRetryToken=VD});var Jy=u(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.StandardRetryStrategy=void 0;var By=Sl(),RN=Lc(),$D=PN(),Ol=class{constructor(e){this.maxAttemptsProvider=e,this.mode=By.RETRY_MODES.STANDARD,this.retryToken=(0,$D.getDefaultRetryToken)(RN.INITIAL_RETRY_TOKENS,RN.DEFAULT_RETRY_DELAY_BASE),this.maxAttemptsProvider=e}async acquireInitialRetryToken(e){return this.retryToken}async refreshRetryTokenForRetry(e,r){let i=await this.getMaxAttempts();if(this.shouldRetry(e,r,i))return e.getRetryTokenCount(r),e;throw new Error("No retry token available")}recordSuccess(e){this.retryToken.releaseRetryTokens(e.getLastRetryCost())}async getMaxAttempts(){let e;try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${By.DEFAULT_MAX_ATTEMPTS}`),By.DEFAULT_MAX_ATTEMPTS}}shouldRetry(e,r,i){return e.getRetryCount()<i&&e.hasRetryTokens(r.errorType)&&this.isRetryableError(r.errorType)}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}};n(Ol,"StandardRetryStrategy");Tl.StandardRetryStrategy=Ol});var IN=u(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.AdaptiveRetryStrategy=void 0;var HD=Sl(),GD=Gy(),BD=Jy(),Pl=class{constructor(e,r){this.maxAttemptsProvider=e,this.mode=HD.RETRY_MODES.ADAPTIVE;let{rateLimiter:i}=r??{};this.rateLimiter=i??new GD.DefaultRateLimiter,this.standardRetryStrategy=new BD.StandardRetryStrategy(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}};n(Pl,"AdaptiveRetryStrategy");Rl.AdaptiveRetryStrategy=Pl});var CN=u(qN=>{"use strict";Object.defineProperty(qN,"__esModule",{value:!0})});var jt=u(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});var _o=(A(),b(x));_o.__exportStar(IN(),Ji);_o.__exportStar(Gy(),Ji);_o.__exportStar(Jy(),Ji);_o.__exportStar(Sl(),Ji);_o.__exportStar(Lc(),Ji);_o.__exportStar(CN(),Ji)});import JD from"crypto";function zc(){return Il>ql.length-16&&(JD.randomFillSync(ql),Il=0),ql.slice(Il,Il+=16)}var ql,Il,Ky=Be(()=>{ql=new Uint8Array(256),Il=ql.length;n(zc,"rng")});var kN,MN=Be(()=>{kN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function KD(t){return typeof t=="string"&&kN.test(t)}var Ki,Wc=Be(()=>{MN();n(KD,"validate");Ki=KD});function YD(t,e=0){let r=(Ve[t[e+0]]+Ve[t[e+1]]+Ve[t[e+2]]+Ve[t[e+3]]+"-"+Ve[t[e+4]]+Ve[t[e+5]]+"-"+Ve[t[e+6]]+Ve[t[e+7]]+"-"+Ve[t[e+8]]+Ve[t[e+9]]+"-"+Ve[t[e+10]]+Ve[t[e+11]]+Ve[t[e+12]]+Ve[t[e+13]]+Ve[t[e+14]]+Ve[t[e+15]]).toLowerCase();if(!Ki(r))throw TypeError("Stringified UUID is invalid");return r}var Ve,Yi,Uc=Be(()=>{Wc();Ve=[];for(let t=0;t<256;++t)Ve.push((t+256).toString(16).substr(1));n(YD,"stringify");Yi=YD});function QD(t,e,r){let i=e&&r||0,s=e||new Array(16);t=t||{};let o=t.node||DN,a=t.clockseq!==void 0?t.clockseq:Yy;if(o==null||a==null){let h=t.random||(t.rng||zc)();o==null&&(o=DN=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),a==null&&(a=Yy=(h[6]<<8|h[7])&16383)}let c=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:Xy+1,p=c-Qy+(l-Xy)/1e4;if(p<0&&t.clockseq===void 0&&(a=a+1&16383),(p<0||c>Qy)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Qy=c,Xy=l,Yy=a,c+=122192928e5;let f=((c&268435455)*1e4+l)%4294967296;s[i++]=f>>>24&255,s[i++]=f>>>16&255,s[i++]=f>>>8&255,s[i++]=f&255;let m=c/4294967296*1e4&268435455;s[i++]=m>>>8&255,s[i++]=m&255,s[i++]=m>>>24&15|16,s[i++]=m>>>16&255,s[i++]=a>>>8|128,s[i++]=a&255;for(let h=0;h<6;++h)s[i+h]=o[h];return e||Yi(s)}var DN,Yy,Qy,Xy,FN,LN=Be(()=>{Ky();Uc();Qy=0,Xy=0;n(QD,"v1");FN=QD});function XD(t){if(!Ki(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Cl,Zy=Be(()=>{Wc();n(XD,"parse");Cl=XD});function ZD(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function jc(t,e,r){function i(s,o,a,c){if(typeof s=="string"&&(s=ZD(s)),typeof o=="string"&&(o=Cl(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+s.length);if(l.set(o),l.set(s,o.length),l=r(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,a){c=c||0;for(let p=0;p<16;++p)a[c+p]=l[p];return a}return Yi(l)}n(i,"generateUUID");try{i.name=t}catch{}return i.DNS=eF,i.URL=tF,i}var eF,tF,eg=Be(()=>{Uc();Zy();n(ZD,"stringToBytes");eF="6ba7b810-9dad-11d1-80b4-00c04fd430c8",tF="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n(jc,"default")});import rF from"crypto";function iF(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),rF.createHash("md5").update(t).digest()}var zN,WN=Be(()=>{n(iF,"md5");zN=iF});var nF,UN,jN=Be(()=>{eg();WN();nF=jc("v3",48,zN),UN=nF});function sF(t,e,r){t=t||{};let i=t.random||(t.rng||zc)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){r=r||0;for(let s=0;s<16;++s)e[r+s]=i[s];return e}return Yi(i)}var VN,$N=Be(()=>{Ky();Uc();n(sF,"v4");VN=sF});import oF from"crypto";function aF(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),oF.createHash("sha1").update(t).digest()}var HN,GN=Be(()=>{n(aF,"sha1");HN=aF});var cF,BN,JN=Be(()=>{eg();GN();cF=jc("v5",80,HN),BN=cF});var KN,YN=Be(()=>{KN="00000000-0000-0000-0000-000000000000"});function dF(t){if(!Ki(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var QN,XN=Be(()=>{Wc();n(dF,"version");QN=dF});var tg={};GE(tg,{NIL:()=>KN,parse:()=>Cl,stringify:()=>Yi,v1:()=>FN,v3:()=>UN,v4:()=>VN,v5:()=>BN,validate:()=>Ki,version:()=>QN});var rg=Be(()=>{LN();jN();$N();JN();YN();XN();Wc();Uc();Zy()});var ZN=u(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.getDefaultRetryQuota=void 0;var ig=jt(),uF=n((t,e)=>{var r,i,s;let o=t,a=(r=e?.noRetryIncrement)!==null&&r!==void 0?r:ig.NO_RETRY_INCREMENT,c=(i=e?.retryCost)!==null&&i!==void 0?i:ig.RETRY_COST,l=(s=e?.timeoutRetryCost)!==null&&s!==void 0?s:ig.TIMEOUT_RETRY_COST,p=t,f=n(w=>w.name==="TimeoutError"?l:c,"getCapacityAmount"),m=n(w=>f(w)<=p,"hasRetryTokens");return Object.freeze({hasRetryTokens:m,retrieveRetryTokens:n(w=>{if(!m(w))throw new Error("No retry token available");let g=f(w);return p-=g,g},"retrieveRetryTokens"),releaseRetryTokens:n(w=>{p+=w??a,p=Math.min(p,o)},"releaseRetryTokens")})},"getDefaultRetryQuota");kl.getDefaultRetryQuota=uF});var ng=u(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.defaultDelayDecider=void 0;var lF=jt(),pF=n((t,e)=>Math.floor(Math.min(lF.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),"defaultDelayDecider");Ml.defaultDelayDecider=pF});var sg=u(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.defaultRetryDecider=void 0;var Dl=Fc(),fF=n(t=>t?(0,Dl.isRetryableByTrait)(t)||(0,Dl.isClockSkewError)(t)||(0,Dl.isThrottlingError)(t)||(0,Dl.isTransientError)(t):!1,"defaultRetryDecider");Fl.defaultRetryDecider=fF});var og=u(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.asSdkError=void 0;var mF=n(t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),"asSdkError");Ll.asSdkError=mF});var cg=u(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.StandardRetryStrategy=void 0;var ag=at(),hF=Fc(),Xn=jt(),_F=(rg(),b(tg)),yF=ZN(),gF=ng(),wF=sg(),EF=og(),zl=class{constructor(e,r){var i,s,o;this.maxAttemptsProvider=e,this.mode=Xn.RETRY_MODES.STANDARD,this.retryDecider=(i=r?.retryDecider)!==null&&i!==void 0?i:wF.defaultRetryDecider,this.delayDecider=(s=r?.delayDecider)!==null&&s!==void 0?s:gF.defaultDelayDecider,this.retryQuota=(o=r?.retryQuota)!==null&&o!==void 0?o:(0,yF.getDefaultRetryQuota)(Xn.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,i){return r<i&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=Xn.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,i){let s,o=0,a=0,c=await this.getMaxAttempts(),{request:l}=r;for(ag.HttpRequest.isInstance(l)&&(l.headers[Xn.INVOCATION_ID_HEADER]=(0,_F.v4)());;)try{ag.HttpRequest.isInstance(l)&&(l.headers[Xn.REQUEST_HEADER]=`attempt=${o+1}; max=${c}`),i?.beforeRequest&&await i.beforeRequest();let{response:p,output:f}=await e(r);return i?.afterRequest&&i.afterRequest(p),this.retryQuota.releaseRetryTokens(s),f.$metadata.attempts=o+1,f.$metadata.totalRetryDelay=a,{response:p,output:f}}catch(p){let f=(0,EF.asSdkError)(p);if(o++,this.shouldRetry(f,o,c)){s=this.retryQuota.retrieveRetryTokens(f);let m=this.delayDecider((0,hF.isThrottlingError)(f)?Xn.THROTTLING_RETRY_DELAY_BASE:Xn.DEFAULT_RETRY_DELAY_BASE,o),h=vF(f.$response),_=Math.max(h||0,m);a+=_,await new Promise(w=>setTimeout(w,_));continue}throw f.$metadata||(f.$metadata={}),f.$metadata.attempts=o,f.$metadata.totalRetryDelay=a,f}}};n(zl,"StandardRetryStrategy");Wl.StandardRetryStrategy=zl;var vF=n(t=>{if(!ag.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],i=Number(r);return Number.isNaN(i)?new Date(r).getTime()-Date.now():i*1e3},"getDelayFromRetryAfterHeader")});var tb=u(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.AdaptiveRetryStrategy=void 0;var eb=jt(),SF=cg(),Ul=class extends SF.StandardRetryStrategy{constructor(e,r){let{rateLimiter:i,...s}=r??{};super(e,s),this.rateLimiter=i??new eb.DefaultRateLimiter,this.mode=eb.RETRY_MODES.ADAPTIVE}async retry(e,r){return super.retry(e,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:i=>{this.rateLimiter.updateClientSendingRate(i)}})}};n(Ul,"AdaptiveRetryStrategy");jl.AdaptiveRetryStrategy=Ul});var ib=u(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.NODE_RETRY_MODE_CONFIG_OPTIONS=ve.CONFIG_RETRY_MODE=ve.ENV_RETRY_MODE=ve.resolveRetryConfig=ve.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=ve.CONFIG_MAX_ATTEMPTS=ve.ENV_MAX_ATTEMPTS=void 0;var rb=Hn(),yo=jt();ve.ENV_MAX_ATTEMPTS="AWS_MAX_ATTEMPTS";ve.CONFIG_MAX_ATTEMPTS="max_attempts";ve.NODE_MAX_ATTEMPT_CONFIG_OPTIONS={environmentVariableSelector:t=>{let e=t[ve.ENV_MAX_ATTEMPTS];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${ve.ENV_MAX_ATTEMPTS} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[ve.CONFIG_MAX_ATTEMPTS];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${ve.CONFIG_MAX_ATTEMPTS} mast be a number, got "${e}"`);return r},default:yo.DEFAULT_MAX_ATTEMPTS};var NF=n(t=>{var e;let{retryStrategy:r}=t,i=(0,rb.normalizeProvider)((e=t.maxAttempts)!==null&&e!==void 0?e:yo.DEFAULT_MAX_ATTEMPTS);return{...t,maxAttempts:i,retryStrategy:async()=>r||(await(0,rb.normalizeProvider)(t.retryMode)()===yo.RETRY_MODES.ADAPTIVE?new yo.AdaptiveRetryStrategy(i):new yo.StandardRetryStrategy(i))}},"resolveRetryConfig");ve.resolveRetryConfig=NF;ve.ENV_RETRY_MODE="AWS_RETRY_MODE";ve.CONFIG_RETRY_MODE="retry_mode";ve.NODE_RETRY_MODE_CONFIG_OPTIONS={environmentVariableSelector:t=>t[ve.ENV_RETRY_MODE],configFileSelector:t=>t[ve.CONFIG_RETRY_MODE],default:yo.DEFAULT_RETRY_MODE}});var sb=u(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.getOmitRetryHeadersPlugin=br.omitRetryHeadersMiddlewareOptions=br.omitRetryHeadersMiddleware=void 0;var bF=at(),nb=jt(),xF=n(()=>t=>async e=>{let{request:r}=e;return bF.HttpRequest.isInstance(r)&&(delete r.headers[nb.INVOCATION_ID_HEADER],delete r.headers[nb.REQUEST_HEADER]),t(e)},"omitRetryHeadersMiddleware");br.omitRetryHeadersMiddleware=xF;br.omitRetryHeadersMiddlewareOptions={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0};var AF=n(t=>({applyToStack:e=>{e.addRelativeTo((0,br.omitRetryHeadersMiddleware)(),br.omitRetryHeadersMiddlewareOptions)}}),"getOmitRetryHeadersPlugin");br.getOmitRetryHeadersPlugin=AF});var ab=u(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.getRetryAfterHint=Rt.getRetryPlugin=Rt.retryMiddlewareOptions=Rt.retryMiddleware=void 0;var ug=at(),dg=Fc(),ob=jt(),OF=(rg(),b(tg)),TF=og(),PF=n(t=>(e,r)=>async i=>{let s=await t.retryStrategy(),o=await t.maxAttempts();if(RF(s)){s=s;let a=await s.acquireInitialRetryToken(r.partition_id),c=new Error,l=0,p=0,{request:f}=i;for(ug.HttpRequest.isInstance(f)&&(f.headers[ob.INVOCATION_ID_HEADER]=(0,OF.v4)());;)try{ug.HttpRequest.isInstance(f)&&(f.headers[ob.REQUEST_HEADER]=`attempt=${l+1}; max=${o}`);let{response:m,output:h}=await e(i);return s.recordSuccess(a),h.$metadata.attempts=l+1,h.$metadata.totalRetryDelay=p,{response:m,output:h}}catch(m){let h=IF(m);c=(0,TF.asSdkError)(m);try{a=await s.refreshRetryTokenForRetry(a,h)}catch{throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=l+1,c.$metadata.totalRetryDelay=p,c}l=a.getRetryCount();let _=a.getRetryDelay();p+=_,await new Promise(w=>setTimeout(w,_))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,i)},"retryMiddleware");Rt.retryMiddleware=PF;var RF=n(t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u","isRetryStrategyV2"),IF=n(t=>{let e={errorType:qF(t)},r=(0,Rt.getRetryAfterHint)(t.$response);return r&&(e.retryAfterHint=r),e},"getRetyErrorInto"),qF=n(t=>(0,dg.isThrottlingError)(t)?"THROTTLING":(0,dg.isTransientError)(t)?"TRANSIENT":(0,dg.isServerError)(t)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType");Rt.retryMiddlewareOptions={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0};var CF=n(t=>({applyToStack:e=>{e.add((0,Rt.retryMiddleware)(t),Rt.retryMiddlewareOptions)}}),"getRetryPlugin");Rt.getRetryPlugin=CF;var kF=n(t=>{if(!ug.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],i=Number(r);return Number.isNaN(i)?new Date(r):new Date(i*1e3)},"getRetryAfterHint");Rt.getRetryAfterHint=kF});var _i=u(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});var Zn=(A(),b(x));Zn.__exportStar(tb(),hi);Zn.__exportStar(cg(),hi);Zn.__exportStar(ib(),hi);Zn.__exportStar(ng(),hi);Zn.__exportStar(sb(),hi);Zn.__exportStar(sg(),hi);Zn.__exportStar(ab(),hi)});var Vc=u(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.ProviderError=void 0;var go=class extends Error{constructor(e,r=!0){super(e),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,go.prototype)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}};n(go,"ProviderError");Vl.ProviderError=go});var cb=u($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.CredentialsProviderError=void 0;var MF=Vc(),wo=class extends MF.ProviderError{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,wo.prototype)}};n(wo,"CredentialsProviderError");$l.CredentialsProviderError=wo});var db=u(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.TokenProviderError=void 0;var DF=Vc(),Eo=class extends DF.ProviderError{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,Eo.prototype)}};n(Eo,"TokenProviderError");Hl.TokenProviderError=Eo});var ub=u(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.chain=void 0;var FF=Vc();function LF(...t){return()=>{let e=Promise.reject(new FF.ProviderError("No providers in chain"));for(let r of t)e=e.catch(i=>{if(i?.tryNextLink)return r();throw i});return e}}n(LF,"chain");Gl.chain=LF});var lb=u(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.fromStatic=void 0;var zF=n(t=>()=>Promise.resolve(t),"fromStatic");Bl.fromStatic=zF});var pb=u(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});Jl.memoize=void 0;var WF=n((t,e,r)=>{let i,s,o,a=!1,c=n(async()=>{s||(s=t());try{i=await s,o=!0,a=!1}finally{s=void 0}return i},"coalesceProvider");return e===void 0?async l=>((!o||l?.forceRefresh)&&(i=await c()),i):async l=>((!o||l?.forceRefresh)&&(i=await c()),a?i:r&&!r(i)?(a=!0,i):(e(i)&&await c(),i))},"memoize");Jl.memoize=WF});var ee=u(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});var vo=(A(),b(x));vo.__exportStar(cb(),Qi);vo.__exportStar(Vc(),Qi);vo.__exportStar(db(),Qi);vo.__exportStar(ub(),Qi);vo.__exportStar(lb(),Qi);vo.__exportStar(pb(),Qi)});var Kl=u(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.toHex=So.fromHex=void 0;var fb={},lg={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),fb[t]=e,lg[e]=t}function UF(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let i=t.slice(r,r+2).toLowerCase();if(i in lg)e[r/2]=lg[i];else throw new Error(`Cannot decode unrecognized sequence ${i} as hexadecimal`)}return e}n(UF,"fromHex");So.fromHex=UF;function jF(t){let e="";for(let r=0;r<t.byteLength;r++)e+=fb[t[r]];return e}n(jF,"toHex");So.toHex=jF});var pg=u(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.isArrayBuffer=void 0;var VF=n(t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]","isArrayBuffer");Yl.isArrayBuffer=VF});var bo=u(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.fromString=No.fromArrayBuffer=void 0;var $F=pg(),fg=W("buffer"),HF=n((t,e=0,r=t.byteLength-e)=>{if(!(0,$F.isArrayBuffer)(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return fg.Buffer.from(t,e,r)},"fromArrayBuffer");No.fromArrayBuffer=HF;var GF=n((t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?fg.Buffer.from(t,e):fg.Buffer.from(t)},"fromString");No.fromString=GF});var mg=u(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.fromUtf8=void 0;var BF=bo(),JF=n(t=>{let e=(0,BF.fromString)(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8");Ql.fromUtf8=JF});var mb=u(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.toUint8Array=void 0;var KF=mg(),YF=n(t=>typeof t=="string"?(0,KF.fromUtf8)(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),"toUint8Array");Xl.toUint8Array=YF});var hb=u(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.toUtf8=void 0;var QF=bo(),XF=n(t=>(0,QF.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("utf8"),"toUtf8");Zl.toUtf8=XF});var yi=u($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});var hg=(A(),b(x));hg.__exportStar(mg(),$c);hg.__exportStar(mb(),$c);hg.__exportStar(hb(),$c)});var es=u(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.MAX_PRESIGNED_TTL=T.KEY_TYPE_IDENTIFIER=T.MAX_CACHE_SIZE=T.UNSIGNED_PAYLOAD=T.EVENT_ALGORITHM_IDENTIFIER=T.ALGORITHM_IDENTIFIER_V4A=T.ALGORITHM_IDENTIFIER=T.UNSIGNABLE_PATTERNS=T.SEC_HEADER_PATTERN=T.PROXY_HEADER_PATTERN=T.ALWAYS_UNSIGNABLE_HEADERS=T.HOST_HEADER=T.TOKEN_HEADER=T.SHA256_HEADER=T.SIGNATURE_HEADER=T.GENERATED_HEADERS=T.DATE_HEADER=T.AMZ_DATE_HEADER=T.AUTH_HEADER=T.REGION_SET_PARAM=T.TOKEN_QUERY_PARAM=T.SIGNATURE_QUERY_PARAM=T.EXPIRES_QUERY_PARAM=T.SIGNED_HEADERS_QUERY_PARAM=T.AMZ_DATE_QUERY_PARAM=T.CREDENTIAL_QUERY_PARAM=T.ALGORITHM_QUERY_PARAM=void 0;T.ALGORITHM_QUERY_PARAM="X-Amz-Algorithm";T.CREDENTIAL_QUERY_PARAM="X-Amz-Credential";T.AMZ_DATE_QUERY_PARAM="X-Amz-Date";T.SIGNED_HEADERS_QUERY_PARAM="X-Amz-SignedHeaders";T.EXPIRES_QUERY_PARAM="X-Amz-Expires";T.SIGNATURE_QUERY_PARAM="X-Amz-Signature";T.TOKEN_QUERY_PARAM="X-Amz-Security-Token";T.REGION_SET_PARAM="X-Amz-Region-Set";T.AUTH_HEADER="authorization";T.AMZ_DATE_HEADER=T.AMZ_DATE_QUERY_PARAM.toLowerCase();T.DATE_HEADER="date";T.GENERATED_HEADERS=[T.AUTH_HEADER,T.AMZ_DATE_HEADER,T.DATE_HEADER];T.SIGNATURE_HEADER=T.SIGNATURE_QUERY_PARAM.toLowerCase();T.SHA256_HEADER="x-amz-content-sha256";T.TOKEN_HEADER=T.TOKEN_QUERY_PARAM.toLowerCase();T.HOST_HEADER="host";T.ALWAYS_UNSIGNABLE_HEADERS={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0};T.PROXY_HEADER_PATTERN=/^proxy-/;T.SEC_HEADER_PATTERN=/^sec-/;T.UNSIGNABLE_PATTERNS=[/^proxy-/i,/^sec-/i];T.ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256";T.ALGORITHM_IDENTIFIER_V4A="AWS4-ECDSA-P256-SHA256";T.EVENT_ALGORITHM_IDENTIFIER="AWS4-HMAC-SHA256-PAYLOAD";T.UNSIGNED_PAYLOAD="UNSIGNED-PAYLOAD";T.MAX_CACHE_SIZE=50;T.KEY_TYPE_IDENTIFIER="aws4_request";T.MAX_PRESIGNED_TTL=60*60*24*7});var yg=u(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.clearCredentialCache=Xi.getSigningKey=Xi.createScope=void 0;var ZF=Kl(),eL=yi(),_g=es(),xo={},ep=[],tL=n((t,e,r)=>`${t}/${e}/${r}/${_g.KEY_TYPE_IDENTIFIER}`,"createScope");Xi.createScope=tL;var rL=n(async(t,e,r,i,s)=>{let o=await _b(t,e.secretAccessKey,e.accessKeyId),a=`${r}:${i}:${s}:${(0,ZF.toHex)(o)}:${e.sessionToken}`;if(a in xo)return xo[a];for(ep.push(a);ep.length>_g.MAX_CACHE_SIZE;)delete xo[ep.shift()];let c=`AWS4${e.secretAccessKey}`;for(let l of[r,i,s,_g.KEY_TYPE_IDENTIFIER])c=await _b(t,c,l);return xo[a]=c},"getSigningKey");Xi.getSigningKey=rL;var iL=n(()=>{ep.length=0,Object.keys(xo).forEach(t=>{delete xo[t]})},"clearCredentialCache");Xi.clearCredentialCache=iL;var _b=n((t,e,r)=>{let i=new t(e);return i.update((0,eL.toUint8Array)(r)),i.digest()},"hmac")});var wg=u(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.getCanonicalHeaders=void 0;var gg=es(),nL=n(({headers:t},e,r)=>{let i={};for(let s of Object.keys(t).sort()){if(t[s]==null)continue;let o=s.toLowerCase();(o in gg.ALWAYS_UNSIGNABLE_HEADERS||e?.has(o)||gg.PROXY_HEADER_PATTERN.test(o)||gg.SEC_HEADER_PATTERN.test(o))&&(!r||r&&!r.has(o))||(i[o]=t[s].trim().replace(/\s+/g," "))}return i},"getCanonicalHeaders");tp.getCanonicalHeaders=nL});var Eg=u(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.escapeUri=void 0;var sL=n(t=>encodeURIComponent(t).replace(/[!'()*]/g,oL),"escapeUri");rp.escapeUri=sL;var oL=n(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode")});var yb=u(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});ip.escapeUriPath=void 0;var aL=Eg(),cL=n(t=>t.split("/").map(aL.escapeUri).join("/"),"escapeUriPath");ip.escapeUriPath=cL});var vg=u(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});var gb=(A(),b(x));gb.__exportStar(Eg(),np);gb.__exportStar(yb(),np)});var Sg=u(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.getCanonicalQuery=void 0;var sp=vg(),dL=es(),uL=n(({query:t={}})=>{let e=[],r={};for(let i of Object.keys(t).sort()){if(i.toLowerCase()===dL.SIGNATURE_HEADER)continue;e.push(i);let s=t[i];typeof s=="string"?r[i]=`${(0,sp.escapeUri)(i)}=${(0,sp.escapeUri)(s)}`:Array.isArray(s)&&(r[i]=s.slice(0).sort().reduce((o,a)=>o.concat([`${(0,sp.escapeUri)(i)}=${(0,sp.escapeUri)(a)}`]),[]).join("&"))}return e.map(i=>r[i]).filter(i=>i).join("&")},"getCanonicalQuery");op.getCanonicalQuery=uL});var Ng=u(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.getPayloadHash=void 0;var lL=pg(),pL=Kl(),fL=yi(),wb=es(),mL=n(async({headers:t,body:e},r)=>{for(let i of Object.keys(t))if(i.toLowerCase()===wb.SHA256_HEADER)return t[i];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||(0,lL.isArrayBuffer)(e)){let i=new r;return i.update((0,fL.toUint8Array)(e)),(0,pL.toHex)(await i.digest())}return wb.UNSIGNED_PAYLOAD},"getPayloadHash");ap.getPayloadHash=mL});var Eb=u(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.deleteHeader=Zi.getHeaderValue=Zi.hasHeader=void 0;var hL=n((t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},"hasHeader");Zi.hasHeader=hL;var _L=n((t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return e[r]},"getHeaderValue");Zi.getHeaderValue=_L;var yL=n((t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))t===r.toLowerCase()&&delete e[r]},"deleteHeader");Zi.deleteHeader=yL});var bg=u(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.cloneQuery=ts.cloneRequest=void 0;var gL=n(({headers:t,query:e,...r})=>({...r,headers:{...t},query:e?(0,ts.cloneQuery)(e):void 0}),"cloneRequest");ts.cloneRequest=gL;var wL=n(t=>Object.keys(t).reduce((e,r)=>{let i=t[r];return{...e,[r]:Array.isArray(i)?[...i]:i}},{}),"cloneQuery");ts.cloneQuery=wL});var xg=u(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.moveHeadersToQuery=void 0;var EL=bg(),vL=n((t,e={})=>{var r;let{headers:i,query:s={}}=typeof t.clone=="function"?t.clone():(0,EL.cloneRequest)(t);for(let o of Object.keys(i)){let a=o.toLowerCase();a.slice(0,6)==="x-amz-"&&!(!((r=e.unhoistableHeaders)===null||r===void 0)&&r.has(a))&&(s[o]=i[o],delete i[o])}return{...t,headers:i,query:s}},"moveHeadersToQuery");cp.moveHeadersToQuery=vL});var Ag=u(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});dp.prepareRequest=void 0;var SL=bg(),NL=es(),bL=n(t=>{t=typeof t.clone=="function"?t.clone():(0,SL.cloneRequest)(t);for(let e of Object.keys(t.headers))NL.GENERATED_HEADERS.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},"prepareRequest");dp.prepareRequest=bL});var vb=u(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.toDate=rs.iso8601=void 0;var xL=n(t=>(0,rs.toDate)(t).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601");rs.iso8601=xL;var AL=n(t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,"toDate");rs.toDate=AL});var Ab=u(mp=>{"use strict";Object.defineProperty(mp,"__esModule",{value:!0});mp.SignatureV4=void 0;var up=Kl(),Sb=Hn(),Og=yi(),$e=es(),lp=yg(),Nb=wg(),OL=Sg(),Tg=Ng(),TL=Eb(),PL=xg(),bb=Ag(),RL=vb(),fp=class{constructor({applyChecksum:e,credentials:r,region:i,service:s,sha256:o,uriEscapePath:a=!0}){this.service=s,this.sha256=o,this.uriEscapePath=a,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=(0,Sb.normalizeProvider)(i),this.credentialProvider=(0,Sb.normalizeProvider)(r)}async presign(e,r={}){let{signingDate:i=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:c,signingRegion:l,signingService:p}=r,f=await this.credentialProvider();this.validateResolvedCredentials(f);let m=l??await this.regionProvider(),{longDate:h,shortDate:_}=pp(i);if(s>$e.MAX_PRESIGNED_TTL)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let w=(0,lp.createScope)(_,m,p??this.service),g=(0,PL.moveHeadersToQuery)((0,bb.prepareRequest)(e),{unhoistableHeaders:a});f.sessionToken&&(g.query[$e.TOKEN_QUERY_PARAM]=f.sessionToken),g.query[$e.ALGORITHM_QUERY_PARAM]=$e.ALGORITHM_IDENTIFIER,g.query[$e.CREDENTIAL_QUERY_PARAM]=`${f.accessKeyId}/${w}`,g.query[$e.AMZ_DATE_QUERY_PARAM]=h,g.query[$e.EXPIRES_QUERY_PARAM]=s.toString(10);let S=(0,Nb.getCanonicalHeaders)(g,o,c);return g.query[$e.SIGNED_HEADERS_QUERY_PARAM]=xb(S),g.query[$e.SIGNATURE_QUERY_PARAM]=await this.getSignature(h,w,this.getSigningKey(f,m,_,p),this.createCanonicalRequest(g,S,await(0,Tg.getPayloadHash)(e,this.sha256))),g}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:i=new Date,priorSignature:s,signingRegion:o,signingService:a}){let c=o??await this.regionProvider(),{shortDate:l,longDate:p}=pp(i),f=(0,lp.createScope)(l,c,a??this.service),m=await(0,Tg.getPayloadHash)({headers:{},body:r},this.sha256),h=new this.sha256;h.update(e);let _=(0,up.toHex)(await h.digest()),w=[$e.EVENT_ALGORITHM_IDENTIFIER,p,f,s,_,m].join(`
`);return this.signString(w,{signingDate:i,signingRegion:c,signingService:a})}async signString(e,{signingDate:r=new Date,signingRegion:i,signingService:s}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let a=i??await this.regionProvider(),{shortDate:c}=pp(r),l=new this.sha256(await this.getSigningKey(o,a,c,s));return l.update((0,Og.toUint8Array)(e)),(0,up.toHex)(await l.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:i,unsignableHeaders:s,signingRegion:o,signingService:a}={}){let c=await this.credentialProvider();this.validateResolvedCredentials(c);let l=o??await this.regionProvider(),p=(0,bb.prepareRequest)(e),{longDate:f,shortDate:m}=pp(r),h=(0,lp.createScope)(m,l,a??this.service);p.headers[$e.AMZ_DATE_HEADER]=f,c.sessionToken&&(p.headers[$e.TOKEN_HEADER]=c.sessionToken);let _=await(0,Tg.getPayloadHash)(p,this.sha256);!(0,TL.hasHeader)($e.SHA256_HEADER,p.headers)&&this.applyChecksum&&(p.headers[$e.SHA256_HEADER]=_);let w=(0,Nb.getCanonicalHeaders)(p,s,i),g=await this.getSignature(f,h,this.getSigningKey(c,l,m,a),this.createCanonicalRequest(p,w,_));return p.headers[$e.AUTH_HEADER]=`${$e.ALGORITHM_IDENTIFIER} Credential=${c.accessKeyId}/${h}, SignedHeaders=${xb(w)}, Signature=${g}`,p}createCanonicalRequest(e,r,i){let s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${(0,OL.getCanonicalQuery)(e)}
${s.map(o=>`${o}:${r[o]}`).join(`
`)}

${s.join(";")}
${i}`}async createStringToSign(e,r,i){let s=new this.sha256;s.update((0,Og.toUint8Array)(i));let o=await s.digest();return`${$e.ALGORITHM_IDENTIFIER}
${e}
${r}
${(0,up.toHex)(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let o of e.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let i=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return encodeURIComponent(i).replace(/%2F/g,"/")}return e}async getSignature(e,r,i,s){let o=await this.createStringToSign(e,r,s),a=new this.sha256(await i);return a.update((0,Og.toUint8Array)(o)),(0,up.toHex)(await a.digest())}getSigningKey(e,r,i,s){return(0,lp.getSigningKey)(this.sha256,e,i,r,s||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}};n(fp,"SignatureV4");mp.SignatureV4=fp;var pp=n(t=>{let e=(0,RL.iso8601)(t).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},"formatDate"),xb=n(t=>Object.keys(t).sort().join(";"),"getCanonicalHeaderList")});var Tb=u(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.prepareRequest=yt.moveHeadersToQuery=yt.getPayloadHash=yt.getCanonicalQuery=yt.getCanonicalHeaders=void 0;var Ob=(A(),b(x));Ob.__exportStar(Ab(),yt);var IL=wg();Object.defineProperty(yt,"getCanonicalHeaders",{enumerable:!0,get:function(){return IL.getCanonicalHeaders}});var qL=Sg();Object.defineProperty(yt,"getCanonicalQuery",{enumerable:!0,get:function(){return qL.getCanonicalQuery}});var CL=Ng();Object.defineProperty(yt,"getPayloadHash",{enumerable:!0,get:function(){return CL.getPayloadHash}});var kL=xg();Object.defineProperty(yt,"moveHeadersToQuery",{enumerable:!0,get:function(){return kL.moveHeadersToQuery}});var ML=Ag();Object.defineProperty(yt,"prepareRequest",{enumerable:!0,get:function(){return ML.prepareRequest}});Ob.__exportStar(yg(),yt)});var Rb=u(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.resolveSigV4AuthConfig=Oo.resolveAwsAuthConfig=void 0;var DL=ee(),Pg=Tb(),Ao=Hn(),FL=3e5,LL=n(t=>{let e=t.credentials?Pb(t.credentials):t.credentialDefaultProvider(t),{signingEscapePath:r=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:s}=t,o;return t.signer?o=(0,Ao.normalizeProvider)(t.signer):t.regionInfoProvider?o=n(()=>(0,Ao.normalizeProvider)(t.region)().then(async a=>[await t.regionInfoProvider(a,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},a]).then(([a,c])=>{let{signingRegion:l,signingService:p}=a;t.signingRegion=t.signingRegion||l||c,t.signingName=t.signingName||p||t.serviceId;let f={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:s,uriEscapePath:r},m=t.signerConstructor||Pg.SignatureV4;return new m(f)}),"signer"):o=n(async a=>{a=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await(0,Ao.normalizeProvider)(t.region)(),properties:{}},a);let c=a.signingRegion,l=a.signingName;t.signingRegion=t.signingRegion||c,t.signingName=t.signingName||l||t.serviceId;let p={...t,credentials:e,region:t.signingRegion,service:t.signingName,sha256:s,uriEscapePath:r},f=t.signerConstructor||Pg.SignatureV4;return new f(p)},"signer"),{...t,systemClockOffset:i,signingEscapePath:r,credentials:e,signer:o}},"resolveAwsAuthConfig");Oo.resolveAwsAuthConfig=LL;var zL=n(t=>{let e=t.credentials?Pb(t.credentials):t.credentialDefaultProvider(t),{signingEscapePath:r=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:s}=t,o;return t.signer?o=(0,Ao.normalizeProvider)(t.signer):o=(0,Ao.normalizeProvider)(new Pg.SignatureV4({credentials:e,region:t.region,service:t.signingName,sha256:s,uriEscapePath:r})),{...t,systemClockOffset:i,signingEscapePath:r,credentials:e,signer:o}},"resolveSigV4AuthConfig");Oo.resolveSigV4AuthConfig=zL;var Pb=n(t=>typeof t=="function"?(0,DL.memoize)(t,e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<FL,e=>e.expiration!==void 0):(0,Ao.normalizeProvider)(t),"normalizeCredentialProvider")});var Rg=u(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0});hp.getSkewCorrectedDate=void 0;var WL=n(t=>new Date(Date.now()+t),"getSkewCorrectedDate");hp.getSkewCorrectedDate=WL});var Ib=u(_p=>{"use strict";Object.defineProperty(_p,"__esModule",{value:!0});_p.isClockSkewed=void 0;var UL=Rg(),jL=n((t,e)=>Math.abs((0,UL.getSkewCorrectedDate)(e).getTime()-t)>=3e5,"isClockSkewed");_p.isClockSkewed=jL});var qb=u(yp=>{"use strict";Object.defineProperty(yp,"__esModule",{value:!0});yp.getUpdatedSystemClockOffset=void 0;var VL=Ib(),$L=n((t,e)=>{let r=Date.parse(t);return(0,VL.isClockSkewed)(r,e)?r-Date.now():e},"getUpdatedSystemClockOffset");yp.getUpdatedSystemClockOffset=$L});var Db=u(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.getSigV4AuthPlugin=It.getAwsAuthPlugin=It.awsAuthMiddlewareOptions=It.awsAuthMiddleware=void 0;var Mb=at(),HL=Rg(),Cb=qb(),GL=n(t=>(e,r)=>async function(i){var s,o,a,c;if(!Mb.HttpRequest.isInstance(i.request))return e(i);let l=(a=(o=(s=r.endpointV2)===null||s===void 0?void 0:s.properties)===null||o===void 0?void 0:o.authSchemes)===null||a===void 0?void 0:a[0],p=l?.name==="sigv4a"?(c=l?.signingRegionSet)===null||c===void 0?void 0:c.join(","):void 0,f=await t.signer(l),m=await e({...i,request:await f.sign(i.request,{signingDate:(0,HL.getSkewCorrectedDate)(t.systemClockOffset),signingRegion:p||r.signing_region,signingService:r.signing_service})}).catch(_=>{var w;let g=(w=_.ServerTime)!==null&&w!==void 0?w:kb(_.$response);throw g&&(t.systemClockOffset=(0,Cb.getUpdatedSystemClockOffset)(g,t.systemClockOffset)),_}),h=kb(m.response);return h&&(t.systemClockOffset=(0,Cb.getUpdatedSystemClockOffset)(h,t.systemClockOffset)),m},"awsAuthMiddleware");It.awsAuthMiddleware=GL;var kb=n(t=>{var e,r,i;return Mb.HttpResponse.isInstance(t)?(r=(e=t.headers)===null||e===void 0?void 0:e.date)!==null&&r!==void 0?r:(i=t.headers)===null||i===void 0?void 0:i.Date:void 0},"getDateHeader");It.awsAuthMiddlewareOptions={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};var BL=n(t=>({applyToStack:e=>{e.addRelativeTo((0,It.awsAuthMiddleware)(t),It.awsAuthMiddlewareOptions)}}),"getAwsAuthPlugin");It.getAwsAuthPlugin=BL;It.getSigV4AuthPlugin=It.getAwsAuthPlugin});var gi=u(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});var Fb=(A(),b(x));Fb.__exportStar(Rb(),gp);Fb.__exportStar(Db(),gp)});var Lb=u(wp=>{"use strict";Object.defineProperty(wp,"__esModule",{value:!0});wp.resolveUserAgentConfig=void 0;function JL(t){return{...t,customUserAgent:typeof t.customUserAgent=="string"?[[t.customUserAgent]]:t.customUserAgent}}n(JL,"resolveUserAgentConfig");wp.resolveUserAgentConfig=JL});var zb=u(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.UA_ESCAPE_REGEX=xr.SPACE=xr.X_AMZ_USER_AGENT=xr.USER_AGENT=void 0;xr.USER_AGENT="user-agent";xr.X_AMZ_USER_AGENT="x-amz-user-agent";xr.SPACE=" ";xr.UA_ESCAPE_REGEX=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g});var Wb=u(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.getUserAgentPlugin=Ar.getUserAgentMiddlewareOptions=Ar.userAgentMiddleware=void 0;var KL=at(),en=zb(),YL=n(t=>(e,r)=>async i=>{var s,o;let{request:a}=i;if(!KL.HttpRequest.isInstance(a))return e(i);let{headers:c}=a,l=((s=r?.userAgent)===null||s===void 0?void 0:s.map(Ig))||[],p=(await t.defaultUserAgentProvider()).map(Ig),f=((o=t?.customUserAgent)===null||o===void 0?void 0:o.map(Ig))||[],m=[...p,...l,...f].join(en.SPACE),h=[...p.filter(_=>_.startsWith("aws-sdk-")),...f].join(en.SPACE);return t.runtime!=="browser"?(h&&(c[en.X_AMZ_USER_AGENT]=c[en.X_AMZ_USER_AGENT]?`${c[en.USER_AGENT]} ${h}`:h),c[en.USER_AGENT]=m):c[en.X_AMZ_USER_AGENT]=m,e({...i,request:a})},"userAgentMiddleware");Ar.userAgentMiddleware=YL;var Ig=n(([t,e])=>{let r=t.indexOf("/"),i=t.substring(0,r),s=t.substring(r+1);return i==="api"&&(s=s.toLowerCase()),[i,s,e].filter(o=>o&&o.length>0).map(o=>o?.replace(en.UA_ESCAPE_REGEX,"_")).join("/")},"escapeUserAgent");Ar.getUserAgentMiddlewareOptions={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0};var QL=n(t=>({applyToStack:e=>{e.add((0,Ar.userAgentMiddleware)(t),Ar.getUserAgentMiddlewareOptions)}}),"getUserAgentPlugin");Ar.getUserAgentPlugin=QL});var Hc=u(Ep=>{"use strict";Object.defineProperty(Ep,"__esModule",{value:!0});var Ub=(A(),b(x));Ub.__exportStar(Lb(),Ep);Ub.__exportStar(Wb(),Ep)});var jb=u(vp=>{"use strict";Object.defineProperty(vp,"__esModule",{value:!0});vp.resolveClientEndpointParameters=void 0;var XL=n(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"rds-data"}),"resolveClientEndpointParameters");vp.resolveClientEndpointParameters=XL});var Vb=u((Jfe,ZL)=>{ZL.exports={name:"@aws-sdk/client-rds-data",description:"AWS SDK for JavaScript Rds Data Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo rds-data"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.279.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/credential-provider-node":"3.279.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-signing":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-rds-data",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-rds-data"}}});var Np=u(Sp=>{"use strict";Object.defineProperty(Sp,"__esModule",{value:!0});Sp.STSServiceException=void 0;var ez=k(),To=class extends ez.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,To.prototype)}};n(To,"STSServiceException");Sp.STSServiceException=To});var sr=u(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.GetSessionTokenResponseFilterSensitiveLog=R.GetSessionTokenRequestFilterSensitiveLog=R.GetFederationTokenResponseFilterSensitiveLog=R.FederatedUserFilterSensitiveLog=R.GetFederationTokenRequestFilterSensitiveLog=R.GetCallerIdentityResponseFilterSensitiveLog=R.GetCallerIdentityRequestFilterSensitiveLog=R.GetAccessKeyInfoResponseFilterSensitiveLog=R.GetAccessKeyInfoRequestFilterSensitiveLog=R.DecodeAuthorizationMessageResponseFilterSensitiveLog=R.DecodeAuthorizationMessageRequestFilterSensitiveLog=R.AssumeRoleWithWebIdentityResponseFilterSensitiveLog=R.AssumeRoleWithWebIdentityRequestFilterSensitiveLog=R.AssumeRoleWithSAMLResponseFilterSensitiveLog=R.AssumeRoleWithSAMLRequestFilterSensitiveLog=R.AssumeRoleResponseFilterSensitiveLog=R.CredentialsFilterSensitiveLog=R.AssumeRoleRequestFilterSensitiveLog=R.TagFilterSensitiveLog=R.PolicyDescriptorTypeFilterSensitiveLog=R.AssumedRoleUserFilterSensitiveLog=R.InvalidAuthorizationMessageException=R.IDPCommunicationErrorException=R.InvalidIdentityTokenException=R.IDPRejectedClaimException=R.RegionDisabledException=R.PackedPolicyTooLargeException=R.MalformedPolicyDocumentException=R.ExpiredTokenException=void 0;var tn=Np(),Po=class extends tn.STSServiceException{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Po.prototype)}};n(Po,"ExpiredTokenException");R.ExpiredTokenException=Po;var Ro=class extends tn.STSServiceException{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,Ro.prototype)}};n(Ro,"MalformedPolicyDocumentException");R.MalformedPolicyDocumentException=Ro;var Io=class extends tn.STSServiceException{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,Io.prototype)}};n(Io,"PackedPolicyTooLargeException");R.PackedPolicyTooLargeException=Io;var qo=class extends tn.STSServiceException{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,qo.prototype)}};n(qo,"RegionDisabledException");R.RegionDisabledException=qo;var Co=class extends tn.STSServiceException{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,Co.prototype)}};n(Co,"IDPRejectedClaimException");R.IDPRejectedClaimException=Co;var ko=class extends tn.STSServiceException{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,ko.prototype)}};n(ko,"InvalidIdentityTokenException");R.InvalidIdentityTokenException=ko;var Mo=class extends tn.STSServiceException{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,Mo.prototype)}};n(Mo,"IDPCommunicationErrorException");R.IDPCommunicationErrorException=Mo;var Do=class extends tn.STSServiceException{constructor(e){super({name:"InvalidAuthorizationMessageException",$fault:"client",...e}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,Do.prototype)}};n(Do,"InvalidAuthorizationMessageException");R.InvalidAuthorizationMessageException=Do;var tz=n(t=>({...t}),"AssumedRoleUserFilterSensitiveLog");R.AssumedRoleUserFilterSensitiveLog=tz;var rz=n(t=>({...t}),"PolicyDescriptorTypeFilterSensitiveLog");R.PolicyDescriptorTypeFilterSensitiveLog=rz;var iz=n(t=>({...t}),"TagFilterSensitiveLog");R.TagFilterSensitiveLog=iz;var nz=n(t=>({...t}),"AssumeRoleRequestFilterSensitiveLog");R.AssumeRoleRequestFilterSensitiveLog=nz;var sz=n(t=>({...t}),"CredentialsFilterSensitiveLog");R.CredentialsFilterSensitiveLog=sz;var oz=n(t=>({...t}),"AssumeRoleResponseFilterSensitiveLog");R.AssumeRoleResponseFilterSensitiveLog=oz;var az=n(t=>({...t}),"AssumeRoleWithSAMLRequestFilterSensitiveLog");R.AssumeRoleWithSAMLRequestFilterSensitiveLog=az;var cz=n(t=>({...t}),"AssumeRoleWithSAMLResponseFilterSensitiveLog");R.AssumeRoleWithSAMLResponseFilterSensitiveLog=cz;var dz=n(t=>({...t}),"AssumeRoleWithWebIdentityRequestFilterSensitiveLog");R.AssumeRoleWithWebIdentityRequestFilterSensitiveLog=dz;var uz=n(t=>({...t}),"AssumeRoleWithWebIdentityResponseFilterSensitiveLog");R.AssumeRoleWithWebIdentityResponseFilterSensitiveLog=uz;var lz=n(t=>({...t}),"DecodeAuthorizationMessageRequestFilterSensitiveLog");R.DecodeAuthorizationMessageRequestFilterSensitiveLog=lz;var pz=n(t=>({...t}),"DecodeAuthorizationMessageResponseFilterSensitiveLog");R.DecodeAuthorizationMessageResponseFilterSensitiveLog=pz;var fz=n(t=>({...t}),"GetAccessKeyInfoRequestFilterSensitiveLog");R.GetAccessKeyInfoRequestFilterSensitiveLog=fz;var mz=n(t=>({...t}),"GetAccessKeyInfoResponseFilterSensitiveLog");R.GetAccessKeyInfoResponseFilterSensitiveLog=mz;var hz=n(t=>({...t}),"GetCallerIdentityRequestFilterSensitiveLog");R.GetCallerIdentityRequestFilterSensitiveLog=hz;var _z=n(t=>({...t}),"GetCallerIdentityResponseFilterSensitiveLog");R.GetCallerIdentityResponseFilterSensitiveLog=_z;var yz=n(t=>({...t}),"GetFederationTokenRequestFilterSensitiveLog");R.GetFederationTokenRequestFilterSensitiveLog=yz;var gz=n(t=>({...t}),"FederatedUserFilterSensitiveLog");R.FederatedUserFilterSensitiveLog=gz;var wz=n(t=>({...t}),"GetFederationTokenResponseFilterSensitiveLog");R.GetFederationTokenResponseFilterSensitiveLog=wz;var Ez=n(t=>({...t}),"GetSessionTokenRequestFilterSensitiveLog");R.GetSessionTokenRequestFilterSensitiveLog=Ez;var vz=n(t=>({...t}),"GetSessionTokenResponseFilterSensitiveLog");R.GetSessionTokenResponseFilterSensitiveLog=vz});var qg=u(wi=>{"use strict";var $b=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Sz=$b+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Hb="["+$b+"]["+Sz+"]*",Nz=new RegExp("^"+Hb+"$"),bz=n(function(t,e){let r=[],i=e.exec(t);for(;i;){let s=[];s.startIndex=e.lastIndex-i[0].length;let o=i.length;for(let a=0;a<o;a++)s.push(i[a]);r.push(s),i=e.exec(t)}return r},"getAllMatches"),xz=n(function(t){let e=Nz.exec(t);return!(e===null||typeof e>"u")},"isName");wi.isExist=function(t){return typeof t<"u"};wi.isEmptyObject=function(t){return Object.keys(t).length===0};wi.merge=function(t,e,r){if(e){let i=Object.keys(e),s=i.length;for(let o=0;o<s;o++)r==="strict"?t[i[o]]=[e[i[o]]]:t[i[o]]=e[i[o]]}};wi.getValue=function(t){return wi.isExist(t)?t:""};wi.isName=xz;wi.getAllMatches=bz;wi.nameRegexp=Hb});var kg=u(Yb=>{"use strict";var Cg=qg(),Az={allowBooleanAttributes:!1,unpairedTags:[]};Yb.validate=function(t,e){e=Object.assign({},Az,e);let r=[],i=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let o=0;o<t.length;o++)if(t[o]==="<"&&t[o+1]==="?"){if(o+=2,o=Bb(t,o),o.err)return o}else if(t[o]==="<"){let a=o;if(o++,t[o]==="!"){o=Jb(t,o);continue}else{let c=!1;t[o]==="/"&&(c=!0,o++);let l="";for(;o<t.length&&t[o]!==">"&&t[o]!==" "&&t[o]!=="	"&&t[o]!==`
`&&t[o]!=="\r";o++)l+=t[o];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),o--),!kz(l)){let m;return l.trim().length===0?m="Invalid space after '<'.":m="Tag '"+l+"' is an invalid name.",Pe("InvalidTag",m,gt(t,o))}let p=Pz(t,o);if(p===!1)return Pe("InvalidAttr","Attributes for '"+l+"' have open quote.",gt(t,o));let f=p.value;if(o=p.index,f[f.length-1]==="/"){let m=o-f.length;f=f.substring(0,f.length-1);let h=Kb(f,e);if(h===!0)i=!0;else return Pe(h.err.code,h.err.msg,gt(t,m+h.err.line))}else if(c)if(p.tagClosed){if(f.trim().length>0)return Pe("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",gt(t,a));{let m=r.pop();if(l!==m.tagName){let h=gt(t,m.tagStartPos);return Pe("InvalidTag","Expected closing tag '"+m.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+l+"'.",gt(t,a))}r.length==0&&(s=!0)}}else return Pe("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",gt(t,o));else{let m=Kb(f,e);if(m!==!0)return Pe(m.err.code,m.err.msg,gt(t,o-f.length+m.err.line));if(s===!0)return Pe("InvalidXml","Multiple possible root nodes found.",gt(t,o));e.unpairedTags.indexOf(l)!==-1||r.push({tagName:l,tagStartPos:a}),i=!0}for(o++;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="!"){o++,o=Jb(t,o);continue}else if(t[o+1]==="?"){if(o=Bb(t,++o),o.err)return o}else break;else if(t[o]==="&"){let m=qz(t,o);if(m==-1)return Pe("InvalidChar","char '&' is not expected.",gt(t,o));o=m}else if(s===!0&&!Gb(t[o]))return Pe("InvalidXml","Extra text at the end",gt(t,o));t[o]==="<"&&o--}}else{if(Gb(t[o]))continue;return Pe("InvalidChar","char '"+t[o]+"' is not expected.",gt(t,o))}if(i){if(r.length==1)return Pe("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",gt(t,r[0].tagStartPos));if(r.length>0)return Pe("InvalidXml","Invalid '"+JSON.stringify(r.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Pe("InvalidXml","Start tag expected.",1);return!0};function Gb(t){return t===" "||t==="	"||t===`
`||t==="\r"}n(Gb,"isWhiteSpace");function Bb(t,e){let r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){let i=t.substr(r,e-r);if(e>5&&i==="xml")return Pe("InvalidXml","XML declaration allowed only at the start of the document.",gt(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}n(Bb,"readPI");function Jb(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}n(Jb,"readCommentAndCDATA");var Oz='"',Tz="'";function Pz(t,e){let r="",i="",s=!1;for(;e<t.length;e++){if(t[e]===Oz||t[e]===Tz)i===""?i=t[e]:i!==t[e]||(i="");else if(t[e]===">"&&i===""){s=!0;break}r+=t[e]}return i!==""?!1:{value:r,index:e,tagClosed:s}}n(Pz,"readAttributeStr");var Rz=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Kb(t,e){let r=Cg.getAllMatches(t,Rz),i={};for(let s=0;s<r.length;s++){if(r[s][1].length===0)return Pe("InvalidAttr","Attribute '"+r[s][2]+"' has no space in starting.",Gc(r[s]));if(r[s][3]!==void 0&&r[s][4]===void 0)return Pe("InvalidAttr","Attribute '"+r[s][2]+"' is without value.",Gc(r[s]));if(r[s][3]===void 0&&!e.allowBooleanAttributes)return Pe("InvalidAttr","boolean attribute '"+r[s][2]+"' is not allowed.",Gc(r[s]));let o=r[s][2];if(!Cz(o))return Pe("InvalidAttr","Attribute '"+o+"' is an invalid name.",Gc(r[s]));if(!i.hasOwnProperty(o))i[o]=1;else return Pe("InvalidAttr","Attribute '"+o+"' is repeated.",Gc(r[s]))}return!0}n(Kb,"validateAttributeString");function Iz(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}n(Iz,"validateNumberAmpersand");function qz(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,Iz(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}n(qz,"validateAmpersand");function Pe(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}n(Pe,"getErrorObject");function Cz(t){return Cg.isName(t)}n(Cz,"validateAttrName");function kz(t){return Cg.isName(t)}n(kz,"validateTagName");function gt(t,e){let r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}n(gt,"getLineNumberForPosition");function Gc(t){return t.startIndex+t[1].length}n(Gc,"getPositionFromMatch")});var Xb=u(Mg=>{var Qb={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1},Mz=n(function(t){return Object.assign({},Qb,t)},"buildOptions");Mg.buildOptions=Mz;Mg.defaultOptions=Qb});var e0=u((sme,Zb)=>{"use strict";var bp=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:r})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,[":@"]:e[":@"]}):this.child.push({[e.tagname]:e.child})}};n(bp,"XmlNode");Zb.exports=bp});var r0=u((ame,t0)=>{function Dz(t,e){let r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let i=1,s=!1,o=!1,a=!1,c="";for(;e<t.length;e++)if(t[e]==="<"&&!a){if(s&&t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y")e+=7,o=!0;else if(s&&t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T")e+=8;else if(s&&t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T")e+=8;else if(s&&t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N")e+=9;else if(t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-")a=!0;else throw new Error("Invalid DOCTYPE");i++,c=""}else if(t[e]===">"){if(a?t[e-1]==="-"&&t[e-2]==="-"&&(a=!1,i--):(o&&(Lz(c,r),o=!1),i--),i===0)break}else t[e]==="["?s=!0:c+=t[e];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}n(Dz,"readDocType");var Fz=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function Lz(t,e){let r=Fz.exec(t);r&&(e[r[1]]={regx:RegExp(`&${r[1]};`,"g"),val:r[3]})}n(Lz,"parseEntityExp");t0.exports=Dz});var n0=u((dme,i0)=>{var zz=/^[-+]?0x[a-fA-F0-9]+$/,Wz=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var Uz={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function jz(t,e={}){if(e=Object.assign({},Uz,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(e.hex&&zz.test(r))return Number.parseInt(r,16);{let i=Wz.exec(r);if(i){let s=i[1],o=i[2],a=Vz(i[3]),c=i[4]||i[6];if(!e.leadingZeros&&o.length>0&&s&&r[2]!==".")return t;if(!e.leadingZeros&&o.length>0&&!s&&r[1]!==".")return t;{let l=Number(r),p=""+l;return p.search(/[eE]/)!==-1||c?e.eNotation?l:t:r.indexOf(".")!==-1?p==="0"&&a===""||p===a||s&&p==="-"+a?l:t:o?a===p||s+a===p?l:t:r===p||r===s+p?l:t}}else return t}}n(jz,"toNumber");function Vz(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}n(Vz,"trimZeros");i0.exports=jz});var o0=u((pme,s0)=>{"use strict";var Lg=qg(),Bc=e0(),$z=r0(),Hz=n0(),lme="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Lg.nameRegexp),xp=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=Gz,this.parseXml=Qz,this.parseTextData=Bz,this.resolveNameSpace=Jz,this.buildAttributesMap=Yz,this.isItStopNode=eW,this.replaceEntitiesValue=Xz,this.readStopNodeData=rW,this.saveTextToParentTag=Zz}};n(xp,"OrderedObjParser");function Gz(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let i=e[r];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:t[i]}}}n(Gz,"addExternalEntities");function Bz(t,e,r,i,s,o,a){if(t!==void 0&&(this.options.trimValues&&!i&&(t=t.trim()),t.length>0)){a||(t=this.replaceEntitiesValue(t));let c=this.options.tagValueProcessor(e,t,r,s,o);return c==null?t:typeof c!=typeof t||c!==t?c:this.options.trimValues?Fg(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?Fg(t,this.options.parseTagValue,this.options.numberParseOptions):t}}n(Bz,"parseTextData");function Jz(t){if(this.options.removeNSPrefix){let e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}n(Jz,"resolveNameSpace");var Kz=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Yz(t,e){if(!this.options.ignoreAttributes&&typeof t=="string"){let r=Lg.getAllMatches(t,Kz),i=r.length,s={};for(let o=0;o<i;o++){let a=this.resolveNameSpace(r[o][1]),c=r[o][4],l=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);let p=this.options.attributeValueProcessor(a,c,e);p==null?s[l]=c:typeof p!=typeof c||p!==c?s[l]=p:s[l]=Fg(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[l]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let o={};return o[this.options.attributesGroupName]=s,o}return s}}n(Yz,"buildAttributesMap");var Qz=n(function(t){t=t.replace(/\r\n?/g,`
`);let e=new Bc("!xml"),r=e,i="",s="";for(let o=0;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="/"){let c=is(t,">",o,"Closing Tag is not closed."),l=t.substring(o+2,c).trim();if(this.options.removeNSPrefix){let p=l.indexOf(":");p!==-1&&(l=l.substr(p+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&(i=this.saveTextToParentTag(i,r,s)),s=s.substr(0,s.lastIndexOf(".")),r=this.tagsNodeStack.pop(),i="",o=c}else if(t[o+1]==="?"){let c=Dg(t,o,!1,"?>");if(!c)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,r,s),!(this.options.ignoreDeclaration&&c.tagName==="?xml"||this.options.ignorePiTags)){let l=new Bc(c.tagName);l.add(this.options.textNodeName,""),c.tagName!==c.tagExp&&c.attrExpPresent&&(l[":@"]=this.buildAttributesMap(c.tagExp,s)),r.addChild(l)}o=c.closeIndex+1}else if(t.substr(o+1,3)==="!--"){let c=is(t,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){let l=t.substring(o+4,c-2);i=this.saveTextToParentTag(i,r,s),r.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}o=c}else if(t.substr(o+1,2)==="!D"){let c=$z(t,o);this.docTypeEntities=c.entities,o=c.i}else if(t.substr(o+1,2)==="!["){let c=is(t,"]]>",o,"CDATA is not closed.")-2,l=t.substring(o+9,c);if(i=this.saveTextToParentTag(i,r,s),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]);else{let p=this.parseTextData(l,r.tagname,s,!0,!1,!0);p==null&&(p=""),r.add(this.options.textNodeName,p)}o=c+2}else{let c=Dg(t,o,this.options.removeNSPrefix),l=c.tagName,p=c.tagExp,f=c.attrExpPresent,m=c.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&i&&r.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,r,s,!1)),l!==e.tagname&&(s+=s?"."+l:l);let h=r;if(h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(r=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,s,l)){let _="";if(p.length>0&&p.lastIndexOf("/")===p.length-1)o=c.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)o=c.closeIndex;else{let g=this.readStopNodeData(t,l,m+1);if(!g)throw new Error(`Unexpected end of ${l}`);o=g.i,_=g.tagContent}let w=new Bc(l);l!==p&&f&&(w[":@"]=this.buildAttributesMap(p,s)),_&&(_=this.parseTextData(_,l,s,!0,f,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),w.add(this.options.textNodeName,_),r.addChild(w)}else{if(p.length>0&&p.lastIndexOf("/")===p.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),p=l):p=p.substr(0,p.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));let _=new Bc(l);l!==p&&f&&(_[":@"]=this.buildAttributesMap(p,s)),s=s.substr(0,s.lastIndexOf(".")),r.addChild(_)}else{let _=new Bc(l);this.tagsNodeStack.push(r),l!==p&&f&&(_[":@"]=this.buildAttributesMap(p,s)),r.addChild(_),r=_}i="",o=m}}else i+=t[o];return e.child},"parseXml"),Xz=n(function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){let r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){let r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){let r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t},"replaceEntitiesValue");function Zz(t,e,r,i){return t&&(i===void 0&&(i=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,i),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}n(Zz,"saveTextToParentTag");function eW(t,e,r){let i="*."+r;for(let s in t){let o=t[s];if(i===o||e===o)return!0}return!1}n(eW,"isItStopNode");function tW(t,e,r=">"){let i,s="";for(let o=e;o<t.length;o++){let a=t[o];if(i)a===i&&(i="");else if(a==='"'||a==="'")i=a;else if(a===r[0])if(r[1]){if(t[o+1]===r[1])return{data:s,index:o}}else return{data:s,index:o};else a==="	"&&(a=" ");s+=a}}n(tW,"tagExpWithClosingIndex");function is(t,e,r,i){let s=t.indexOf(e,r);if(s===-1)throw new Error(i);return s+e.length-1}n(is,"findClosingIndex");function Dg(t,e,r,i=">"){let s=tW(t,e+1,i);if(!s)return;let o=s.data,a=s.index,c=o.search(/\s/),l=o,p=!0;if(c!==-1&&(l=o.substr(0,c).replace(/\s\s*$/,""),o=o.substr(c+1)),r){let f=l.indexOf(":");f!==-1&&(l=l.substr(f+1),p=l!==s.data.substr(f+1))}return{tagName:l,tagExp:o,closeIndex:a,attrExpPresent:p}}n(Dg,"readTagExp");function rW(t,e,r){let i=r,s=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){let o=is(t,">",r,`${e} is not closed`);if(t.substring(r+2,o).trim()===e&&(s--,s===0))return{tagContent:t.substring(i,r),i:o};r=o}else if(t[r+1]==="?")r=is(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=is(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=is(t,"]]>",r,"StopNode is not closed.")-2;else{let o=Dg(t,r,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,r=o.closeIndex)}}n(rW,"readStopNodeData");function Fg(t,e,r){if(e&&typeof t=="string"){let i=t.trim();return i==="true"?!0:i==="false"?!1:Hz(t,r)}else return Lg.isExist(t)?t:""}n(Fg,"parseValue");s0.exports=xp});var d0=u(c0=>{"use strict";function iW(t,e){return a0(t,e)}n(iW,"prettify");function a0(t,e,r){let i,s={};for(let o=0;o<t.length;o++){let a=t[o],c=nW(a),l="";if(r===void 0?l=c:l=r+"."+c,c===e.textNodeName)i===void 0?i=a[c]:i+=""+a[c];else{if(c===void 0)continue;if(a[c]){let p=a0(a[c],e,l),f=oW(p,e);a[":@"]?sW(p,a[":@"],l,e):Object.keys(p).length===1&&p[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?p=p[e.textNodeName]:Object.keys(p).length===0&&(e.alwaysCreateTextNode?p[e.textNodeName]="":p=""),s[c]!==void 0&&s.hasOwnProperty(c)?(Array.isArray(s[c])||(s[c]=[s[c]]),s[c].push(p)):e.isArray(c,l,f)?s[c]=[p]:s[c]=p}}}return typeof i=="string"?i.length>0&&(s[e.textNodeName]=i):i!==void 0&&(s[e.textNodeName]=i),s}n(a0,"compress");function nW(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let i=e[r];if(i!==":@")return i}}n(nW,"propName");function sW(t,e,r,i){if(e){let s=Object.keys(e),o=s.length;for(let a=0;a<o;a++){let c=s[a];i.isArray(c,r+"."+c,!0,!0)?t[c]=[e[c]]:t[c]=e[c]}}}n(sW,"assignAttributes");function oW(t,e){let r=Object.keys(t).length;return!!(r===0||r===1&&t[e.textNodeName])}n(oW,"isLeafTag");c0.prettify=iW});var l0=u((_me,u0)=>{var{buildOptions:aW}=Xb(),cW=o0(),{prettify:dW}=d0(),uW=kg(),Ap=class{constructor(e){this.externalEntities={},this.options=aW(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let o=uW.validate(e,r);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}let i=new cW(this.options);i.addExternalEntities(this.externalEntities);let s=i.parseXml(e);return this.options.preserveOrder||s===void 0?s:dW(s,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}};n(Ap,"XMLParser");u0.exports=Ap});var _0=u((gme,h0)=>{var lW=`
`;function pW(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=lW),f0(t,e,"",r)}n(pW,"toXml");function f0(t,e,r,i){let s="",o=!1;for(let a=0;a<t.length;a++){let c=t[a],l=fW(c),p="";if(r.length===0?p=l:p=`${r}.${l}`,l===e.textNodeName){let w=c[l];mW(p,e)||(w=e.tagValueProcessor(l,w),w=m0(w,e)),o&&(s+=i),s+=w,o=!1;continue}else if(l===e.cdataPropName){o&&(s+=i),s+=`<![CDATA[${c[l][0][e.textNodeName]}]]>`,o=!1;continue}else if(l===e.commentPropName){s+=i+`<!--${c[l][0][e.textNodeName]}-->`,o=!0;continue}else if(l[0]==="?"){let w=p0(c[":@"],e),g=l==="?xml"?"":i,S=c[l][0][e.textNodeName];S=S.length!==0?" "+S:"",s+=g+`<${l}${S}${w}?>`,o=!0;continue}let f=i;f!==""&&(f+=e.indentBy);let m=p0(c[":@"],e),h=i+`<${l}${m}`,_=f0(c[l],e,p,f);e.unpairedTags.indexOf(l)!==-1?e.suppressUnpairedNode?s+=h+">":s+=h+"/>":(!_||_.length===0)&&e.suppressEmptyNode?s+=h+"/>":_&&_.endsWith(">")?s+=h+`>${_}${i}</${l}>`:(s+=h+">",_&&i!==""&&(_.includes("/>")||_.includes("</"))?s+=i+e.indentBy+_+i:s+=_,s+=`</${l}>`),o=!0}return s}n(f0,"arrToStr");function fW(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let i=e[r];if(i!==":@")return i}}n(fW,"propName");function p0(t,e){let r="";if(t&&!e.ignoreAttributes)for(let i in t){let s=e.attributeValueProcessor(i,t[i]);s=m0(s,e),s===!0&&e.suppressBooleanAttributes?r+=` ${i.substr(e.attributeNamePrefix.length)}`:r+=` ${i.substr(e.attributeNamePrefix.length)}="${s}"`}return r}n(p0,"attr_to_str");function mW(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===t||e.stopNodes[i]==="*."+r)return!0;return!1}n(mW,"isStopNode");function m0(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){let i=e.entities[r];t=t.replace(i.regex,i.val)}return t}n(m0,"replaceEntitiesValue");h0.exports=pW});var g0=u((Eme,y0)=>{"use strict";var hW=_0(),_W={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function rn(t){this.options=Object.assign({},_W,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=wW),this.processTextOrObjNode=yW,this.options.format?(this.indentate=gW,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}n(rn,"Builder");rn.prototype.build=function(t){return this.options.preserveOrder?hW(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)};rn.prototype.j2x=function(t,e){let r="",i="";for(let s in t)if(!(typeof t[s]>"u"))if(t[s]===null)s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(t[s]instanceof Date)i+=this.buildTextValNode(t[s],s,"",e);else if(typeof t[s]!="object"){let o=this.isAttribute(s);if(o)r+=this.buildAttrPairStr(o,""+t[s]);else if(s===this.options.textNodeName){let a=this.options.tagValueProcessor(s,""+t[s]);i+=this.replaceEntitiesValue(a)}else i+=this.buildTextValNode(t[s],s,"",e)}else if(Array.isArray(t[s])){let o=t[s].length;for(let a=0;a<o;a++){let c=t[s][a];typeof c>"u"||(c===null?s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:typeof c=="object"?i+=this.processTextOrObjNode(c,s,e):i+=this.buildTextValNode(c,s,"",e))}}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){let o=Object.keys(t[s]),a=o.length;for(let c=0;c<a;c++)r+=this.buildAttrPairStr(o[c],""+t[s][o[c]])}else i+=this.processTextOrObjNode(t[s],s,e);return{attrStr:r,val:i}};rn.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function yW(t,e,r){let i=this.j2x(t,r+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,i.attrStr,r):this.buildObjectNode(i.val,e,i.attrStr,r)}n(yW,"processTextOrObjNode");rn.prototype.buildObjectNode=function(t,e,r,i){if(t==="")return e[0]==="?"?this.indentate(i)+"<"+e+r+"?"+this.tagEndChar:this.indentate(i)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),r&&t.indexOf("<")===-1?this.indentate(i)+"<"+e+r+o+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(i)+`<!--${t}-->`+this.newLine:this.indentate(i)+"<"+e+r+o+this.tagEndChar+t+this.indentate(i)+s}};rn.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};rn.prototype.buildTextValNode=function(t,e,r,i){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(i)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(i)+"<"+e+r+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""?this.indentate(i)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(i)+"<"+e+r+">"+s+"</"+e+this.tagEndChar}};rn.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){let r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function gW(t){return this.options.indentBy.repeat(t)}n(gW,"indentate");function wW(t){return t.startsWith(this.options.attributeNamePrefix)?t.substr(this.attrPrefixLen):!1}n(wW,"isAttribute");y0.exports=rn});var E0=u((Sme,w0)=>{"use strict";var EW=kg(),vW=l0(),SW=g0();w0.exports={XMLParser:vW,XMLValidator:EW,XMLBuilder:SW}});var vi=u(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.deserializeAws_queryGetSessionTokenCommand=j.deserializeAws_queryGetFederationTokenCommand=j.deserializeAws_queryGetCallerIdentityCommand=j.deserializeAws_queryGetAccessKeyInfoCommand=j.deserializeAws_queryDecodeAuthorizationMessageCommand=j.deserializeAws_queryAssumeRoleWithWebIdentityCommand=j.deserializeAws_queryAssumeRoleWithSAMLCommand=j.deserializeAws_queryAssumeRoleCommand=j.serializeAws_queryGetSessionTokenCommand=j.serializeAws_queryGetFederationTokenCommand=j.serializeAws_queryGetCallerIdentityCommand=j.serializeAws_queryGetAccessKeyInfoCommand=j.serializeAws_queryDecodeAuthorizationMessageCommand=j.serializeAws_queryAssumeRoleWithWebIdentityCommand=j.serializeAws_queryAssumeRoleWithSAMLCommand=j.serializeAws_queryAssumeRoleCommand=void 0;var NW=at(),q=k(),bW=E0(),nn=sr(),sn=Np(),xW=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=cn({...QW(t,e),Action:"AssumeRole",Version:"2011-06-15"}),on(e,r,"/",void 0,i)},"serializeAws_queryAssumeRoleCommand");j.serializeAws_queryAssumeRoleCommand=xW;var AW=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=cn({...XW(t,e),Action:"AssumeRoleWithSAML",Version:"2011-06-15"}),on(e,r,"/",void 0,i)},"serializeAws_queryAssumeRoleWithSAMLCommand");j.serializeAws_queryAssumeRoleWithSAMLCommand=AW;var OW=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=cn({...ZW(t,e),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),on(e,r,"/",void 0,i)},"serializeAws_queryAssumeRoleWithWebIdentityCommand");j.serializeAws_queryAssumeRoleWithWebIdentityCommand=OW;var TW=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=cn({...eU(t,e),Action:"DecodeAuthorizationMessage",Version:"2011-06-15"}),on(e,r,"/",void 0,i)},"serializeAws_queryDecodeAuthorizationMessageCommand");j.serializeAws_queryDecodeAuthorizationMessageCommand=TW;var PW=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=cn({...tU(t,e),Action:"GetAccessKeyInfo",Version:"2011-06-15"}),on(e,r,"/",void 0,i)},"serializeAws_queryGetAccessKeyInfoCommand");j.serializeAws_queryGetAccessKeyInfoCommand=PW;var RW=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=cn({...rU(t,e),Action:"GetCallerIdentity",Version:"2011-06-15"}),on(e,r,"/",void 0,i)},"serializeAws_queryGetCallerIdentityCommand");j.serializeAws_queryGetCallerIdentityCommand=RW;var IW=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=cn({...iU(t,e),Action:"GetFederationToken",Version:"2011-06-15"}),on(e,r,"/",void 0,i)},"serializeAws_queryGetFederationTokenCommand");j.serializeAws_queryGetFederationTokenCommand=IW;var qW=n(async(t,e)=>{let r={"content-type":"application/x-www-form-urlencoded"},i;return i=cn({...nU(t,e),Action:"GetSessionToken",Version:"2011-06-15"}),on(e,r,"/",void 0,i)},"serializeAws_queryGetSessionTokenCommand");j.serializeAws_queryGetSessionTokenCommand=qW;var CW=n(async(t,e)=>{if(t.statusCode>=300)return kW(t,e);let r=await Ei(t.body,e),i={};i=cU(r.AssumeRoleResult,e);let s={$metadata:Xe(t),...i};return Promise.resolve(s)},"deserializeAws_queryAssumeRoleCommand");j.deserializeAws_queryAssumeRoleCommand=CW;var kW=n(async(t,e)=>{let r={...t,body:await an(t.body,e)},i=dn(t,r.body);switch(i){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await zg(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Op(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Tp(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Jc(r,e);default:let s=r.body;(0,q.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:sn.STSServiceException,errorCode:i})}},"deserializeAws_queryAssumeRoleCommandError"),MW=n(async(t,e)=>{if(t.statusCode>=300)return DW(t,e);let r=await Ei(t.body,e),i={};i=dU(r.AssumeRoleWithSAMLResult,e);let s={$metadata:Xe(t),...i};return Promise.resolve(s)},"deserializeAws_queryAssumeRoleWithSAMLCommand");j.deserializeAws_queryAssumeRoleWithSAMLCommand=MW;var DW=n(async(t,e)=>{let r={...t,body:await an(t.body,e)},i=dn(t,r.body);switch(i){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await zg(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await v0(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await S0(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Op(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Tp(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Jc(r,e);default:let s=r.body;(0,q.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:sn.STSServiceException,errorCode:i})}},"deserializeAws_queryAssumeRoleWithSAMLCommandError"),FW=n(async(t,e)=>{if(t.statusCode>=300)return LW(t,e);let r=await Ei(t.body,e),i={};i=uU(r.AssumeRoleWithWebIdentityResult,e);let s={$metadata:Xe(t),...i};return Promise.resolve(s)},"deserializeAws_queryAssumeRoleWithWebIdentityCommand");j.deserializeAws_queryAssumeRoleWithWebIdentityCommand=FW;var LW=n(async(t,e)=>{let r={...t,body:await an(t.body,e)},i=dn(t,r.body);switch(i){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await zg(r,e);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await KW(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await v0(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await S0(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Op(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Tp(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Jc(r,e);default:let s=r.body;(0,q.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:sn.STSServiceException,errorCode:i})}},"deserializeAws_queryAssumeRoleWithWebIdentityCommandError"),zW=n(async(t,e)=>{if(t.statusCode>=300)return WW(t,e);let r=await Ei(t.body,e),i={};i=lU(r.DecodeAuthorizationMessageResult,e);let s={$metadata:Xe(t),...i};return Promise.resolve(s)},"deserializeAws_queryDecodeAuthorizationMessageCommand");j.deserializeAws_queryDecodeAuthorizationMessageCommand=zW;var WW=n(async(t,e)=>{let r={...t,body:await an(t.body,e)},i=dn(t,r.body);switch(i){case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await YW(r,e);default:let s=r.body;(0,q.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:sn.STSServiceException,errorCode:i})}},"deserializeAws_queryDecodeAuthorizationMessageCommandError"),UW=n(async(t,e)=>{if(t.statusCode>=300)return jW(t,e);let r=await Ei(t.body,e),i={};i=mU(r.GetAccessKeyInfoResult,e);let s={$metadata:Xe(t),...i};return Promise.resolve(s)},"deserializeAws_queryGetAccessKeyInfoCommand");j.deserializeAws_queryGetAccessKeyInfoCommand=UW;var jW=n(async(t,e)=>{let r={...t,body:await an(t.body,e)},i=dn(t,r.body),s=r.body;(0,q.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:sn.STSServiceException,errorCode:i})},"deserializeAws_queryGetAccessKeyInfoCommandError"),VW=n(async(t,e)=>{if(t.statusCode>=300)return $W(t,e);let r=await Ei(t.body,e),i={};i=hU(r.GetCallerIdentityResult,e);let s={$metadata:Xe(t),...i};return Promise.resolve(s)},"deserializeAws_queryGetCallerIdentityCommand");j.deserializeAws_queryGetCallerIdentityCommand=VW;var $W=n(async(t,e)=>{let r={...t,body:await an(t.body,e)},i=dn(t,r.body),s=r.body;(0,q.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:sn.STSServiceException,errorCode:i})},"deserializeAws_queryGetCallerIdentityCommandError"),HW=n(async(t,e)=>{if(t.statusCode>=300)return GW(t,e);let r=await Ei(t.body,e),i={};i=_U(r.GetFederationTokenResult,e);let s={$metadata:Xe(t),...i};return Promise.resolve(s)},"deserializeAws_queryGetFederationTokenCommand");j.deserializeAws_queryGetFederationTokenCommand=HW;var GW=n(async(t,e)=>{let r={...t,body:await an(t.body,e)},i=dn(t,r.body);switch(i){case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Op(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Tp(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Jc(r,e);default:let s=r.body;(0,q.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:sn.STSServiceException,errorCode:i})}},"deserializeAws_queryGetFederationTokenCommandError"),BW=n(async(t,e)=>{if(t.statusCode>=300)return JW(t,e);let r=await Ei(t.body,e),i={};i=yU(r.GetSessionTokenResult,e);let s={$metadata:Xe(t),...i};return Promise.resolve(s)},"deserializeAws_queryGetSessionTokenCommand");j.deserializeAws_queryGetSessionTokenCommand=BW;var JW=n(async(t,e)=>{let r={...t,body:await an(t.body,e)},i=dn(t,r.body);switch(i){case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Jc(r,e);default:let s=r.body;(0,q.throwDefaultError)({output:t,parsedBody:s.Error,exceptionCtor:sn.STSServiceException,errorCode:i})}},"deserializeAws_queryGetSessionTokenCommandError"),zg=n(async(t,e)=>{let r=t.body,i=pU(r.Error,e),s=new nn.ExpiredTokenException({$metadata:Xe(t),...i});return(0,q.decorateServiceException)(s,r)},"deserializeAws_queryExpiredTokenExceptionResponse"),KW=n(async(t,e)=>{let r=t.body,i=gU(r.Error,e),s=new nn.IDPCommunicationErrorException({$metadata:Xe(t),...i});return(0,q.decorateServiceException)(s,r)},"deserializeAws_queryIDPCommunicationErrorExceptionResponse"),v0=n(async(t,e)=>{let r=t.body,i=wU(r.Error,e),s=new nn.IDPRejectedClaimException({$metadata:Xe(t),...i});return(0,q.decorateServiceException)(s,r)},"deserializeAws_queryIDPRejectedClaimExceptionResponse"),YW=n(async(t,e)=>{let r=t.body,i=EU(r.Error,e),s=new nn.InvalidAuthorizationMessageException({$metadata:Xe(t),...i});return(0,q.decorateServiceException)(s,r)},"deserializeAws_queryInvalidAuthorizationMessageExceptionResponse"),S0=n(async(t,e)=>{let r=t.body,i=vU(r.Error,e),s=new nn.InvalidIdentityTokenException({$metadata:Xe(t),...i});return(0,q.decorateServiceException)(s,r)},"deserializeAws_queryInvalidIdentityTokenExceptionResponse"),Op=n(async(t,e)=>{let r=t.body,i=SU(r.Error,e),s=new nn.MalformedPolicyDocumentException({$metadata:Xe(t),...i});return(0,q.decorateServiceException)(s,r)},"deserializeAws_queryMalformedPolicyDocumentExceptionResponse"),Tp=n(async(t,e)=>{let r=t.body,i=NU(r.Error,e),s=new nn.PackedPolicyTooLargeException({$metadata:Xe(t),...i});return(0,q.decorateServiceException)(s,r)},"deserializeAws_queryPackedPolicyTooLargeExceptionResponse"),Jc=n(async(t,e)=>{let r=t.body,i=bU(r.Error,e),s=new nn.RegionDisabledException({$metadata:Xe(t),...i});return(0,q.decorateServiceException)(s,r)},"deserializeAws_queryRegionDisabledExceptionResponse"),QW=n((t,e)=>{let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.RoleSessionName!=null&&(r.RoleSessionName=t.RoleSessionName),t.PolicyArns!=null){let i=Pp(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([s,o])=>{let a=`PolicyArns.${s}`;r[a]=o})}if(t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),t.Tags!=null){let i=N0(t.Tags,e);t.Tags?.length===0&&(r.Tags=[]),Object.entries(i).forEach(([s,o])=>{let a=`Tags.${s}`;r[a]=o})}if(t.TransitiveTagKeys!=null){let i=aU(t.TransitiveTagKeys,e);t.TransitiveTagKeys?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(i).forEach(([s,o])=>{let a=`TransitiveTagKeys.${s}`;r[a]=o})}return t.ExternalId!=null&&(r.ExternalId=t.ExternalId),t.SerialNumber!=null&&(r.SerialNumber=t.SerialNumber),t.TokenCode!=null&&(r.TokenCode=t.TokenCode),t.SourceIdentity!=null&&(r.SourceIdentity=t.SourceIdentity),r},"serializeAws_queryAssumeRoleRequest"),XW=n((t,e)=>{let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.PrincipalArn!=null&&(r.PrincipalArn=t.PrincipalArn),t.SAMLAssertion!=null&&(r.SAMLAssertion=t.SAMLAssertion),t.PolicyArns!=null){let i=Pp(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([s,o])=>{let a=`PolicyArns.${s}`;r[a]=o})}return t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),r},"serializeAws_queryAssumeRoleWithSAMLRequest"),ZW=n((t,e)=>{let r={};if(t.RoleArn!=null&&(r.RoleArn=t.RoleArn),t.RoleSessionName!=null&&(r.RoleSessionName=t.RoleSessionName),t.WebIdentityToken!=null&&(r.WebIdentityToken=t.WebIdentityToken),t.ProviderId!=null&&(r.ProviderId=t.ProviderId),t.PolicyArns!=null){let i=Pp(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([s,o])=>{let a=`PolicyArns.${s}`;r[a]=o})}return t.Policy!=null&&(r.Policy=t.Policy),t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),r},"serializeAws_queryAssumeRoleWithWebIdentityRequest"),eU=n((t,e)=>{let r={};return t.EncodedMessage!=null&&(r.EncodedMessage=t.EncodedMessage),r},"serializeAws_queryDecodeAuthorizationMessageRequest"),tU=n((t,e)=>{let r={};return t.AccessKeyId!=null&&(r.AccessKeyId=t.AccessKeyId),r},"serializeAws_queryGetAccessKeyInfoRequest"),rU=n((t,e)=>({}),"serializeAws_queryGetCallerIdentityRequest"),iU=n((t,e)=>{let r={};if(t.Name!=null&&(r.Name=t.Name),t.Policy!=null&&(r.Policy=t.Policy),t.PolicyArns!=null){let i=Pp(t.PolicyArns,e);t.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([s,o])=>{let a=`PolicyArns.${s}`;r[a]=o})}if(t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),t.Tags!=null){let i=N0(t.Tags,e);t.Tags?.length===0&&(r.Tags=[]),Object.entries(i).forEach(([s,o])=>{let a=`Tags.${s}`;r[a]=o})}return r},"serializeAws_queryGetFederationTokenRequest"),nU=n((t,e)=>{let r={};return t.DurationSeconds!=null&&(r.DurationSeconds=t.DurationSeconds),t.SerialNumber!=null&&(r.SerialNumber=t.SerialNumber),t.TokenCode!=null&&(r.TokenCode=t.TokenCode),r},"serializeAws_queryGetSessionTokenRequest"),Pp=n((t,e)=>{let r={},i=1;for(let s of t){if(s===null)continue;let o=sU(s,e);Object.entries(o).forEach(([a,c])=>{r[`member.${i}.${a}`]=c}),i++}return r},"serializeAws_querypolicyDescriptorListType"),sU=n((t,e)=>{let r={};return t.arn!=null&&(r.arn=t.arn),r},"serializeAws_queryPolicyDescriptorType"),oU=n((t,e)=>{let r={};return t.Key!=null&&(r.Key=t.Key),t.Value!=null&&(r.Value=t.Value),r},"serializeAws_queryTag"),aU=n((t,e)=>{let r={},i=1;for(let s of t)s!==null&&(r[`member.${i}`]=s,i++);return r},"serializeAws_querytagKeyListType"),N0=n((t,e)=>{let r={},i=1;for(let s of t){if(s===null)continue;let o=oU(s,e);Object.entries(o).forEach(([a,c])=>{r[`member.${i}.${a}`]=c}),i++}return r},"serializeAws_querytagListType"),Wg=n((t,e)=>{let r={AssumedRoleId:void 0,Arn:void 0};return t.AssumedRoleId!==void 0&&(r.AssumedRoleId=(0,q.expectString)(t.AssumedRoleId)),t.Arn!==void 0&&(r.Arn=(0,q.expectString)(t.Arn)),r},"deserializeAws_queryAssumedRoleUser"),cU=n((t,e)=>{let r={Credentials:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,SourceIdentity:void 0};return t.Credentials!==void 0&&(r.Credentials=Kc(t.Credentials,e)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=Wg(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,q.strictParseInt32)(t.PackedPolicySize)),t.SourceIdentity!==void 0&&(r.SourceIdentity=(0,q.expectString)(t.SourceIdentity)),r},"deserializeAws_queryAssumeRoleResponse"),dU=n((t,e)=>{let r={Credentials:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,Subject:void 0,SubjectType:void 0,Issuer:void 0,Audience:void 0,NameQualifier:void 0,SourceIdentity:void 0};return t.Credentials!==void 0&&(r.Credentials=Kc(t.Credentials,e)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=Wg(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,q.strictParseInt32)(t.PackedPolicySize)),t.Subject!==void 0&&(r.Subject=(0,q.expectString)(t.Subject)),t.SubjectType!==void 0&&(r.SubjectType=(0,q.expectString)(t.SubjectType)),t.Issuer!==void 0&&(r.Issuer=(0,q.expectString)(t.Issuer)),t.Audience!==void 0&&(r.Audience=(0,q.expectString)(t.Audience)),t.NameQualifier!==void 0&&(r.NameQualifier=(0,q.expectString)(t.NameQualifier)),t.SourceIdentity!==void 0&&(r.SourceIdentity=(0,q.expectString)(t.SourceIdentity)),r},"deserializeAws_queryAssumeRoleWithSAMLResponse"),uU=n((t,e)=>{let r={Credentials:void 0,SubjectFromWebIdentityToken:void 0,AssumedRoleUser:void 0,PackedPolicySize:void 0,Provider:void 0,Audience:void 0,SourceIdentity:void 0};return t.Credentials!==void 0&&(r.Credentials=Kc(t.Credentials,e)),t.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=(0,q.expectString)(t.SubjectFromWebIdentityToken)),t.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=Wg(t.AssumedRoleUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,q.strictParseInt32)(t.PackedPolicySize)),t.Provider!==void 0&&(r.Provider=(0,q.expectString)(t.Provider)),t.Audience!==void 0&&(r.Audience=(0,q.expectString)(t.Audience)),t.SourceIdentity!==void 0&&(r.SourceIdentity=(0,q.expectString)(t.SourceIdentity)),r},"deserializeAws_queryAssumeRoleWithWebIdentityResponse"),Kc=n((t,e)=>{let r={AccessKeyId:void 0,SecretAccessKey:void 0,SessionToken:void 0,Expiration:void 0};return t.AccessKeyId!==void 0&&(r.AccessKeyId=(0,q.expectString)(t.AccessKeyId)),t.SecretAccessKey!==void 0&&(r.SecretAccessKey=(0,q.expectString)(t.SecretAccessKey)),t.SessionToken!==void 0&&(r.SessionToken=(0,q.expectString)(t.SessionToken)),t.Expiration!==void 0&&(r.Expiration=(0,q.expectNonNull)((0,q.parseRfc3339DateTimeWithOffset)(t.Expiration))),r},"deserializeAws_queryCredentials"),lU=n((t,e)=>{let r={DecodedMessage:void 0};return t.DecodedMessage!==void 0&&(r.DecodedMessage=(0,q.expectString)(t.DecodedMessage)),r},"deserializeAws_queryDecodeAuthorizationMessageResponse"),pU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,q.expectString)(t.message)),r},"deserializeAws_queryExpiredTokenException"),fU=n((t,e)=>{let r={FederatedUserId:void 0,Arn:void 0};return t.FederatedUserId!==void 0&&(r.FederatedUserId=(0,q.expectString)(t.FederatedUserId)),t.Arn!==void 0&&(r.Arn=(0,q.expectString)(t.Arn)),r},"deserializeAws_queryFederatedUser"),mU=n((t,e)=>{let r={Account:void 0};return t.Account!==void 0&&(r.Account=(0,q.expectString)(t.Account)),r},"deserializeAws_queryGetAccessKeyInfoResponse"),hU=n((t,e)=>{let r={UserId:void 0,Account:void 0,Arn:void 0};return t.UserId!==void 0&&(r.UserId=(0,q.expectString)(t.UserId)),t.Account!==void 0&&(r.Account=(0,q.expectString)(t.Account)),t.Arn!==void 0&&(r.Arn=(0,q.expectString)(t.Arn)),r},"deserializeAws_queryGetCallerIdentityResponse"),_U=n((t,e)=>{let r={Credentials:void 0,FederatedUser:void 0,PackedPolicySize:void 0};return t.Credentials!==void 0&&(r.Credentials=Kc(t.Credentials,e)),t.FederatedUser!==void 0&&(r.FederatedUser=fU(t.FederatedUser,e)),t.PackedPolicySize!==void 0&&(r.PackedPolicySize=(0,q.strictParseInt32)(t.PackedPolicySize)),r},"deserializeAws_queryGetFederationTokenResponse"),yU=n((t,e)=>{let r={Credentials:void 0};return t.Credentials!==void 0&&(r.Credentials=Kc(t.Credentials,e)),r},"deserializeAws_queryGetSessionTokenResponse"),gU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,q.expectString)(t.message)),r},"deserializeAws_queryIDPCommunicationErrorException"),wU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,q.expectString)(t.message)),r},"deserializeAws_queryIDPRejectedClaimException"),EU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,q.expectString)(t.message)),r},"deserializeAws_queryInvalidAuthorizationMessageException"),vU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,q.expectString)(t.message)),r},"deserializeAws_queryInvalidIdentityTokenException"),SU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,q.expectString)(t.message)),r},"deserializeAws_queryMalformedPolicyDocumentException"),NU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,q.expectString)(t.message)),r},"deserializeAws_queryPackedPolicyTooLargeException"),bU=n((t,e)=>{let r={message:void 0};return t.message!==void 0&&(r.message=(0,q.expectString)(t.message)),r},"deserializeAws_queryRegionDisabledException"),Xe=n(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),xU=n((t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),"collectBody"),AU=n((t,e)=>xU(t,e).then(r=>e.utf8Encoder(r)),"collectBodyString"),on=n(async(t,e,r,i,s)=>{let{hostname:o,protocol:a="https",port:c,path:l}=await t.endpoint(),p={protocol:a,hostname:o,port:c,method:"POST",path:l.endsWith("/")?l.slice(0,-1)+r:l+r,headers:e};return i!==void 0&&(p.hostname=i),s!==void 0&&(p.body=s),new NW.HttpRequest(p)},"buildHttpRpcRequest"),Ei=n((t,e)=>AU(t,e).then(r=>{if(r.length){let i=new bW.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(l,p)=>p.trim()===""&&p.includes(`
`)?"":void 0});i.addEntity("#xD","\r"),i.addEntity("#10",`
`);let s=i.parse(r),o="#text",a=Object.keys(s)[0],c=s[a];return c[o]&&(c[a]=c[o],delete c[o]),(0,q.getValueFromTextNode)(c)}return{}}),"parseBody"),an=n(async(t,e)=>{let r=await Ei(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},"parseErrorBody"),cn=n(t=>Object.entries(t).map(([e,r])=>(0,q.extendedEncodeURIComponent)(e)+"="+(0,q.extendedEncodeURIComponent)(r)).join("&"),"buildFormUrlencodedString"),dn=n((t,e)=>{if(e.Error?.Code!==void 0)return e.Error.Code;if(t.statusCode==404)return"NotFound"},"loadQueryErrorCode")});var Ip=u(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});Rp.AssumeRoleCommand=void 0;var OU=ne(),TU=ge(),PU=gi(),RU=k(),b0=sr(),x0=vi(),Fo=class extends RU.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,TU.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,OU.getEndpointPlugin)(r,Fo.getEndpointParameterInstructions())),this.middlewareStack.use((0,PU.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:b0.AssumeRoleRequestFilterSensitiveLog,outputFilterSensitiveLog:b0.AssumeRoleResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,x0.serializeAws_queryAssumeRoleCommand)(e,r)}deserialize(e,r){return(0,x0.deserializeAws_queryAssumeRoleCommand)(e,r)}};n(Fo,"AssumeRoleCommand");Rp.AssumeRoleCommand=Fo});var Ug=u(qp=>{"use strict";Object.defineProperty(qp,"__esModule",{value:!0});qp.AssumeRoleWithSAMLCommand=void 0;var IU=ne(),qU=ge(),CU=k(),A0=sr(),O0=vi(),Lo=class extends CU.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,qU.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,IU.getEndpointPlugin)(r,Lo.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithSAMLCommand",inputFilterSensitiveLog:A0.AssumeRoleWithSAMLRequestFilterSensitiveLog,outputFilterSensitiveLog:A0.AssumeRoleWithSAMLResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,O0.serializeAws_queryAssumeRoleWithSAMLCommand)(e,r)}deserialize(e,r){return(0,O0.deserializeAws_queryAssumeRoleWithSAMLCommand)(e,r)}};n(Lo,"AssumeRoleWithSAMLCommand");qp.AssumeRoleWithSAMLCommand=Lo});var kp=u(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});Cp.AssumeRoleWithWebIdentityCommand=void 0;var kU=ne(),MU=ge(),DU=k(),T0=sr(),P0=vi(),zo=class extends DU.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,MU.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,kU.getEndpointPlugin)(r,zo.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:T0.AssumeRoleWithWebIdentityRequestFilterSensitiveLog,outputFilterSensitiveLog:T0.AssumeRoleWithWebIdentityResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,P0.serializeAws_queryAssumeRoleWithWebIdentityCommand)(e,r)}deserialize(e,r){return(0,P0.deserializeAws_queryAssumeRoleWithWebIdentityCommand)(e,r)}};n(zo,"AssumeRoleWithWebIdentityCommand");Cp.AssumeRoleWithWebIdentityCommand=zo});var jg=u(Mp=>{"use strict";Object.defineProperty(Mp,"__esModule",{value:!0});Mp.DecodeAuthorizationMessageCommand=void 0;var FU=ne(),LU=ge(),zU=gi(),WU=k(),R0=sr(),I0=vi(),Wo=class extends WU.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,LU.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,FU.getEndpointPlugin)(r,Wo.getEndpointParameterInstructions())),this.middlewareStack.use((0,zU.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"DecodeAuthorizationMessageCommand",inputFilterSensitiveLog:R0.DecodeAuthorizationMessageRequestFilterSensitiveLog,outputFilterSensitiveLog:R0.DecodeAuthorizationMessageResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,I0.serializeAws_queryDecodeAuthorizationMessageCommand)(e,r)}deserialize(e,r){return(0,I0.deserializeAws_queryDecodeAuthorizationMessageCommand)(e,r)}};n(Wo,"DecodeAuthorizationMessageCommand");Mp.DecodeAuthorizationMessageCommand=Wo});var Vg=u(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});Dp.GetAccessKeyInfoCommand=void 0;var UU=ne(),jU=ge(),VU=gi(),$U=k(),q0=sr(),C0=vi(),Uo=class extends $U.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,jU.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,UU.getEndpointPlugin)(r,Uo.getEndpointParameterInstructions())),this.middlewareStack.use((0,VU.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"GetAccessKeyInfoCommand",inputFilterSensitiveLog:q0.GetAccessKeyInfoRequestFilterSensitiveLog,outputFilterSensitiveLog:q0.GetAccessKeyInfoResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,C0.serializeAws_queryGetAccessKeyInfoCommand)(e,r)}deserialize(e,r){return(0,C0.deserializeAws_queryGetAccessKeyInfoCommand)(e,r)}};n(Uo,"GetAccessKeyInfoCommand");Dp.GetAccessKeyInfoCommand=Uo});var $g=u(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});Fp.GetCallerIdentityCommand=void 0;var HU=ne(),GU=ge(),BU=gi(),JU=k(),k0=sr(),M0=vi(),jo=class extends JU.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,GU.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,HU.getEndpointPlugin)(r,jo.getEndpointParameterInstructions())),this.middlewareStack.use((0,BU.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"GetCallerIdentityCommand",inputFilterSensitiveLog:k0.GetCallerIdentityRequestFilterSensitiveLog,outputFilterSensitiveLog:k0.GetCallerIdentityResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,M0.serializeAws_queryGetCallerIdentityCommand)(e,r)}deserialize(e,r){return(0,M0.deserializeAws_queryGetCallerIdentityCommand)(e,r)}};n(jo,"GetCallerIdentityCommand");Fp.GetCallerIdentityCommand=jo});var Hg=u(Lp=>{"use strict";Object.defineProperty(Lp,"__esModule",{value:!0});Lp.GetFederationTokenCommand=void 0;var KU=ne(),YU=ge(),QU=gi(),XU=k(),D0=sr(),F0=vi(),Vo=class extends XU.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,YU.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,KU.getEndpointPlugin)(r,Vo.getEndpointParameterInstructions())),this.middlewareStack.use((0,QU.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"GetFederationTokenCommand",inputFilterSensitiveLog:D0.GetFederationTokenRequestFilterSensitiveLog,outputFilterSensitiveLog:D0.GetFederationTokenResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,F0.serializeAws_queryGetFederationTokenCommand)(e,r)}deserialize(e,r){return(0,F0.deserializeAws_queryGetFederationTokenCommand)(e,r)}};n(Vo,"GetFederationTokenCommand");Lp.GetFederationTokenCommand=Vo});var Gg=u(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.GetSessionTokenCommand=void 0;var ZU=ne(),ej=ge(),tj=gi(),rj=k(),L0=sr(),z0=vi(),$o=class extends rj.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,ej.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,ZU.getEndpointPlugin)(r,$o.getEndpointParameterInstructions())),this.middlewareStack.use((0,tj.getAwsAuthPlugin)(r));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"STSClient",commandName:"GetSessionTokenCommand",inputFilterSensitiveLog:L0.GetSessionTokenRequestFilterSensitiveLog,outputFilterSensitiveLog:L0.GetSessionTokenResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,z0.serializeAws_queryGetSessionTokenCommand)(e,r)}deserialize(e,r){return(0,z0.deserializeAws_queryGetSessionTokenCommand)(e,r)}};n($o,"GetSessionTokenCommand");zp.GetSessionTokenCommand=$o});var W0=u(Wp=>{"use strict";Object.defineProperty(Wp,"__esModule",{value:!0});Wp.resolveStsAuthConfig=void 0;var ij=gi(),nj=n((t,{stsClientCtor:e})=>(0,ij.resolveAwsAuthConfig)({...t,stsClientCtor:e}),"resolveStsAuthConfig");Wp.resolveStsAuthConfig=nj});var U0=u(Up=>{"use strict";Object.defineProperty(Up,"__esModule",{value:!0});Up.resolveClientEndpointParameters=void 0;var sj=n(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),"resolveClientEndpointParameters");Up.resolveClientEndpointParameters=sj});var j0=u((Hme,oj)=>{oj.exports={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/credential-provider-node":"3.279.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-sdk-sts":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-signing":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0","fast-xml-parser":"4.1.2",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}}});var Bg=u(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.decorateDefaultCredentialProvider=Or.getDefaultRoleAssumerWithWebIdentity=Or.getDefaultRoleAssumer=void 0;var aj=Ip(),cj=kp(),V0="us-east-1",$0=n(t=>typeof t!="function"?t===void 0?V0:t:async()=>{try{return await t()}catch{return V0}},"decorateDefaultRegion"),dj=n((t,e)=>{let r,i;return async(s,o)=>{if(i=s,!r){let{logger:c,region:l,requestHandler:p}=t;r=new e({logger:c,credentialDefaultProvider:()=>async()=>i,region:$0(l||t.region),...p?{requestHandler:p}:{}})}let{Credentials:a}=await r.send(new aj.AssumeRoleCommand(o));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);return{accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration}}},"getDefaultRoleAssumer");Or.getDefaultRoleAssumer=dj;var uj=n((t,e)=>{let r;return async i=>{if(!r){let{logger:o,region:a,requestHandler:c}=t;r=new e({logger:o,region:$0(a||t.region),...c?{requestHandler:c}:{}})}let{Credentials:s}=await r.send(new cj.AssumeRoleWithWebIdentityCommand(i));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${i.RoleArn}`);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration}}},"getDefaultRoleAssumerWithWebIdentity");Or.getDefaultRoleAssumerWithWebIdentity=uj;var lj=n(t=>e=>t({roleAssumer:(0,Or.getDefaultRoleAssumer)(e,e.stsClientCtor),roleAssumerWithWebIdentity:(0,Or.getDefaultRoleAssumerWithWebIdentity)(e,e.stsClientCtor),...e}),"decorateDefaultCredentialProvider");Or.decorateDefaultCredentialProvider=lj});var H0=u(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.fromEnv=Ze.ENV_EXPIRATION=Ze.ENV_SESSION=Ze.ENV_SECRET=Ze.ENV_KEY=void 0;var pj=ee();Ze.ENV_KEY="AWS_ACCESS_KEY_ID";Ze.ENV_SECRET="AWS_SECRET_ACCESS_KEY";Ze.ENV_SESSION="AWS_SESSION_TOKEN";Ze.ENV_EXPIRATION="AWS_CREDENTIAL_EXPIRATION";var fj=n(()=>async()=>{let t=process.env[Ze.ENV_KEY],e=process.env[Ze.ENV_SECRET],r=process.env[Ze.ENV_SESSION],i=process.env[Ze.ENV_EXPIRATION];if(t&&e)return{accessKeyId:t,secretAccessKey:e,...r&&{sessionToken:r},...i&&{expiration:new Date(i)}};throw new pj.CredentialsProviderError("Unable to find environment variable credentials.")},"fromEnv");Ze.fromEnv=fj});var Kg=u(Jg=>{"use strict";Object.defineProperty(Jg,"__esModule",{value:!0});var mj=(A(),b(x));mj.__exportStar(H0(),Jg)});var Yc=u(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});jp.getHomeDir=void 0;var hj=W("os"),_j=W("path"),yj=n(()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:i=`C:${_j.sep}`}=process.env;return t||e||(r?`${i}${r}`:(0,hj.homedir)())},"getHomeDir");jp.getHomeDir=yj});var G0=u(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.getProfileName=Tr.DEFAULT_PROFILE=Tr.ENV_PROFILE=void 0;Tr.ENV_PROFILE="AWS_PROFILE";Tr.DEFAULT_PROFILE="default";var gj=n(t=>t.profile||process.env[Tr.ENV_PROFILE]||Tr.DEFAULT_PROFILE,"getProfileName");Tr.getProfileName=gj});var Yg=u(Vp=>{"use strict";Object.defineProperty(Vp,"__esModule",{value:!0});Vp.getSSOTokenFilepath=void 0;var wj=W("crypto"),Ej=W("path"),vj=Yc(),Sj=n(t=>{let r=(0,wj.createHash)("sha1").update(t).digest("hex");return(0,Ej.join)((0,vj.getHomeDir)(),".aws","sso","cache",`${r}.json`)},"getSSOTokenFilepath");Vp.getSSOTokenFilepath=Sj});var B0=u($p=>{"use strict";Object.defineProperty($p,"__esModule",{value:!0});$p.getSSOTokenFromFile=void 0;var Nj=W("fs"),bj=Yg(),{readFile:xj}=Nj.promises,Aj=n(async t=>{let e=(0,bj.getSSOTokenFilepath)(t),r=await xj(e,"utf8");return JSON.parse(r)},"getSSOTokenFromFile");$p.getSSOTokenFromFile=Aj});var Qg=u(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.getConfigFilepath=ns.ENV_CONFIG_PATH=void 0;var Oj=W("path"),Tj=Yc();ns.ENV_CONFIG_PATH="AWS_CONFIG_FILE";var Pj=n(()=>process.env[ns.ENV_CONFIG_PATH]||(0,Oj.join)((0,Tj.getHomeDir)(),".aws","config"),"getConfigFilepath");ns.getConfigFilepath=Pj});var J0=u(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.getCredentialsFilepath=ss.ENV_CREDENTIALS_PATH=void 0;var Rj=W("path"),Ij=Yc();ss.ENV_CREDENTIALS_PATH="AWS_SHARED_CREDENTIALS_FILE";var qj=n(()=>process.env[ss.ENV_CREDENTIALS_PATH]||(0,Rj.join)((0,Ij.getHomeDir)(),".aws","credentials"),"getCredentialsFilepath");ss.getCredentialsFilepath=qj});var Y0=u(Hp=>{"use strict";Object.defineProperty(Hp,"__esModule",{value:!0});Hp.getProfileData=void 0;var K0=/^profile\s(["'])?([^\1]+)\1$/,Cj=n(t=>Object.entries(t).filter(([e])=>K0.test(e)).reduce((e,[r,i])=>({...e,[K0.exec(r)[2]]:i}),{...t.default&&{default:t.default}}),"getProfileData");Hp.getProfileData=Cj});var Xg=u(Gp=>{"use strict";Object.defineProperty(Gp,"__esModule",{value:!0});Gp.parseIni=void 0;var kj=["__proto__","profile __proto__"],Mj=n(t=>{let e={},r;for(let i of t.split(/\r?\n/))if(i=i.split(/(^|\s)[;#]/)[0].trim(),i[0]==="["&&i[i.length-1]==="]"){if(r=i.substring(1,i.length-1),kj.includes(r))throw new Error(`Found invalid profile name "${r}"`)}else if(r){let o=i.indexOf("="),a=0,c=i.length-1;if(o!==-1&&o!==a&&o!==c){let[p,f]=[i.substring(0,o).trim(),i.substring(o+1).trim()];e[r]=e[r]||{},e[r][p]=f}}return e},"parseIni");Gp.parseIni=Mj});var ew=u(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});Bp.slurpFile=void 0;var Dj=W("fs"),{readFile:Fj}=Dj.promises,Zg={},Lj=n(t=>(Zg[t]||(Zg[t]=Fj(t,"utf8")),Zg[t]),"slurpFile");Bp.slurpFile=Lj});var tw=u(Jp=>{"use strict";Object.defineProperty(Jp,"__esModule",{value:!0});Jp.loadSharedConfigFiles=void 0;var zj=Qg(),Wj=J0(),Uj=Y0(),Q0=Xg(),X0=ew(),Z0=n(()=>({}),"swallowError"),jj=n(async(t={})=>{let{filepath:e=(0,Wj.getCredentialsFilepath)(),configFilepath:r=(0,zj.getConfigFilepath)()}=t,i=await Promise.all([(0,X0.slurpFile)(r).then(Q0.parseIni).then(Uj.getProfileData).catch(Z0),(0,X0.slurpFile)(e).then(Q0.parseIni).catch(Z0)]);return{configFile:i[0],credentialsFile:i[1]}},"loadSharedConfigFiles");Jp.loadSharedConfigFiles=jj});var tx=u(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});Kp.getSsoSessionData=void 0;var ex=/^sso-session\s(["'])?([^\1]+)\1$/,Vj=n(t=>Object.entries(t).filter(([e])=>ex.test(e)).reduce((e,[r,i])=>({...e,[ex.exec(r)[2]]:i}),{}),"getSsoSessionData");Kp.getSsoSessionData=Vj});var rx=u(Yp=>{"use strict";Object.defineProperty(Yp,"__esModule",{value:!0});Yp.loadSsoSessionData=void 0;var $j=Qg(),Hj=tx(),Gj=Xg(),Bj=ew(),Jj=n(()=>({}),"swallowError"),Kj=n(async(t={})=>{var e;return(0,Bj.slurpFile)((e=t.configFilepath)!==null&&e!==void 0?e:(0,$j.getConfigFilepath)()).then(Gj.parseIni).then(Hj.getSsoSessionData).catch(Jj)},"loadSsoSessionData");Yp.loadSsoSessionData=Kj});var ix=u(Qp=>{"use strict";Object.defineProperty(Qp,"__esModule",{value:!0});Qp.parseKnownFiles=void 0;var Yj=tw(),Qj=n(async t=>{let e=await(0,Yj.loadSharedConfigFiles)(t);return{...e.configFile,...e.credentialsFile}},"parseKnownFiles");Qp.parseKnownFiles=Qj});var sx=u(nx=>{"use strict";Object.defineProperty(nx,"__esModule",{value:!0})});var Rr=u(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});var un=(A(),b(x));un.__exportStar(Yc(),Pr);un.__exportStar(G0(),Pr);un.__exportStar(Yg(),Pr);un.__exportStar(B0(),Pr);un.__exportStar(tw(),Pr);un.__exportStar(rx(),Pr);un.__exportStar(ix(),Pr);un.__exportStar(sx(),Pr)});var Zp=u(Xp=>{"use strict";Object.defineProperty(Xp,"__esModule",{value:!0});Xp.httpRequest=void 0;var rw=ee(),Xj=W("buffer"),Zj=W("http");function eV(t){return new Promise((e,r)=>{var i;let s=(0,Zj.request)({method:"GET",...t,hostname:(i=t.hostname)===null||i===void 0?void 0:i.replace(/^\[(.+)\]$/,"$1")});s.on("error",o=>{r(Object.assign(new rw.ProviderError("Unable to connect to instance metadata service"),o)),s.destroy()}),s.on("timeout",()=>{r(new rw.ProviderError("TimeoutError from instance metadata service")),s.destroy()}),s.on("response",o=>{let{statusCode:a=400}=o;(a<200||300<=a)&&(r(Object.assign(new rw.ProviderError("Error response received from instance metadata service"),{statusCode:a})),s.destroy());let c=[];o.on("data",l=>{c.push(l)}),o.on("end",()=>{e(Xj.Buffer.concat(c)),s.destroy()})}),s.end()})}n(eV,"httpRequest");Xp.httpRequest=eV});var iw=u(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.fromImdsCredentials=Ho.isImdsCredentials=void 0;var tV=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string","isImdsCredentials");Ho.isImdsCredentials=tV;var rV=n(t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration)}),"fromImdsCredentials");Ho.fromImdsCredentials=rV});var ef=u(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.providerConfigFromInit=Ir.DEFAULT_MAX_RETRIES=Ir.DEFAULT_TIMEOUT=void 0;Ir.DEFAULT_TIMEOUT=1e3;Ir.DEFAULT_MAX_RETRIES=0;var iV=n(({maxRetries:t=Ir.DEFAULT_MAX_RETRIES,timeout:e=Ir.DEFAULT_TIMEOUT})=>({maxRetries:t,timeout:e}),"providerConfigFromInit");Ir.providerConfigFromInit=iV});var nw=u(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});tf.retry=void 0;var nV=n((t,e)=>{let r=t();for(let i=0;i<e;i++)r=r.catch(t);return r},"retry");tf.retry=nV});var ax=u(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.fromContainerMetadata=Le.ENV_CMDS_AUTH_TOKEN=Le.ENV_CMDS_RELATIVE_URI=Le.ENV_CMDS_FULL_URI=void 0;var rf=ee(),sV=W("url"),oV=Zp(),ox=iw(),aV=ef(),cV=nw();Le.ENV_CMDS_FULL_URI="AWS_CONTAINER_CREDENTIALS_FULL_URI";Le.ENV_CMDS_RELATIVE_URI="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI";Le.ENV_CMDS_AUTH_TOKEN="AWS_CONTAINER_AUTHORIZATION_TOKEN";var dV=n((t={})=>{let{timeout:e,maxRetries:r}=(0,aV.providerConfigFromInit)(t);return()=>(0,cV.retry)(async()=>{let i=await mV(),s=JSON.parse(await uV(e,i));if(!(0,ox.isImdsCredentials)(s))throw new rf.CredentialsProviderError("Invalid response received from instance metadata service.");return(0,ox.fromImdsCredentials)(s)},r)},"fromContainerMetadata");Le.fromContainerMetadata=dV;var uV=n(async(t,e)=>(process.env[Le.ENV_CMDS_AUTH_TOKEN]&&(e.headers={...e.headers,Authorization:process.env[Le.ENV_CMDS_AUTH_TOKEN]}),(await(0,oV.httpRequest)({...e,timeout:t})).toString()),"requestFromEcsImds"),lV="169.254.170.2",pV={localhost:!0,"127.0.0.1":!0},fV={"http:":!0,"https:":!0},mV=n(async()=>{if(process.env[Le.ENV_CMDS_RELATIVE_URI])return{hostname:lV,path:process.env[Le.ENV_CMDS_RELATIVE_URI]};if(process.env[Le.ENV_CMDS_FULL_URI]){let t=(0,sV.parse)(process.env[Le.ENV_CMDS_FULL_URI]);if(!t.hostname||!(t.hostname in pV))throw new rf.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,!1);if(!t.protocol||!(t.protocol in fV))throw new rf.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,!1);return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new rf.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${Le.ENV_CMDS_RELATIVE_URI} or ${Le.ENV_CMDS_FULL_URI} environment variable is set`,!1)},"getCmdsUri")});var cx=u(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.fromEnv=void 0;var hV=ee(),_V=n(t=>async()=>{try{let e=t(process.env);if(e===void 0)throw new Error;return e}catch(e){throw new hV.CredentialsProviderError(e.message||`Cannot load config from environment variables with getter: ${t}`)}},"fromEnv");nf.fromEnv=_V});var ux=u(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.fromSharedConfigFiles=void 0;var yV=ee(),dx=Rr(),gV=n((t,{preferredFile:e="config",...r}={})=>async()=>{let i=(0,dx.getProfileName)(r),{configFile:s,credentialsFile:o}=await(0,dx.loadSharedConfigFiles)(r),a=o[i]||{},c=s[i]||{},l=e==="config"?{...a,...c}:{...c,...a};try{let p=t(l);if(p===void 0)throw new Error;return p}catch(p){throw new yV.CredentialsProviderError(p.message||`Cannot load config for profile ${i} in SDK configuration files with getter: ${t}`)}},"fromSharedConfigFiles");sf.fromSharedConfigFiles=gV});var lx=u(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.fromStatic=void 0;var wV=ee(),EV=n(t=>typeof t=="function","isFunction"),vV=n(t=>EV(t)?async()=>await t():(0,wV.fromStatic)(t),"fromStatic");of.fromStatic=vV});var fx=u(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.loadConfig=void 0;var px=ee(),SV=cx(),NV=ux(),bV=lx(),xV=n(({environmentVariableSelector:t,configFileSelector:e,default:r},i={})=>(0,px.memoize)((0,px.chain)((0,SV.fromEnv)(t),(0,NV.fromSharedConfigFiles)(e,i),(0,bV.fromStatic)(r))),"loadConfig");af.loadConfig=xV});var ln=u(sw=>{"use strict";Object.defineProperty(sw,"__esModule",{value:!0});var AV=(A(),b(x));AV.__exportStar(fx(),sw)});var mx=u(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.Endpoint=void 0;var OV;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(OV=Qc.Endpoint||(Qc.Endpoint={}))});var hx=u(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.ENDPOINT_CONFIG_OPTIONS=qr.CONFIG_ENDPOINT_NAME=qr.ENV_ENDPOINT_NAME=void 0;qr.ENV_ENDPOINT_NAME="AWS_EC2_METADATA_SERVICE_ENDPOINT";qr.CONFIG_ENDPOINT_NAME="ec2_metadata_service_endpoint";qr.ENDPOINT_CONFIG_OPTIONS={environmentVariableSelector:t=>t[qr.ENV_ENDPOINT_NAME],configFileSelector:t=>t[qr.CONFIG_ENDPOINT_NAME],default:void 0}});var ow=u(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.EndpointMode=void 0;var TV;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(TV=Xc.EndpointMode||(Xc.EndpointMode={}))});var _x=u(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.ENDPOINT_MODE_CONFIG_OPTIONS=Cr.CONFIG_ENDPOINT_MODE_NAME=Cr.ENV_ENDPOINT_MODE_NAME=void 0;var PV=ow();Cr.ENV_ENDPOINT_MODE_NAME="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE";Cr.CONFIG_ENDPOINT_MODE_NAME="ec2_metadata_service_endpoint_mode";Cr.ENDPOINT_MODE_CONFIG_OPTIONS={environmentVariableSelector:t=>t[Cr.ENV_ENDPOINT_MODE_NAME],configFileSelector:t=>t[Cr.CONFIG_ENDPOINT_MODE_NAME],default:PV.EndpointMode.IPv4}});var cw=u(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});cf.getInstanceMetadataEndpoint=void 0;var gx=ln(),RV=Vn(),yx=mx(),IV=hx(),aw=ow(),qV=_x(),CV=n(async()=>(0,RV.parseUrl)(await kV()||await MV()),"getInstanceMetadataEndpoint");cf.getInstanceMetadataEndpoint=CV;var kV=n(async()=>(0,gx.loadConfig)(IV.ENDPOINT_CONFIG_OPTIONS)(),"getFromEndpointConfig"),MV=n(async()=>{let t=await(0,gx.loadConfig)(qV.ENDPOINT_MODE_CONFIG_OPTIONS)();switch(t){case aw.EndpointMode.IPv4:return yx.Endpoint.IPv4;case aw.EndpointMode.IPv6:return yx.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(aw.EndpointMode)}`)}},"getFromEndpointModeConfig")});var wx=u(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});df.getExtendedInstanceMetadataCredentials=void 0;var DV=5*60,FV=5*60,LV="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",zV=n((t,e)=>{var r;let i=DV+Math.floor(Math.random()*FV),s=new Date(Date.now()+i*1e3);e.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+LV);let o=(r=t.originalExpiration)!==null&&r!==void 0?r:t.expiration;return{...t,...o?{originalExpiration:o}:{},expiration:s}},"getExtendedInstanceMetadataCredentials");df.getExtendedInstanceMetadataCredentials=zV});var vx=u(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});uf.staticStabilityProvider=void 0;var Ex=wx(),WV=n((t,e={})=>{let r=e?.logger||console,i;return async()=>{let s;try{s=await t(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=(0,Ex.getExtendedInstanceMetadataCredentials)(s,r))}catch(o){if(i)r.warn("Credential renew failed: ",o),s=(0,Ex.getExtendedInstanceMetadataCredentials)(i,r);else throw o}return i=s,s}},"staticStabilityProvider");uf.staticStabilityProvider=WV});var xx=u(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});lf.fromInstanceMetadata=void 0;var UV=ee(),dw=Zp(),Sx=iw(),jV=ef(),Nx=nw(),VV=cw(),$V=vx(),bx="/latest/meta-data/iam/security-credentials/",HV="/latest/api/token",GV=n((t={})=>(0,$V.staticStabilityProvider)(BV(t),{logger:t.logger}),"fromInstanceMetadata");lf.fromInstanceMetadata=GV;var BV=n(t=>{let e=!1,{timeout:r,maxRetries:i}=(0,jV.providerConfigFromInit)(t),s=n(async(o,a)=>{let c=(await(0,Nx.retry)(async()=>{let l;try{l=await KV(a)}catch(p){throw p.statusCode===401&&(e=!1),p}return l},o)).trim();return(0,Nx.retry)(async()=>{let l;try{l=await YV(c,a)}catch(p){throw p.statusCode===401&&(e=!1),p}return l},o)},"getCredentials");return async()=>{let o=await(0,VV.getInstanceMetadataEndpoint)();if(e)return s(i,{...o,timeout:r});{let a;try{a=(await JV({...o,timeout:r})).toString()}catch(c){if(c?.statusCode===400)throw Object.assign(c,{message:"EC2 Metadata token request returned error"});return(c.message==="TimeoutError"||[403,404,405].includes(c.statusCode))&&(e=!0),s(i,{...o,timeout:r})}return s(i,{...o,headers:{"x-aws-ec2-metadata-token":a},timeout:r})}}},"getInstanceImdsProvider"),JV=n(async t=>(0,dw.httpRequest)({...t,path:HV,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),"getMetadataToken"),KV=n(async t=>(await(0,dw.httpRequest)({...t,path:bx})).toString(),"getProfile"),YV=n(async(t,e)=>{let r=JSON.parse((await(0,dw.httpRequest)({...e,path:bx+t})).toString());if(!(0,Sx.isImdsCredentials)(r))throw new UV.CredentialsProviderError("Invalid response received from instance metadata service.");return(0,Sx.fromImdsCredentials)(r)},"getCredentialsFromProfile")});var Ox=u(Ax=>{"use strict";Object.defineProperty(Ax,"__esModule",{value:!0})});var ff=u(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.getInstanceMetadataEndpoint=kr.httpRequest=void 0;var pf=(A(),b(x));pf.__exportStar(ax(),kr);pf.__exportStar(xx(),kr);pf.__exportStar(ef(),kr);pf.__exportStar(Ox(),kr);var QV=Zp();Object.defineProperty(kr,"httpRequest",{enumerable:!0,get:function(){return QV.httpRequest}});var XV=cw();Object.defineProperty(kr,"getInstanceMetadataEndpoint",{enumerable:!0,get:function(){return XV.getInstanceMetadataEndpoint}})});var Px=u(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});mf.resolveCredentialSource=void 0;var ZV=Kg(),Tx=ff(),e2=ee(),t2=n((t,e)=>{let r={EcsContainer:Tx.fromContainerMetadata,Ec2InstanceMetadata:Tx.fromInstanceMetadata,Environment:ZV.fromEnv};if(t in r)return r[t]();throw new e2.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)},"resolveCredentialSource");mf.resolveCredentialSource=t2});var Rx=u(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.resolveAssumeRoleCredentials=Go.isAssumeRoleProfile=void 0;var uw=ee(),r2=Rr(),i2=Px(),n2=lw(),s2=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(o2(t)||a2(t)),"isAssumeRoleProfile");Go.isAssumeRoleProfile=s2;var o2=n(t=>typeof t.source_profile=="string"&&typeof t.credential_source>"u","isAssumeRoleWithSourceProfile"),a2=n(t=>typeof t.credential_source=="string"&&typeof t.source_profile>"u","isAssumeRoleWithProviderProfile"),c2=n(async(t,e,r,i={})=>{let s=e[t];if(!r.roleAssumer)throw new uw.CredentialsProviderError(`Profile ${t} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:o}=s;if(o&&o in i)throw new uw.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${(0,r2.getProfileName)(r)}. Profiles visited: `+Object.keys(i).join(", "),!1);let a=o?(0,n2.resolveProfileData)(o,e,r,{...i,[o]:!0}):(0,i2.resolveCredentialSource)(s.credential_source,t)(),c={RoleArn:s.role_arn,RoleSessionName:s.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:s.external_id},{mfa_serial:l}=s;if(l){if(!r.mfaCodeProvider)throw new uw.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,!1);c.SerialNumber=l,c.TokenCode=await r.mfaCodeProvider(l)}let p=await a;return r.roleAssumer(p,c)},"resolveAssumeRoleCredentials");Go.resolveAssumeRoleCredentials=c2});var Ix=u(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});hf.getValidatedProcessCredentials=void 0;var d2=n((t,e)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let r=new Date;if(new Date(e.Expiration)<r)throw Error(`Profile ${t} credential_process returned expired credentials.`)}return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)}}},"getValidatedProcessCredentials");hf.getValidatedProcessCredentials=d2});var qx=u(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});_f.resolveProcessCredentials=void 0;var pw=ee(),u2=W("child_process"),l2=W("util"),p2=Ix(),f2=n(async(t,e)=>{let r=e[t];if(e[t]){let i=r.credential_process;if(i!==void 0){let s=(0,l2.promisify)(u2.exec);try{let{stdout:o}=await s(i),a;try{a=JSON.parse(o.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return(0,p2.getValidatedProcessCredentials)(t,a)}catch(o){throw new pw.CredentialsProviderError(o.message)}}else throw new pw.CredentialsProviderError(`Profile ${t} did not contain credential_process.`)}else throw new pw.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`)},"resolveProcessCredentials");_f.resolveProcessCredentials=f2});var kx=u(yf=>{"use strict";Object.defineProperty(yf,"__esModule",{value:!0});yf.fromProcess=void 0;var Cx=Rr(),m2=qx(),h2=n((t={})=>async()=>{let e=await(0,Cx.parseKnownFiles)(t);return(0,m2.resolveProcessCredentials)((0,Cx.getProfileName)(t),e)},"fromProcess");yf.fromProcess=h2});var mw=u(fw=>{"use strict";Object.defineProperty(fw,"__esModule",{value:!0});var _2=(A(),b(x));_2.__exportStar(kx(),fw)});var Mx=u(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.resolveProcessCredentials=Bo.isProcessProfile=void 0;var y2=mw(),g2=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.credential_process=="string","isProcessProfile");Bo.isProcessProfile=g2;var w2=n(async(t,e)=>(0,y2.fromProcess)({...t,profile:e})(),"resolveProcessCredentials");Bo.resolveProcessCredentials=w2});var hw=u(gf=>{"use strict";Object.defineProperty(gf,"__esModule",{value:!0});gf.isSsoProfile=void 0;var E2=n(t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),"isSsoProfile");gf.isSsoProfile=E2});var Ef=u(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});wf.SSOServiceException=void 0;var v2=k(),Jo=class extends v2.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,Jo.prototype)}};n(Jo,"SSOServiceException");wf.SSOServiceException=Jo});var os=u(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.LogoutRequestFilterSensitiveLog=J.ListAccountsResponseFilterSensitiveLog=J.ListAccountsRequestFilterSensitiveLog=J.ListAccountRolesResponseFilterSensitiveLog=J.RoleInfoFilterSensitiveLog=J.ListAccountRolesRequestFilterSensitiveLog=J.GetRoleCredentialsResponseFilterSensitiveLog=J.RoleCredentialsFilterSensitiveLog=J.GetRoleCredentialsRequestFilterSensitiveLog=J.AccountInfoFilterSensitiveLog=J.UnauthorizedException=J.TooManyRequestsException=J.ResourceNotFoundException=J.InvalidRequestException=void 0;var Zo=k(),vf=Ef(),Ko=class extends vf.SSOServiceException{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Ko.prototype)}};n(Ko,"InvalidRequestException");J.InvalidRequestException=Ko;var Yo=class extends vf.SSOServiceException{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Yo.prototype)}};n(Yo,"ResourceNotFoundException");J.ResourceNotFoundException=Yo;var Qo=class extends vf.SSOServiceException{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,Qo.prototype)}};n(Qo,"TooManyRequestsException");J.TooManyRequestsException=Qo;var Xo=class extends vf.SSOServiceException{constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,Xo.prototype)}};n(Xo,"UnauthorizedException");J.UnauthorizedException=Xo;var S2=n(t=>({...t}),"AccountInfoFilterSensitiveLog");J.AccountInfoFilterSensitiveLog=S2;var N2=n(t=>({...t,...t.accessToken&&{accessToken:Zo.SENSITIVE_STRING}}),"GetRoleCredentialsRequestFilterSensitiveLog");J.GetRoleCredentialsRequestFilterSensitiveLog=N2;var b2=n(t=>({...t,...t.secretAccessKey&&{secretAccessKey:Zo.SENSITIVE_STRING},...t.sessionToken&&{sessionToken:Zo.SENSITIVE_STRING}}),"RoleCredentialsFilterSensitiveLog");J.RoleCredentialsFilterSensitiveLog=b2;var x2=n(t=>({...t,...t.roleCredentials&&{roleCredentials:(0,J.RoleCredentialsFilterSensitiveLog)(t.roleCredentials)}}),"GetRoleCredentialsResponseFilterSensitiveLog");J.GetRoleCredentialsResponseFilterSensitiveLog=x2;var A2=n(t=>({...t,...t.accessToken&&{accessToken:Zo.SENSITIVE_STRING}}),"ListAccountRolesRequestFilterSensitiveLog");J.ListAccountRolesRequestFilterSensitiveLog=A2;var O2=n(t=>({...t}),"RoleInfoFilterSensitiveLog");J.RoleInfoFilterSensitiveLog=O2;var T2=n(t=>({...t}),"ListAccountRolesResponseFilterSensitiveLog");J.ListAccountRolesResponseFilterSensitiveLog=T2;var P2=n(t=>({...t,...t.accessToken&&{accessToken:Zo.SENSITIVE_STRING}}),"ListAccountsRequestFilterSensitiveLog");J.ListAccountsRequestFilterSensitiveLog=P2;var R2=n(t=>({...t}),"ListAccountsResponseFilterSensitiveLog");J.ListAccountsResponseFilterSensitiveLog=R2;var I2=n(t=>({...t,...t.accessToken&&{accessToken:Zo.SENSITIVE_STRING}}),"LogoutRequestFilterSensitiveLog");J.LogoutRequestFilterSensitiveLog=I2});var Zc=u(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.deserializeAws_restJson1LogoutCommand=ze.deserializeAws_restJson1ListAccountsCommand=ze.deserializeAws_restJson1ListAccountRolesCommand=ze.deserializeAws_restJson1GetRoleCredentialsCommand=ze.serializeAws_restJson1LogoutCommand=ze.serializeAws_restJson1ListAccountsCommand=ze.serializeAws_restJson1ListAccountRolesCommand=ze.serializeAws_restJson1GetRoleCredentialsCommand=void 0;var Sf=at(),$=k(),Nf=os(),bf=Ef(),q2=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a=ct({},Tf,{"x-amz-sso_bearer_token":t.accessToken}),c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/federation/credentials`,l=ct({role_name:[,(0,$.expectNonNull)(t.roleName,"roleName")],account_id:[,(0,$.expectNonNull)(t.accountId,"accountId")]}),p;return new Sf.HttpRequest({protocol:i,hostname:r,port:s,method:"GET",headers:a,path:c,query:l,body:p})},"serializeAws_restJson1GetRoleCredentialsCommand");ze.serializeAws_restJson1GetRoleCredentialsCommand=q2;var C2=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a=ct({},Tf,{"x-amz-sso_bearer_token":t.accessToken}),c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/assignment/roles`,l=ct({next_token:[,t.nextToken],max_result:[()=>t.maxResults!==void 0,()=>t.maxResults.toString()],account_id:[,(0,$.expectNonNull)(t.accountId,"accountId")]}),p;return new Sf.HttpRequest({protocol:i,hostname:r,port:s,method:"GET",headers:a,path:c,query:l,body:p})},"serializeAws_restJson1ListAccountRolesCommand");ze.serializeAws_restJson1ListAccountRolesCommand=C2;var k2=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a=ct({},Tf,{"x-amz-sso_bearer_token":t.accessToken}),c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/assignment/accounts`,l=ct({next_token:[,t.nextToken],max_result:[()=>t.maxResults!==void 0,()=>t.maxResults.toString()]}),p;return new Sf.HttpRequest({protocol:i,hostname:r,port:s,method:"GET",headers:a,path:c,query:l,body:p})},"serializeAws_restJson1ListAccountsCommand");ze.serializeAws_restJson1ListAccountsCommand=k2;var M2=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a=ct({},Tf,{"x-amz-sso_bearer_token":t.accessToken}),c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/logout`,l;return new Sf.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1LogoutCommand");ze.serializeAws_restJson1LogoutCommand=M2;var D2=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return F2(t,e);let r=ct({$metadata:pn(t)}),i=(0,$.expectNonNull)((0,$.expectObject)(await Pf(t.body,e)),"body");return i.roleCredentials!=null&&(r.roleCredentials=G2(i.roleCredentials,e)),r},"deserializeAws_restJson1GetRoleCredentialsCommand");ze.deserializeAws_restJson1GetRoleCredentialsCommand=D2;var F2=n(async(t,e)=>{let r={...t,body:await Rf(t.body,e)},i=If(t,r.body);switch(i){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await xf(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await _w(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Af(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Of(r,e);default:let s=r.body;(0,$.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:bf.SSOServiceException,errorCode:i})}},"deserializeAws_restJson1GetRoleCredentialsCommandError"),L2=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return z2(t,e);let r=ct({$metadata:pn(t)}),i=(0,$.expectNonNull)((0,$.expectObject)(await Pf(t.body,e)),"body");return i.nextToken!=null&&(r.nextToken=(0,$.expectString)(i.nextToken)),i.roleList!=null&&(r.roleList=J2(i.roleList,e)),r},"deserializeAws_restJson1ListAccountRolesCommand");ze.deserializeAws_restJson1ListAccountRolesCommand=L2;var z2=n(async(t,e)=>{let r={...t,body:await Rf(t.body,e)},i=If(t,r.body);switch(i){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await xf(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await _w(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Af(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Of(r,e);default:let s=r.body;(0,$.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:bf.SSOServiceException,errorCode:i})}},"deserializeAws_restJson1ListAccountRolesCommandError"),W2=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return U2(t,e);let r=ct({$metadata:pn(t)}),i=(0,$.expectNonNull)((0,$.expectObject)(await Pf(t.body,e)),"body");return i.accountList!=null&&(r.accountList=H2(i.accountList,e)),i.nextToken!=null&&(r.nextToken=(0,$.expectString)(i.nextToken)),r},"deserializeAws_restJson1ListAccountsCommand");ze.deserializeAws_restJson1ListAccountsCommand=W2;var U2=n(async(t,e)=>{let r={...t,body:await Rf(t.body,e)},i=If(t,r.body);switch(i){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await xf(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await _w(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Af(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Of(r,e);default:let s=r.body;(0,$.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:bf.SSOServiceException,errorCode:i})}},"deserializeAws_restJson1ListAccountsCommandError"),j2=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return V2(t,e);let r=ct({$metadata:pn(t)});return await Dx(t.body,e),r},"deserializeAws_restJson1LogoutCommand");ze.deserializeAws_restJson1LogoutCommand=j2;var V2=n(async(t,e)=>{let r={...t,body:await Rf(t.body,e)},i=If(t,r.body);switch(i){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await xf(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Af(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Of(r,e);default:let s=r.body;(0,$.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:bf.SSOServiceException,errorCode:i})}},"deserializeAws_restJson1LogoutCommandError"),ct=$.map,xf=n(async(t,e)=>{let r=ct({}),i=t.body;i.message!=null&&(r.message=(0,$.expectString)(i.message));let s=new Nf.InvalidRequestException({$metadata:pn(t),...r});return(0,$.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidRequestExceptionResponse"),_w=n(async(t,e)=>{let r=ct({}),i=t.body;i.message!=null&&(r.message=(0,$.expectString)(i.message));let s=new Nf.ResourceNotFoundException({$metadata:pn(t),...r});return(0,$.decorateServiceException)(s,t.body)},"deserializeAws_restJson1ResourceNotFoundExceptionResponse"),Af=n(async(t,e)=>{let r=ct({}),i=t.body;i.message!=null&&(r.message=(0,$.expectString)(i.message));let s=new Nf.TooManyRequestsException({$metadata:pn(t),...r});return(0,$.decorateServiceException)(s,t.body)},"deserializeAws_restJson1TooManyRequestsExceptionResponse"),Of=n(async(t,e)=>{let r=ct({}),i=t.body;i.message!=null&&(r.message=(0,$.expectString)(i.message));let s=new Nf.UnauthorizedException({$metadata:pn(t),...r});return(0,$.decorateServiceException)(s,t.body)},"deserializeAws_restJson1UnauthorizedExceptionResponse"),$2=n((t,e)=>({accountId:(0,$.expectString)(t.accountId),accountName:(0,$.expectString)(t.accountName),emailAddress:(0,$.expectString)(t.emailAddress)}),"deserializeAws_restJson1AccountInfo"),H2=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:$2(i,e)),"deserializeAws_restJson1AccountListType"),G2=n((t,e)=>({accessKeyId:(0,$.expectString)(t.accessKeyId),expiration:(0,$.expectLong)(t.expiration),secretAccessKey:(0,$.expectString)(t.secretAccessKey),sessionToken:(0,$.expectString)(t.sessionToken)}),"deserializeAws_restJson1RoleCredentials"),B2=n((t,e)=>({accountId:(0,$.expectString)(t.accountId),roleName:(0,$.expectString)(t.roleName)}),"deserializeAws_restJson1RoleInfo"),J2=n((t,e)=>(t||[]).filter(i=>i!=null).map(i=>i===null?null:B2(i,e)),"deserializeAws_restJson1RoleListType"),pn=n(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),Dx=n((t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),"collectBody"),K2=n((t,e)=>Dx(t,e).then(r=>e.utf8Encoder(r)),"collectBodyString"),Tf=n(t=>t!=null&&t!==""&&(!Object.getOwnPropertyNames(t).includes("length")||t.length!=0)&&(!Object.getOwnPropertyNames(t).includes("size")||t.size!=0),"isSerializableHeaderValue"),Pf=n((t,e)=>K2(t,e).then(r=>r.length?JSON.parse(r):{}),"parseBody"),Rf=n(async(t,e)=>{let r=await Pf(t,e);return r.message=r.message??r.Message,r},"parseErrorBody"),If=n((t,e)=>{let r=n((o,a)=>Object.keys(o).find(c=>c.toLowerCase()===a.toLowerCase()),"findKey"),i=n(o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},"sanitizeErrorCode"),s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return i(t.headers[s]);if(e.code!==void 0)return i(e.code);if(e.__type!==void 0)return i(e.__type)},"loadRestJsonErrorCode")});var yw=u(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.GetRoleCredentialsCommand=void 0;var Y2=ne(),Q2=ge(),X2=k(),Fx=os(),Lx=Zc(),ea=class extends X2.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,Q2.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,Y2.getEndpointPlugin)(r,ea.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:Fx.GetRoleCredentialsRequestFilterSensitiveLog,outputFilterSensitiveLog:Fx.GetRoleCredentialsResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,Lx.serializeAws_restJson1GetRoleCredentialsCommand)(e,r)}deserialize(e,r){return(0,Lx.deserializeAws_restJson1GetRoleCredentialsCommand)(e,r)}};n(ea,"GetRoleCredentialsCommand");qf.GetRoleCredentialsCommand=ea});var kf=u(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.ListAccountRolesCommand=void 0;var Z2=ne(),e$=ge(),t$=k(),zx=os(),Wx=Zc(),ta=class extends t$.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,e$.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,Z2.getEndpointPlugin)(r,ta.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOClient",commandName:"ListAccountRolesCommand",inputFilterSensitiveLog:zx.ListAccountRolesRequestFilterSensitiveLog,outputFilterSensitiveLog:zx.ListAccountRolesResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,Wx.serializeAws_restJson1ListAccountRolesCommand)(e,r)}deserialize(e,r){return(0,Wx.deserializeAws_restJson1ListAccountRolesCommand)(e,r)}};n(ta,"ListAccountRolesCommand");Cf.ListAccountRolesCommand=ta});var Df=u(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.ListAccountsCommand=void 0;var r$=ne(),i$=ge(),n$=k(),Ux=os(),jx=Zc(),ra=class extends n$.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,i$.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,r$.getEndpointPlugin)(r,ra.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOClient",commandName:"ListAccountsCommand",inputFilterSensitiveLog:Ux.ListAccountsRequestFilterSensitiveLog,outputFilterSensitiveLog:Ux.ListAccountsResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,jx.serializeAws_restJson1ListAccountsCommand)(e,r)}deserialize(e,r){return(0,jx.deserializeAws_restJson1ListAccountsCommand)(e,r)}};n(ra,"ListAccountsCommand");Mf.ListAccountsCommand=ra});var gw=u(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});Ff.LogoutCommand=void 0;var s$=ne(),o$=ge(),a$=k(),c$=os(),Vx=Zc(),ia=class extends a$.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,o$.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,s$.getEndpointPlugin)(r,ia.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOClient",commandName:"LogoutCommand",inputFilterSensitiveLog:c$.LogoutRequestFilterSensitiveLog,outputFilterSensitiveLog:f=>f},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,Vx.serializeAws_restJson1LogoutCommand)(e,r)}deserialize(e,r){return(0,Vx.deserializeAws_restJson1LogoutCommand)(e,r)}};n(ia,"LogoutCommand");Ff.LogoutCommand=ia});var $x=u(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.resolveClientEndpointParameters=void 0;var d$=n(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),"resolveClientEndpointParameters");Lf.resolveClientEndpointParameters=d$});var Hx=u((M_e,u$)=>{u$.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var ed=u(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.Hash=void 0;var ww=bo(),l$=yi(),p$=W("buffer"),Gx=W("crypto"),zf=class{constructor(e,r){this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update((0,l$.toUint8Array)(Bx(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,Gx.createHmac)(this.algorithmIdentifier,Bx(this.secret)):(0,Gx.createHash)(this.algorithmIdentifier)}};n(zf,"Hash");Wf.Hash=zf;function Bx(t,e){return p$.Buffer.isBuffer(t)?t:typeof t=="string"?(0,ww.fromString)(t,e):ArrayBuffer.isView(t)?(0,ww.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength):(0,ww.fromArrayBuffer)(t)}n(Bx,"castSourceData")});var vw=u(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.buildQueryString=void 0;var Ew=vg();function f$(t){let e=[];for(let r of Object.keys(t).sort()){let i=t[r];if(r=(0,Ew.escapeUri)(r),Array.isArray(i))for(let s=0,o=i.length;s<o;s++)e.push(`${r}=${(0,Ew.escapeUri)(i[s])}`);else{let s=r;(i||typeof i=="string")&&(s+=`=${(0,Ew.escapeUri)(i)}`),e.push(s)}}return e.join("&")}n(f$,"buildQueryString");Uf.buildQueryString=f$});var Jx=u(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.NODEJS_TIMEOUT_ERROR_CODES=void 0;jf.NODEJS_TIMEOUT_ERROR_CODES=["ECONNRESET","EPIPE","ETIMEDOUT"]});var Sw=u(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.getTransformedHeaders=void 0;var m$=n(t=>{let e={};for(let r of Object.keys(t)){let i=t[r];e[r]=Array.isArray(i)?i.join(","):i}return e},"getTransformedHeaders");Vf.getTransformedHeaders=m$});var Kx=u($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.setConnectionTimeout=void 0;var h$=n((t,e,r=0)=>{r&&t.on("socket",i=>{if(i.connecting){let s=setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);i.on("connect",()=>{clearTimeout(s)})}})},"setConnectionTimeout");$f.setConnectionTimeout=h$});var Yx=u(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.setSocketTimeout=void 0;var _$=n((t,e,r=0)=>{t.setTimeout(r,()=>{t.destroy(),e(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})},"setSocketTimeout");Hf.setSocketTimeout=_$});var Nw=u(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.writeRequestBody=void 0;var y$=W("stream");function g$(t,e){(e.headers.Expect||e.headers.expect)==="100-continue"?t.on("continue",()=>{Qx(t,e.body)}):Qx(t,e.body)}n(g$,"writeRequestBody");Gf.writeRequestBody=g$;function Qx(t,e){e instanceof y$.Readable?e.pipe(t):e?t.end(Buffer.from(e)):t.end()}n(Qx,"writeBody")});var eA=u(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.NodeHttpHandler=void 0;var w$=at(),E$=vw(),Xx=W("http"),Zx=W("https"),v$=Jx(),S$=Sw(),N$=Kx(),b$=Yx(),x$=Nw(),Bf=class{constructor(e){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,i)=>{typeof e=="function"?e().then(s=>{r(this.resolveDefaultConfig(s))}).catch(i):r(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{connectionTimeout:r,socketTimeout:i,httpAgent:s,httpsAgent:o}=e||{},a=!0,c=50;return{connectionTimeout:r,socketTimeout:i,httpAgent:s||new Xx.Agent({keepAlive:a,maxSockets:c}),httpsAgent:o||new Zx.Agent({keepAlive:a,maxSockets:c})}}destroy(){var e,r,i,s;(r=(e=this.config)===null||e===void 0?void 0:e.httpAgent)===null||r===void 0||r.destroy(),(s=(i=this.config)===null||i===void 0?void 0:i.httpsAgent)===null||s===void 0||s.destroy()}async handle(e,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((i,s)=>{if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let f=new Error("Request aborted");f.name="AbortError",s(f);return}let o=e.protocol==="https:",a=(0,E$.buildQueryString)(e.query||{}),c={headers:e.headers,host:e.hostname,method:e.method,path:a?`${e.path}?${a}`:e.path,port:e.port,agent:o?this.config.httpsAgent:this.config.httpAgent},p=(o?Zx.request:Xx.request)(c,f=>{let m=new w$.HttpResponse({statusCode:f.statusCode||-1,headers:(0,S$.getTransformedHeaders)(f.headers),body:f});i({response:m})});p.on("error",f=>{v$.NODEJS_TIMEOUT_ERROR_CODES.includes(f.code)?s(Object.assign(f,{name:"TimeoutError"})):s(f)}),(0,N$.setConnectionTimeout)(p,s,this.config.connectionTimeout),(0,b$.setSocketTimeout)(p,s,this.config.socketTimeout),r&&(r.onabort=()=>{p.abort();let f=new Error("Request aborted");f.name="AbortError",s(f)}),(0,x$.writeRequestBody)(p,e)})}};n(Bf,"NodeHttpHandler");Jf.NodeHttpHandler=Bf});var tA=u(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.NodeHttp2Handler=void 0;var A$=at(),O$=vw(),bw=W("http2"),T$=Sw(),P$=Nw(),Kf=class{constructor(e){this.metadata={handlerProtocol:"h2"},this.configProvider=new Promise((r,i)=>{typeof e=="function"?e().then(s=>{r(s||{})}).catch(i):r(e||{})}),this.sessionCache=new Map}destroy(){for(let e of this.sessionCache.values())e.forEach(r=>this.destroySession(r));this.sessionCache.clear()}async handle(e,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);let{requestTimeout:i,disableConcurrentStreams:s}=this.config;return new Promise((o,a)=>{let c=!1;if(r?.aborted){c=!0;let be=new Error("Request aborted");be.name="AbortError",a(be);return}let{hostname:l,method:p,port:f,protocol:m,path:h,query:_}=e,w=`${m}//${l}${f?`:${f}`:""}`,g=this.getSession(w,s||!1),S=n(be=>{s&&this.destroySession(g),c=!0,a(be)},"reject"),ie=(0,O$.buildQueryString)(_||{}),ke=g.request({...e.headers,[bw.constants.HTTP2_HEADER_PATH]:ie?`${h}?${ie}`:h,[bw.constants.HTTP2_HEADER_METHOD]:p});g.ref(),ke.on("response",be=>{let Bd=new A$.HttpResponse({statusCode:be[":status"]||-1,headers:(0,T$.getTransformedHeaders)(be),body:ke});c=!0,o({response:Bd}),s&&(g.close(),this.deleteSessionFromCache(w,g))}),i&&ke.setTimeout(i,()=>{ke.close();let be=new Error(`Stream timed out because of no activity for ${i} ms`);be.name="TimeoutError",S(be)}),r&&(r.onabort=()=>{ke.close();let be=new Error("Request aborted");be.name="AbortError",S(be)}),ke.on("frameError",(be,Bd,$E)=>{S(new Error(`Frame type id ${be} in stream id ${$E} has failed with code ${Bd}.`))}),ke.on("error",S),ke.on("aborted",()=>{S(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${ke.rstCode}.`))}),ke.on("close",()=>{g.unref(),s&&g.destroy(),c||S(new Error("Unexpected error: http2 request did not get a response"))}),(0,P$.writeRequestBody)(ke,e)})}getSession(e,r){var i;let s=this.sessionCache,o=s.get(e)||[];if(o.length>0&&!r)return o[0];let a=(0,bw.connect)(e);a.unref();let c=n(()=>{this.destroySession(a),this.deleteSessionFromCache(e,a)},"destroySessionCb");return a.on("goaway",c),a.on("error",c),a.on("frameError",c),a.on("close",()=>this.deleteSessionFromCache(e,a)),!((i=this.config)===null||i===void 0)&&i.sessionTimeout&&a.setTimeout(this.config.sessionTimeout,c),o.push(a),s.set(e,o),a}destroySession(e){e.destroyed||e.destroy()}deleteSessionFromCache(e,r){let i=this.sessionCache.get(e)||[];i.includes(r)&&this.sessionCache.set(e,i.filter(s=>s!==r))}};n(Kf,"NodeHttp2Handler");Yf.NodeHttp2Handler=Kf});var rA=u(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.Collector=void 0;var R$=W("stream"),Qf=class extends R$.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(e,r,i){this.bufferedBytes.push(e),i()}};n(Qf,"Collector");Xf.Collector=Qf});var iA=u(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.streamCollector=void 0;var I$=rA(),q$=n(t=>new Promise((e,r)=>{let i=new I$.Collector;t.pipe(i),t.on("error",s=>{i.end(),r(s)}),i.on("error",r),i.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));e(s)})}),"streamCollector");Zf.streamCollector=q$});var rd=u(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});var xw=(A(),b(x));xw.__exportStar(eA(),td);xw.__exportStar(tA(),td);xw.__exportStar(iA(),td)});var sA=u(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});em.calculateBodyLength=void 0;var nA=W("fs"),C$=n(t=>{if(!t)return 0;if(typeof t=="string")return Buffer.from(t).length;if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.path=="string"||Buffer.isBuffer(t.path))return(0,nA.lstatSync)(t.path).size;if(typeof t.fd=="number")return(0,nA.fstatSync)(t.fd).size;throw new Error(`Body Length computation failed for ${t}`)},"calculateBodyLength");em.calculateBodyLength=C$});var id=u(Aw=>{"use strict";Object.defineProperty(Aw,"__esModule",{value:!0});var k$=(A(),b(x));k$.__exportStar(sA(),Aw)});var oA=u((aye,M$)=>{M$.exports={name:"aws-crt",version:"1.15.9",description:"NodeJS/browser bindings to the aws-c-* libraries",homepage:"https://github.com/awslabs/aws-crt-nodejs",repository:{type:"git",url:"git+https://github.com/awslabs/aws-crt-nodejs.git"},contributors:["AWS Common Runtime Team <aws-sdk-common-runtime@amazon.com>"],license:"Apache-2.0",main:"./dist/index.js",browser:"./dist.browser/browser.js",types:"./dist/index.d.ts",scripts:{tsc:"node ./scripts/tsc.js",test:"npm run test:native","test:node":"npm run test:native","test:native":"npx jest --runInBand --verbose --config test/native/jest.config.js --forceExit","test:browser":"npx jest --runInBand --verbose --config test/browser/jest.config.js --forceExit","test:browser:ci":"npm run install:puppeteer && npm run test:browser","install:puppeteer":"npm install --save-dev jest-puppeteer puppeteer @types/puppeteer",prepare:"node ./scripts/tsc.js && node ./scripts/install.js",install:"node ./scripts/install.js"},devDependencies:{"@types/crypto-js":"^3.1.43","@types/jest":"^27.0.1","@types/node":"^10.17.54","@types/prettier":"2.6.0","@types/puppeteer":"^5.4.4","@types/uuid":"^3.4.8","@types/ws":"^7.4.7","aws-sdk":"^2.848.0","https-proxy-agent":"^5.0.1",jest:"^27.2.1","jest-puppeteer":"^5.0.4","jest-runtime":"^27.2.1",puppeteer:"^3.3.0","ts-jest":"^27.0.5",typedoc:"^0.22.18","typedoc-plugin-merge-modules":"^3.1.0",typescript:"^4.7.4",uuid:"^8.3.2",yargs:"^17.2.1","cmake-js":"^6.3.2",tar:"^6.1.11"},dependencies:{"@aws-sdk/util-utf8-browser":"^3.109.0","@httptoolkit/websocket-stream":"^6.0.0",axios:"^0.24.0","crypto-js":"^4.0.0",mqtt:"^4.3.7","cmake-js":"^6.3.2",tar:"^6.1.11"}}});var tm=u(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.crt_version=Mr.package_info=Mr.is_browser=Mr.is_nodejs=void 0;function aA(){return typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node<"u"}n(aA,"is_nodejs");Mr.is_nodejs=aA;function D$(){return!aA()}n(D$,"is_browser");Mr.is_browser=D$;function cA(){try{return oA()}catch{return{name:"aws-crt-nodejs",version:"UNKNOWN"}}}n(cA,"package_info");Mr.package_info=cA;function F$(){return cA().version}n(F$,"crt_version");Mr.crt_version=F$});var dA=u(na=>{"use strict";var L$=na&&na.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})};Object.defineProperty(na,"__esModule",{value:!0});na.using=void 0;function z$(t,e){return L$(this,void 0,void 0,function*(){try{yield e(t)}finally{t.close()}})}n(z$,"using");na.using=z$});var Dr=u(Si=>{"use strict";var W$=Si&&Si.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),U$=Si&&Si.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),j$=Si&&Si.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&W$(e,t,r);return U$(e,t),e};Object.defineProperty(Si,"__esModule",{value:!0});var rm=j$(W("path")),uA=W("os"),mA=W("fs"),lA=W("process"),pA="Please upgrade to node >=10.16.0, or use the provided browser implementation.";if("napi"in lA.versions){if(parseInt(lA.versions.napi)<4)throw new Error("The AWS CRT native implementation requires that NAPI version 4 be present. "+pA)}else throw new Error("The current runtime is not reporting an NAPI version. "+pA);var V$="aws-crt-nodejs",$$=`${uA.platform}-${uA.arch}`,Ow=rm.resolve(__dirname,"..",".."),fA=rm.join(Ow,"dist");(0,mA.existsSync)(fA)&&(Ow=fA);var H$=rm.resolve(Ow,"bin"),hA=[rm.join(H$,$$,V$)],Tw;for(let t of hA)if((0,mA.existsSync)(t+".node")){Tw=W(t);break}if(Tw==null)throw new Error(`AWS CRT binary not present in any of the following locations:
	`+hA.join(`
	`));Si.default=Tw});var fn=u(sa=>{"use strict";var G$=sa&&sa.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sa,"__esModule",{value:!0});sa.CrtError=void 0;var _A=G$(Dr()),as=class extends Error{constructor(e){super(B$(e)),this.error=e,this.error_code=J$(e),this.error_name=K$(e)}};n(as,"CrtError");sa.CrtError=as;function B$(t){return typeof t=="number"?_A.default.error_code_to_string(t):t instanceof as?t.message:t.toString()}n(B$,"extract_message");function J$(t){if(typeof t=="number")return t;if(t instanceof as)return t.error_code}n(J$,"extract_code");function K$(t){if(typeof t=="number")return _A.default.error_code_to_name(t);if(t instanceof as)return t.error_name}n(K$,"extract_name")});var aa=u(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.NativeResourceMixin=oa.NativeResource=void 0;var im=class{constructor(e){this.handle=e}native_handle(){return this.handle}};n(im,"NativeResource");oa.NativeResource=im;function Y$(t){return class extends t{constructor(...e){let r=e.shift();super(...e),this._handle=r}_super(e){this._handle=e}native_handle(){return this._handle}}}n(Y$,"NativeResourceMixin");oa.NativeResourceMixin=Y$});var Pw=u(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.SocketDomain=or.SocketType=or.TlsVersion=void 0;var Q$;(function(t){t[t.SSLv3=0]="SSLv3",t[t.TLSv1=1]="TLSv1",t[t.TLSv1_1=2]="TLSv1_1",t[t.TLSv1_2=3]="TLSv1_2",t[t.TLSv1_3=4]="TLSv1_3",t[t.Default=128]="Default"})(Q$=or.TlsVersion||(or.TlsVersion={}));var X$;(function(t){t[t.STREAM=0]="STREAM",t[t.DGRAM=1]="DGRAM"})(X$=or.SocketType||(or.SocketType={}));var Z$;(function(t){t[t.IPV4=0]="IPV4",t[t.IPV6=1]="IPV6",t[t.LOCAL=2]="LOCAL"})(Z$=or.SocketDomain||(or.SocketDomain={}))});var mn=u(F=>{"use strict";var eH=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(F,"__esModule",{value:!0});F.Pkcs11Lib=F.TlsConnectionOptions=F.ServerTlsContext=F.ClientTlsContext=F.TlsContext=F.TlsContextOptions=F.SocketOptions=F.ClientBootstrap=F.InputStream=F.is_alpn_available=F.enable_logging=F.LogLevel=F.error_code_to_name=F.error_code_to_string=F.SocketDomain=F.SocketType=F.TlsVersion=void 0;var qt=eH(Dr()),da=aa(),Rw=Pw(),Iw=Pw();Object.defineProperty(F,"TlsVersion",{enumerable:!0,get:function(){return Iw.TlsVersion}});Object.defineProperty(F,"SocketType",{enumerable:!0,get:function(){return Iw.SocketType}});Object.defineProperty(F,"SocketDomain",{enumerable:!0,get:function(){return Iw.SocketDomain}});function tH(t){return qt.default.error_code_to_string(t)}n(tH,"error_code_to_string");F.error_code_to_string=tH;function rH(t){return qt.default.error_code_to_name(t)}n(rH,"error_code_to_name");F.error_code_to_name=rH;var iH;(function(t){t[t.NONE=0]="NONE",t[t.FATAL=1]="FATAL",t[t.ERROR=2]="ERROR",t[t.WARN=3]="WARN",t[t.INFO=4]="INFO",t[t.DEBUG=5]="DEBUG",t[t.TRACE=6]="TRACE"})(iH=F.LogLevel||(F.LogLevel={}));function nH(t){qt.default.io_logging_enable(t)}n(nH,"enable_logging");F.enable_logging=nH;function sH(){return qt.default.is_alpn_available()}n(sH,"is_alpn_available");F.is_alpn_available=sH;var nm=class extends da.NativeResource{constructor(e){super(qt.default.io_input_stream_new(16*1024)),this.source=e,this.source.on("data",r=>{r=Buffer.isBuffer(r)?r:new Buffer(r.toString(),"utf8"),qt.default.io_input_stream_append(this.native_handle(),r)}),this.source.on("end",()=>{qt.default.io_input_stream_append(this.native_handle(),void 0)})}};n(nm,"InputStream");F.InputStream=nm;var sm=class extends da.NativeResource{constructor(){super(qt.default.io_client_bootstrap_new())}};n(sm,"ClientBootstrap");F.ClientBootstrap=sm;var om=class extends da.NativeResource{constructor(e=Rw.SocketType.STREAM,r=Rw.SocketDomain.IPV6,i=5e3,s=!1,o=0,a=0,c=0){super(qt.default.io_socket_options_new(e,r,i,o,a,c,s))}};n(om,"SocketOptions");F.SocketOptions=om;var wt=class{constructor(){this.min_tls_version=Rw.TlsVersion.Default,this.alpn_list=[],this.verify_peer=!0}override_default_trust_store_from_path(e,r){this.ca_dirpath=e,this.ca_filepath=r}override_default_trust_store(e){this.certificate_authority=e}static create_client_with_mtls(e,r){let i=new wt;return i.certificate=e,i.private_key=r,i.verify_peer=!0,i}static create_client_with_mtls_from_path(e,r){let i=new wt;return i.certificate_filepath=e,i.private_key_filepath=r,i.verify_peer=!0,i}static create_client_with_mtls_pkcs12_from_path(e,r){let i=new wt;return i.pkcs12_filepath=e,i.pkcs12_password=r,i.verify_peer=!0,i}static create_client_with_mtls_pkcs_from_path(e,r){return this.create_client_with_mtls_pkcs12_from_path(e,r)}static create_client_with_mtls_pkcs11(e){let r=new wt;return r.pkcs11_options=e,r.verify_peer=!0,r}static create_client_with_mtls_windows_cert_store_path(e){let r=new wt;return r.windows_cert_store_path=e,r.verify_peer=!0,r}static create_server_with_mtls_from_path(e,r){let i=new wt;return i.certificate_filepath=e,i.private_key_filepath=r,i.verify_peer=!1,i}static create_server_with_mtls_pkcs_from_path(e,r){let i=new wt;return i.pkcs12_filepath=e,i.pkcs12_password=r,i.verify_peer=!1,i}};n(wt,"TlsContextOptions");F.TlsContextOptions=wt;var ca=class extends da.NativeResource{constructor(e){super(qt.default.io_tls_ctx_new(e.min_tls_version,e.ca_filepath,e.ca_dirpath,e.certificate_authority,e.alpn_list&&e.alpn_list.length>0?e.alpn_list.join(";"):void 0,e.certificate_filepath,e.certificate,e.private_key_filepath,e.private_key,e.pkcs12_filepath,e.pkcs12_password,e.pkcs11_options,e.windows_cert_store_path,e.verify_peer))}};n(ca,"TlsContext");F.TlsContext=ca;var am=class extends ca{constructor(e){e||(e=new wt,e.verify_peer=!0),super(e)}};n(am,"ClientTlsContext");F.ClientTlsContext=am;var cm=class extends ca{constructor(e){e||(e=new wt,e.verify_peer=!1),super(e)}};n(cm,"ServerTlsContext");F.ServerTlsContext=cm;var dm=class extends da.NativeResource{constructor(e,r,i=[]){super(qt.default.io_tls_connection_options_new(e.native_handle(),r,i&&i.length>0?i.join(";"):void 0)),this.tls_ctx=e,this.server_name=r,this.alpn_list=i}};n(dm,"TlsConnectionOptions");F.TlsConnectionOptions=dm;var cs=class extends da.NativeResource{constructor(e,r=cs.InitializeFinalizeBehavior.DEFAULT){super(qt.default.io_pkcs11_lib_new(e,r))}close(){qt.default.io_pkcs11_lib_close(this.native_handle())}};n(cs,"Pkcs11Lib");F.Pkcs11Lib=cs;(function(t){let e;(function(r){r[r.DEFAULT=0]="DEFAULT",r[r.OMIT=1]="OMIT",r[r.STRICT=2]="STRICT"})(e=t.InitializeFinalizeBehavior||(t.InitializeFinalizeBehavior={}))})(cs=F.Pkcs11Lib||(F.Pkcs11Lib={}))});var lm=u(fe=>{"use strict";var oH=fe&&fe.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})},aH=fe&&fe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fe,"__esModule",{value:!0});fe.aws_verify_sigv4a_signing=fe.aws_sign_request=fe.AwsSignedBodyHeaderType=fe.AwsSignedBodyValue=fe.AwsSignatureType=fe.AwsSigningAlgorithm=fe.AwsCredentialsProvider=void 0;var qw=aH(Dr()),cH=fn(),dH=mn(),um=class extends qw.default.AwsCredentialsProvider{static newDefault(e=void 0){return super.newDefault(e!=null?e.native_handle():null)}static newStatic(e,r,i){return super.newStatic(e,r,i)}static newCognito(e){return super.newCognito(e,e.tlsContext!=null?e.tlsContext.native_handle():new dH.ClientTlsContext().native_handle(),e.bootstrap!=null?e.bootstrap.native_handle():null,e.httpProxyOptions?e.httpProxyOptions.create_native_handle():null)}};n(um,"AwsCredentialsProvider");fe.AwsCredentialsProvider=um;var uH;(function(t){t[t.SigV4=0]="SigV4",t[t.SigV4Asymmetric=1]="SigV4Asymmetric"})(uH=fe.AwsSigningAlgorithm||(fe.AwsSigningAlgorithm={}));var lH;(function(t){t[t.HttpRequestViaHeaders=0]="HttpRequestViaHeaders",t[t.HttpRequestViaQueryParams=1]="HttpRequestViaQueryParams",t[t.HttpRequestChunk=2]="HttpRequestChunk",t[t.HttpRequestEvent=3]="HttpRequestEvent"})(lH=fe.AwsSignatureType||(fe.AwsSignatureType={}));var pH;(function(t){t.EmptySha256="e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",t.UnsignedPayload="UNSIGNED-PAYLOAD",t.StreamingAws4HmacSha256Payload="STREAMING-AWS4-HMAC-SHA256-PAYLOAD",t.StreamingAws4HmacSha256Events="STREAMING-AWS4-HMAC-SHA256-EVENTS"})(pH=fe.AwsSignedBodyValue||(fe.AwsSignedBodyValue={}));var fH;(function(t){t[t.None=0]="None",t[t.XAmzContentSha256=1]="XAmzContentSha256"})(fH=fe.AwsSignedBodyHeaderType||(fe.AwsSignedBodyHeaderType={}));function mH(t,e){return oH(this,void 0,void 0,function*(){return new Promise((r,i)=>{try{qw.default.aws_sign_request(t,e,s=>{s==0?r(t):i(new cH.CrtError(s))})}catch(s){i(s)}})})}n(mH,"aws_sign_request");fe.aws_sign_request=mH;function hH(t,e,r,i,s,o){return qw.default.aws_verify_sigv4a_signing(t,e,r,i,s,o)}n(hH,"aws_verify_sigv4a_signing");fe.aws_verify_sigv4a_signing=hH});var gA=u(hn=>{"use strict";var _H=hn&&hn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hn,"__esModule",{value:!0});hn.crc32c=hn.crc32=void 0;var yA=_H(Dr());function yH(t,e){return yA.default.checksums_crc32(t,e)}n(yH,"crc32");hn.crc32=yH;function gH(t,e){return yA.default.checksums_crc32c(t,e)}n(gH,"crc32c");hn.crc32c=gH});var EA=u(_n=>{"use strict";var wH=_n&&_n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_n,"__esModule",{value:!0});_n.native_memory_dump=_n.native_memory=void 0;var wA=wH(Dr());function EH(){return wA.default.native_memory()}n(EH,"native_memory");_n.native_memory=EH;function vH(){return wA.default.native_memory_dump()}n(vH,"native_memory_dump");_n.native_memory_dump=vH});var SA=u(Re=>{"use strict";var SH=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Re,"__esModule",{value:!0});Re.hmac_sha256=Re.Sha256Hmac=Re.hash_sha1=Re.Sha1Hash=Re.hash_sha256=Re.Sha256Hash=Re.hash_md5=Re.Md5Hash=void 0;var Vt=SH(Dr()),vA=aa(),ua=class extends vA.NativeResource{update(e){Vt.default.hash_update(this.native_handle(),e)}finalize(e){return Vt.default.hash_digest(this.native_handle(),e)}constructor(e){super(e)}};n(ua,"Hash");var pm=class extends ua{constructor(){super(Vt.default.hash_md5_new())}};n(pm,"Md5Hash");Re.Md5Hash=pm;function NH(t,e){return Vt.default.hash_md5_compute(t,e)}n(NH,"hash_md5");Re.hash_md5=NH;var fm=class extends ua{constructor(){super(Vt.default.hash_sha256_new())}};n(fm,"Sha256Hash");Re.Sha256Hash=fm;function bH(t,e){return Vt.default.hash_sha256_compute(t,e)}n(bH,"hash_sha256");Re.hash_sha256=bH;var mm=class extends ua{constructor(){super(Vt.default.hash_sha1_new())}};n(mm,"Sha1Hash");Re.Sha1Hash=mm;function xH(t,e){return Vt.default.hash_sha1_compute(t,e)}n(xH,"hash_sha1");Re.hash_sha1=xH;var hm=class extends vA.NativeResource{update(e){Vt.default.hmac_update(this.native_handle(),e)}finalize(e){return Vt.default.hmac_digest(this.native_handle(),e)}constructor(e){super(e)}};n(hm,"Hmac");var _m=class extends hm{constructor(e){super(Vt.default.hmac_sha256_new(e))}};n(_m,"Sha256Hmac");Re.Sha256Hmac=_m;function AH(t,e,r){return Vt.default.hmac_sha256_compute(t,e,r)}n(AH,"hmac_sha256");Re.hmac_sha256=AH});var Cw=u(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.CommonHttpProxyOptions=Fr.HttpProxyAuthenticationType=Fr.HttpVersion=void 0;var OH;(function(t){t[t.Unknown=0]="Unknown",t[t.Http1_0=1]="Http1_0",t[t.Http1_1=2]="Http1_1",t[t.Http2=3]="Http2"})(OH=Fr.HttpVersion||(Fr.HttpVersion={}));var NA;(function(t){t[t.None=0]="None",t[t.Basic=1]="Basic"})(NA=Fr.HttpProxyAuthenticationType||(Fr.HttpProxyAuthenticationType={}));var ym=class{constructor(e,r,i=NA.None,s,o){this.host_name=e,this.port=r,this.auth_method=i,this.auth_username=s,this.auth_password=o}};n(ym,"CommonHttpProxyOptions");Fr.CommonHttpProxyOptions=ym});var vm=u(Em=>{"use strict";Object.defineProperty(Em,"__esModule",{value:!0});Em.BufferedEventEmitter=void 0;var TH=W("events"),gm=class{constructor(e,r){this.event=e,this.args=r}};n(gm,"BufferedEvent");var wm=class extends TH.EventEmitter{constructor(){super(),this.corked=!1}cork(){this.corked=!0}uncork(){for(this.corked=!1;this.eventQueue;){let e=this.eventQueue;super.emit(e.event,...e.args),this.eventQueue=this.eventQueue.next}}emit(e,...r){if(this.corked){let i=this.lastQueuedEvent;return this.lastQueuedEvent=new gm(e,r),i?i.next=this.lastQueuedEvent:this.eventQueue=this.lastQueuedEvent,this.listeners(e).length>0}return super.emit(e,...r)}};n(wm,"BufferedEventEmitter");Em.BufferedEventEmitter=wm});var Am=u(oe=>{"use strict";var PH=oe&&oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oe,"__esModule",{value:!0});oe.HttpClientConnectionManager=oe.HttpClientStream=oe.HttpStream=oe.HttpClientConnection=oe.HttpProxyOptions=oe.HttpProxyConnectionType=oe.HttpConnection=oe.HttpRequest=oe.HttpHeaders=oe.HttpProxyAuthenticationType=void 0;var $t=PH(Dr()),kw=aa(),xm=fn(),bA=Cw(),RH=Cw();Object.defineProperty(oe,"HttpProxyAuthenticationType",{enumerable:!0,get:function(){return RH.HttpProxyAuthenticationType}});var xA=vm();oe.HttpHeaders=$t.default.HttpHeaders;var IH=$t.default.HttpRequest,Sm=class extends IH{constructor(e,r,i,s){super(e,r,i,s?.native_handle())}};n(Sm,"HttpRequest");oe.HttpRequest=Sm;var yn=class extends(0,kw.NativeResourceMixin)(xA.BufferedEventEmitter){constructor(e){super(),this._super(e)}close(){$t.default.http_connection_close(this.native_handle())}on(e,r){return super.on(e,r),e=="connect"&&process.nextTick(()=>{this.uncork()}),this}};n(yn,"HttpConnection");oe.HttpConnection=yn;yn.CONNECT="connect";yn.ERROR="error";yn.CLOSE="close";var AA;(function(t){t[t.Legacy=0]="Legacy",t[t.Forwarding=1]="Forwarding",t[t.Tunneling=2]="Tunneling"})(AA=oe.HttpProxyConnectionType||(oe.HttpProxyConnectionType={}));var Nm=class extends bA.CommonHttpProxyOptions{constructor(e,r,i=bA.HttpProxyAuthenticationType.None,s,o,a,c){super(e,r,i,s,o),this.tls_opts=a,this.connection_type=c}create_native_handle(){return $t.default.http_proxy_options_new(this.host_name,this.port,this.auth_method,this.auth_username,this.auth_password,this.tls_opts?this.tls_opts.native_handle():void 0,this.connection_type?this.connection_type:AA.Legacy)}};n(Nm,"HttpProxyOptions");oe.HttpProxyOptions=Nm;var nd=class extends yn{constructor(e,r,i,s,o,a,c){super(c||$t.default.http_connection_new(e!=null?e.native_handle():null,(l,p)=>{this._on_setup(l,p)},(l,p)=>{this._on_shutdown(l,p)},r,i,s.native_handle(),o?o.native_handle():void 0,a?a.create_native_handle():void 0)),this.bootstrap=e,this.socket_options=s,this.tls_opts=o}_on_setup(e,r){if(r){this.emit("error",new xm.CrtError(r));return}this.emit("connect")}_on_shutdown(e,r){if(r){this.emit("error",new xm.CrtError(r));return}this.emit("close")}request(e){let r,i=n((c,l)=>{r._on_response(c,l)},"on_response_impl"),s=n(c=>{r._on_body(c)},"on_body_impl"),o=n(c=>{r._on_complete(c)},"on_complete_impl"),a=$t.default.http_stream_new(this.native_handle(),e,o,i,s);return r=new Lr(a,this,e)}};n(nd,"HttpClientConnection");oe.HttpClientConnection=nd;var sd=class extends(0,kw.NativeResourceMixin)(xA.BufferedEventEmitter){constructor(e,r){super(),this.connection=r,this._super(e),this.cork()}activate(){$t.default.http_stream_activate(this.native_handle())}close(){$t.default.http_stream_close(this.native_handle())}_on_body(e){this.emit("data",e)}_on_complete(e){if(e){this.emit("error",new xm.CrtError(e)),this.close();return}this.on("end",()=>{this.close()}),this.emit("end")}};n(sd,"HttpStream");oe.HttpStream=sd;var Lr=class extends sd{constructor(e,r,i){super(e,r),this.request=i}status_code(){return this.response_status_code}on(e,r){return super.on(e,r),e=="response"&&process.nextTick(()=>{this.uncork()}),this}_on_response(e,r){this.response_status_code=e;let i=new oe.HttpHeaders(r);this.emit("response",e,i)}};n(Lr,"HttpClientStream");oe.HttpClientStream=Lr;Lr.RESPONSE="response";Lr.DATA="data";Lr.ERROR="error";Lr.END="end";Lr.HEADERS="headers";var bm=class extends kw.NativeResource{constructor(e,r,i,s,o,a,c,l){super($t.default.http_connection_manager_new(e!=null?e.native_handle():null,r,i,s,o,a.native_handle(),c?c.native_handle():void 0,l?l.create_native_handle():void 0,void 0)),this.bootstrap=e,this.host=r,this.port=i,this.max_connections=s,this.initial_window_size=o,this.socket_options=a,this.tls_opts=c,this.proxy_options=l,this.connections=new Map}acquire(){return new Promise((e,r)=>{let i=n((s,o)=>{if(o){r(new xm.CrtError(o));return}let a=this.connections.get(s);a||(a=new nd(this.bootstrap,this.host,this.port,this.socket_options,this.tls_opts,this.proxy_options,s),this.connections.set(s,a),a.on("close",()=>{this.connections.delete(s)})),e(a)},"on_acquired");$t.default.http_connection_manager_acquire(this.native_handle(),i)})}release(e){$t.default.http_connection_manager_release(this.native_handle(),e.native_handle())}close(){$t.default.http_connection_manager_close(this.native_handle())}};n(bm,"HttpClientConnectionManager");oe.HttpClientConnectionManager=bm});var Tm=u(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.DEFAULT_RECONNECT_MIN_SEC=ar.DEFAULT_RECONNECT_MAX_SEC=ar.MqttWill=ar.QoS=void 0;var qH;(function(t){t[t.AtMostOnce=0]="AtMostOnce",t[t.AtLeastOnce=1]="AtLeastOnce",t[t.ExactlyOnce=2]="ExactlyOnce"})(qH=ar.QoS||(ar.QoS={}));var Om=class{constructor(e,r,i,s=!1){this.topic=e,this.qos=r,this.payload=i,this.retain=s}};n(Om,"MqttWill");ar.MqttWill=Om;ar.DEFAULT_RECONNECT_MAX_SEC=128;ar.DEFAULT_RECONNECT_MIN_SEC=1});var Fw=u(We=>{"use strict";var CH=We&&We.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),kH=We&&We.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),MH=We&&We.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&CH(e,t,r);return kH(e,t),e};Object.defineProperty(We,"__esModule",{value:!0});We.extractRegionFromEndpoint=We.buildMqtt5FinalUsername=We.populate_username_string_with_custom_authorizer=We.is_string_and_not_empty=We.add_to_username_parameter=void 0;var DH=MH(tm());function Dw(t,e,r){let i=t;return i.indexOf("?")!=-1?i+="&":i+="?",e.indexOf(r)!=-1?i+e:i+r+e}n(Dw,"add_to_username_parameter");We.add_to_username_parameter=Dw;function od(t){return t!=null&&typeof t=="string"&&t!=""}n(od,"is_string_and_not_empty");We.is_string_and_not_empty=od;function FH(t,e,r,i,s){let o="";return t&&(o+=t),od(e)==!1?od(s)&&s&&(o+=s):o+=e,od(r)&&r&&(o=Dw(o,r,"x-amz-customauthorizer-name=")),od(i)&&i&&(o=Dw(o,i,"x-amz-customauthorizer-signature=")),o}n(FH,"populate_username_string_with_custom_authorizer");We.populate_username_string_with_custom_authorizer=FH;function Mw(t,e,r){e&&r.push([t,e])}n(Mw,"addParam");function LH(t){let e="",r=[];if(t){let i=!1;if((t.tokenValue||t.tokenKeyName||t.tokenSignature)&&(i=!0,!t.tokenValue||!t.tokenKeyName||!t.tokenSignature))throw new Error("Token-based custom authentication requires all token-related properties to be set");let s=t.username,o=(s??"").split("?"),a=o.slice(1);if(e=o[0],a.length>1)throw new Error("Custom auth username property value is invalid");a.length==1&&a[0].split("&").forEach((c,l,p)=>{var f;let m=c.split("=");r.push([m[0],(f=m[1])!==null&&f!==void 0?f:""])}),Mw("x-amz-customauthorizer-name",t.authorizerName,r),i&&(Mw(t.tokenKeyName,t.tokenValue,r),Mw("x-amz-customauthorizer-signature",t.tokenSignature,r))}return r.push(["SDK","NodeJSv2"]),r.push(["Version",DH.crt_version()]),(e??"")+"?"+r.map(i=>`${i[0]}=${i[1]}`).join("&")}n(LH,"buildMqtt5FinalUsername");We.buildMqtt5FinalUsername=LH;function zH(t){let e=/^[\w\-]+\.[\w\-]+\.([\w+\-]+)\./,r=t.match(e);if(r)return r[1];throw new Error("AWS region could not be extracted from endpoint.  Use 'region' property on WebsocketConfig to set manually.")}n(zH,"extractRegionFromEndpoint");We.extractRegionFromEndpoint=zH});var TA=u(Gt=>{"use strict";var WH=Gt&&Gt.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),UH=Gt&&Gt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zw=Gt&&Gt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&WH(e,t,r);return UH(e,t),e},jH=Gt&&Gt.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.AwsIotMqttConnectionConfigBuilder=void 0;var OA=Tm(),ds=zw(mn()),ad=mn(),VH=zw(tm()),$H=fn(),cd=lm(),Lw=zw(Fw()),Ht=class{constructor(e){this.tls_ctx_options=e,this.params={client_id:"",host_name:"",socket_options:new ds.SocketOptions,port:8883,use_websocket:!1,clean_session:!1,keep_alive:void 0,will:void 0,username:"",password:void 0,tls_ctx:void 0,reconnect_min_sec:OA.DEFAULT_RECONNECT_MIN_SEC,reconnect_max_sec:OA.DEFAULT_RECONNECT_MAX_SEC},this.is_using_custom_authorizer=!1}static new_mtls_builder_from_path(e,r){let i=new Ht(ad.TlsContextOptions.create_client_with_mtls_from_path(e,r));return i.params.port=8883,ds.is_alpn_available()&&i.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),i}static new_mtls_builder(e,r){let i=new Ht(ad.TlsContextOptions.create_client_with_mtls(e,r));return i.params.port=8883,ds.is_alpn_available()&&i.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),i}static new_mtls_pkcs11_builder(e){let r=new Ht(ad.TlsContextOptions.create_client_with_mtls_pkcs11(e));return r.params.port=8883,ds.is_alpn_available()&&r.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),r}static new_mtls_windows_cert_store_path_builder(e){let r=new Ht(ad.TlsContextOptions.create_client_with_mtls_windows_cert_store_path(e));return r.params.port=8883,ds.is_alpn_available()&&r.tls_ctx_options.alpn_list.unshift("x-amzn-mqtt-ca"),r}static new_default_builder(){let e=new ds.TlsContextOptions;return new Ht(e)}static new_websocket_builder(...e){return this.new_with_websockets(...e)}static configure_websocket_handshake(e,r){return r&&(e.params.websocket_handshake_transform=(i,s)=>jH(this,void 0,void 0,function*(){var o,a,c;let l=(a=(o=r.create_signing_config)===null||o===void 0?void 0:o.call(r))!==null&&a!==void 0?a:{algorithm:cd.AwsSigningAlgorithm.SigV4,signature_type:cd.AwsSignatureType.HttpRequestViaQueryParams,provider:r.credentials_provider,region:r.region,service:(c=r.service)!==null&&c!==void 0?c:"iotdevicegateway",signed_body_value:cd.AwsSignedBodyValue.EmptySha256,omit_session_token:!0};try{yield(0,cd.aws_sign_request)(i,l),s()}catch(p){p instanceof $H.CrtError?s(p.error_code):s(3)}})),e}static new_with_websockets(e){let r=e?.tls_ctx_options;r||(r=new ad.TlsContextOptions,r.alpn_list=[]);let i=new Ht(r);return i.params.use_websocket=!0,i.params.proxy_options=e?.proxy_options,i.tls_ctx_options&&(i.params.port=443),this.configure_websocket_handshake(i,e),i}with_certificate_authority_from_path(e,r){return this.tls_ctx_options.override_default_trust_store_from_path(e,r),this}with_certificate_authority(e){return this.tls_ctx_options.override_default_trust_store(e),this}with_endpoint(e){return this.params.host_name=e,this}with_port(e){return this.params.port=e,this}with_client_id(e){return this.params.client_id=e,this}with_clean_session(e){return this.params.clean_session=e,this}with_keep_alive_seconds(e){return this.params.keep_alive=e,this}with_timeout_ms(e){return this.with_ping_timeout_ms(e),this}with_ping_timeout_ms(e){return this.params.ping_timeout=e,this}with_protocol_operation_timeout_ms(e){return this.params.protocol_operation_timeout=e,this}with_will(e){return this.params.will=e,this}with_socket_options(e){return this.params.socket_options=e,this}with_credentials(e,r,i,s){return Ht.configure_websocket_handshake(this,{credentials_provider:cd.AwsCredentialsProvider.newStatic(r,i,s),region:e,service:"iotdevicegateway"})}with_http_proxy_options(e){return this.params.proxy_options=e,this}with_custom_authorizer(e,r,i,s){this.is_using_custom_authorizer=!0;let o=Lw.populate_username_string_with_custom_authorizer("",e,r,i,this.params.username);return this.params.username=o,this.params.password=s,this.params.use_websocket||(this.tls_ctx_options.alpn_list=["mqtt"]),this.params.port=443,this}with_username(e){return this.params.username=e,this}with_password(e){return this.params.password=e,this}with_reconnect_max_sec(e){return this.params.reconnect_max_sec=e,this}with_reconnect_min_sec(e){return this.params.reconnect_min_sec=e,this}build(){var e,r,i;if(this.params.client_id===void 0||this.params.host_name===void 0)throw"client_id and endpoint are required";return this.is_using_custom_authorizer==!1&&Lw.is_string_and_not_empty(this.params.username)&&(((e=this.params.username)===null||e===void 0?void 0:e.indexOf("x-amz-customauthorizer-name="))!=-1||((r=this.params.username)===null||r===void 0?void 0:r.indexOf("x-amz-customauthorizer-signature="))!=-1)&&(this.is_using_custom_authorizer=!0),this.is_using_custom_authorizer==!0&&this.params.port!=443&&console.log("Warning: Attempting to connect to authorizer with unsupported port. Port is not 443..."),this.params.tls_ctx===void 0&&(this.params.tls_ctx=new ds.ClientTlsContext(this.tls_ctx_options)),Lw.is_string_and_not_empty(this.params.username)==!1?this.params.username="?SDK=NodeJSv2&Version=":((i=this.params.username)===null||i===void 0?void 0:i.indexOf("?"))!=-1?this.params.username+="&SDK=NodeJSv2&Version=":this.params.username+="?SDK=NodeJSv2&Version=",this.params.username+=VH.crt_version(),this.params}};n(Ht,"AwsIotMqttConnectionConfigBuilder");Gt.AwsIotMqttConnectionConfigBuilder=Ht});var Pm=u(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.DEFAULT_KEEP_ALIVE=la.normalize_payload=void 0;function HH(t){if(t instanceof Buffer||typeof t=="string")return t;if(ArrayBuffer.isView(t)){let e=t;return Buffer.from(e.buffer,e.byteOffset,e.byteLength)}if(t instanceof ArrayBuffer)return Buffer.from(t);if(typeof t=="object")return JSON.stringify(t);if(!t)return"";throw new TypeError("payload parameter must be a string, object, or DataView.")}n(HH,"normalize_payload");la.normalize_payload=HH;la.DEFAULT_KEEP_ALIVE=1200});var PA=u(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.RetryJitterType=gn.ClientSessionBehavior=void 0;var GH;(function(t){t[t.Default=0]="Default",t[t.Clean=1]="Clean",t[t.RejoinPostSuccess=2]="RejoinPostSuccess",t[t.RejoinAlways=3]="RejoinAlways"})(GH=gn.ClientSessionBehavior||(gn.ClientSessionBehavior={}));var BH;(function(t){t[t.Default=0]="Default",t[t.None=1]="None",t[t.Full=2]="Full",t[t.Decorrelated=3]="Decorrelated"})(BH=gn.RetryJitterType||(gn.RetryJitterType={}))});var RA=u(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.PacketType=L.RetainHandlingType=L.QoS=L.PayloadFormatIndicator=L.isSuccessfulPubackReasonCode=L.PubackReasonCode=L.isSuccessfulUnsubackReasonCode=L.UnsubackReasonCode=L.isSuccessfulSubackReasonCode=L.SubackReasonCode=L.isSuccessfulDisconnectReasonCode=L.DisconnectReasonCode=L.isSuccessfulConnectReasonCode=L.ConnectReasonCode=void 0;var JH;(function(t){t[t.Success=0]="Success",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.MalformedPacket=129]="MalformedPacket",t[t.ProtocolError=130]="ProtocolError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.UnsupportedProtocolVersion=132]="UnsupportedProtocolVersion",t[t.ClientIdentifierNotValid=133]="ClientIdentifierNotValid",t[t.BadUsernameOrPassword=134]="BadUsernameOrPassword",t[t.NotAuthorized=135]="NotAuthorized",t[t.ServerUnavailable=136]="ServerUnavailable",t[t.ServerBusy=137]="ServerBusy",t[t.Banned=138]="Banned",t[t.BadAuthenticationMethod=140]="BadAuthenticationMethod",t[t.TopicNameInvalid=144]="TopicNameInvalid",t[t.PacketTooLarge=149]="PacketTooLarge",t[t.QuotaExceeded=151]="QuotaExceeded",t[t.PayloadFormatInvalid=153]="PayloadFormatInvalid",t[t.RetainNotSupported=154]="RetainNotSupported",t[t.QosNotSupported=155]="QosNotSupported",t[t.UseAnotherServer=156]="UseAnotherServer",t[t.ServerMoved=157]="ServerMoved",t[t.ConnectionRateExceeded=159]="ConnectionRateExceeded"})(JH=L.ConnectReasonCode||(L.ConnectReasonCode={}));function KH(t){return t<128}n(KH,"isSuccessfulConnectReasonCode");L.isSuccessfulConnectReasonCode=KH;var YH;(function(t){t[t.NormalDisconnection=0]="NormalDisconnection",t[t.DisconnectWithWillMessage=4]="DisconnectWithWillMessage",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.MalformedPacket=129]="MalformedPacket",t[t.ProtocolError=130]="ProtocolError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.NotAuthorized=135]="NotAuthorized",t[t.ServerBusy=137]="ServerBusy",t[t.ServerShuttingDown=139]="ServerShuttingDown",t[t.KeepAliveTimeout=141]="KeepAliveTimeout",t[t.SessionTakenOver=142]="SessionTakenOver",t[t.TopicFilterInvalid=143]="TopicFilterInvalid",t[t.TopicNameInvalid=144]="TopicNameInvalid",t[t.ReceiveMaximumExceeded=147]="ReceiveMaximumExceeded",t[t.TopicAliasInvalid=148]="TopicAliasInvalid",t[t.PacketTooLarge=149]="PacketTooLarge",t[t.MessageRateTooHigh=150]="MessageRateTooHigh",t[t.QuotaExceeded=151]="QuotaExceeded",t[t.AdministrativeAction=152]="AdministrativeAction",t[t.PayloadFormatInvalid=153]="PayloadFormatInvalid",t[t.RetainNotSupported=154]="RetainNotSupported",t[t.QosNotSupported=155]="QosNotSupported",t[t.UseAnotherServer=156]="UseAnotherServer",t[t.ServerMoved=157]="ServerMoved",t[t.SharedSubscriptionsNotSupported=158]="SharedSubscriptionsNotSupported",t[t.ConnectionRateExceeded=159]="ConnectionRateExceeded",t[t.MaximumConnectTime=160]="MaximumConnectTime",t[t.SubscriptionIdentifiersNotSupported=161]="SubscriptionIdentifiersNotSupported",t[t.WildcardSubscriptionsNotSupported=162]="WildcardSubscriptionsNotSupported"})(YH=L.DisconnectReasonCode||(L.DisconnectReasonCode={}));function QH(t){return t<128}n(QH,"isSuccessfulDisconnectReasonCode");L.isSuccessfulDisconnectReasonCode=QH;var XH;(function(t){t[t.GrantedQoS0=0]="GrantedQoS0",t[t.GrantedQoS1=1]="GrantedQoS1",t[t.GrantedQoS2=2]="GrantedQoS2",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.NotAuthorized=135]="NotAuthorized",t[t.TopicFilterInvalid=143]="TopicFilterInvalid",t[t.PacketIdentifierInUse=145]="PacketIdentifierInUse",t[t.QuotaExceeded=151]="QuotaExceeded",t[t.SharedSubscriptionsNotSupported=158]="SharedSubscriptionsNotSupported",t[t.SubscriptionIdentifiersNotSupported=161]="SubscriptionIdentifiersNotSupported",t[t.WildcardSubscriptionsNotSupported=162]="WildcardSubscriptionsNotSupported"})(XH=L.SubackReasonCode||(L.SubackReasonCode={}));function ZH(t){return t<128}n(ZH,"isSuccessfulSubackReasonCode");L.isSuccessfulSubackReasonCode=ZH;var e3;(function(t){t[t.Success=0]="Success",t[t.NoSubscriptionExisted=17]="NoSubscriptionExisted",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.NotAuthorized=135]="NotAuthorized",t[t.TopicFilterInvalid=143]="TopicFilterInvalid",t[t.PacketIdentifierInUse=145]="PacketIdentifierInUse"})(e3=L.UnsubackReasonCode||(L.UnsubackReasonCode={}));function t3(t){return t<128}n(t3,"isSuccessfulUnsubackReasonCode");L.isSuccessfulUnsubackReasonCode=t3;var r3;(function(t){t[t.Success=0]="Success",t[t.NoMatchingSubscribers=16]="NoMatchingSubscribers",t[t.UnspecifiedError=128]="UnspecifiedError",t[t.ImplementationSpecificError=131]="ImplementationSpecificError",t[t.NotAuthorized=135]="NotAuthorized",t[t.TopicNameInvalid=144]="TopicNameInvalid",t[t.PacketIdentifierInUse=145]="PacketIdentifierInUse",t[t.QuotaExceeded=151]="QuotaExceeded",t[t.PayloadFormatInvalid=153]="PayloadFormatInvalid"})(r3=L.PubackReasonCode||(L.PubackReasonCode={}));function i3(t){return t<128}n(i3,"isSuccessfulPubackReasonCode");L.isSuccessfulPubackReasonCode=i3;var n3;(function(t){t[t.Bytes=0]="Bytes",t[t.Utf8=1]="Utf8"})(n3=L.PayloadFormatIndicator||(L.PayloadFormatIndicator={}));var s3;(function(t){t[t.AtMostOnce=0]="AtMostOnce",t[t.AtLeastOnce=1]="AtLeastOnce",t[t.ExactlyOnce=2]="ExactlyOnce"})(s3=L.QoS||(L.QoS={}));var o3;(function(t){t[t.SendOnSubscribe=0]="SendOnSubscribe",t[t.SendOnSubscribeIfNew=1]="SendOnSubscribeIfNew",t[t.DontSend=2]="DontSend"})(o3=L.RetainHandlingType||(L.RetainHandlingType={}));var a3;(function(t){t[t.Connect=1]="Connect",t[t.Connack=2]="Connack",t[t.Publish=3]="Publish",t[t.Puback=4]="Puback",t[t.Pubrec=5]="Pubrec",t[t.Pubrel=6]="Pubrel",t[t.Pubcomp=7]="Pubcomp",t[t.Subscribe=8]="Subscribe",t[t.Suback=9]="Suback",t[t.Unsubscribe=10]="Unsubscribe",t[t.Unsuback=11]="Unsuback",t[t.Pingreq=12]="Pingreq",t[t.Pingresp=13]="Pingresp",t[t.Disconnect=14]="Disconnect",t[t.Auth=15]="Auth"})(a3=L.PacketType||(L.PacketType={}))});var jw=u(ae=>{"use strict";var qA=ae&&ae.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),c3=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),CA=ae&&ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qA(e,t,r);return c3(e,t),e},kA=ae&&ae.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qA(e,t,r)},Ww=ae&&ae.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})},d3=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ae,"__esModule",{value:!0});ae.Mqtt5Client=ae.ClientExtendedValidationAndFlowControl=ae.ClientOperationQueueBehavior=ae.HttpProxyOptions=void 0;var wn=d3(Dr()),u3=aa(),l3=vm(),Uw=CA(mn()),p3=CA(Pm()),IA=fn(),f3=Am();Object.defineProperty(ae,"HttpProxyOptions",{enumerable:!0,get:function(){return f3.HttpProxyOptions}});kA(PA(),ae);kA(RA(),ae);var m3;(function(t){t[t.Default=0]="Default",t[t.FailNonQos1PublishOnDisconnect=1]="FailNonQos1PublishOnDisconnect",t[t.FailQos0PublishOnDisconnect=2]="FailQos0PublishOnDisconnect",t[t.FailAllOnDisconnect=3]="FailAllOnDisconnect"})(m3=ae.ClientOperationQueueBehavior||(ae.ClientOperationQueueBehavior={}));var h3;(function(t){t[t.None=0]="None",t[t.AwsIotCoreDefaults=1]="AwsIotCoreDefaults"})(h3=ae.ClientExtendedValidationAndFlowControl||(ae.ClientExtendedValidationAndFlowControl={}));var te=class extends(0,u3.NativeResourceMixin)(l3.BufferedEventEmitter){constructor(e){super(),this._super(wn.default.mqtt5_client_new(this,e,r=>{te._s_on_stopped(r)},r=>{te._s_on_attempting_connect(r)},(r,i,s)=>{te._s_on_connection_success(r,i,s)},(r,i,s)=>{te._s_on_connection_failure(r,new IA.CrtError(i),s)},(r,i,s)=>{te._s_on_disconnection(r,new IA.CrtError(i),s)},(r,i)=>{te._s_on_message_received(r,i)},e.clientBootstrap?e.clientBootstrap.native_handle():null,e.socketOptions?e.socketOptions.native_handle():null,e.tlsCtx?e.tlsCtx.native_handle():null,e.httpProxyOptions?e.httpProxyOptions.create_native_handle():null))}close(){wn.default.mqtt5_client_close(this.native_handle())}start(){wn.default.mqtt5_client_start(this.native_handle())}stop(e){wn.default.mqtt5_client_stop(this.native_handle(),e)}subscribe(e){return Ww(this,void 0,void 0,function*(){return new Promise((r,i)=>{function s(o,a,c){return te._s_on_suback_callback(r,i,o,a,c)}n(s,"curriedPromiseCallback");try{wn.default.mqtt5_client_subscribe(this.native_handle(),e,s)}catch(o){i(o)}})})}unsubscribe(e){return Ww(this,void 0,void 0,function*(){return new Promise((r,i)=>{function s(o,a,c){return te._s_on_unsuback_callback(r,i,o,a,c)}n(s,"curriedPromiseCallback");try{wn.default.mqtt5_client_unsubscribe(this.native_handle(),e,s)}catch(o){i(o)}})})}publish(e){return Ww(this,void 0,void 0,function*(){return new Promise((r,i)=>{e&&e.payload&&(e.payload=p3.normalize_payload(e.payload));function s(o,a,c){return te._s_on_puback_callback(r,i,o,a,c)}n(s,"curriedPromiseCallback");try{wn.default.mqtt5_client_publish(this.native_handle(),e,s)}catch(o){i(o)}})})}getQueueStatistics(){return wn.default.mqtt5_client_get_queue_statistics(this.native_handle())}on(e,r){return super.on(e,r),this}static _s_on_stopped(e){process.nextTick(()=>{let r={};e.emit(te.STOPPED,r)})}static _s_on_attempting_connect(e){process.nextTick(()=>{let r={};e.emit(te.ATTEMPTING_CONNECT,r)})}static _s_on_connection_success(e,r,i){let s={connack:r,settings:i};process.nextTick(()=>{e.emit(te.CONNECTION_SUCCESS,s)})}static _s_on_connection_failure(e,r,i){let s={error:r};i!=null&&(s.connack=i),process.nextTick(()=>{e.emit(te.CONNECTION_FAILURE,s)})}static _s_on_disconnection(e,r,i){let s={error:r};i!=null&&(s.disconnect=i),process.nextTick(()=>{e.emit(te.DISCONNECTION,s)})}static _s_on_suback_callback(e,r,i,s,o){s==0&&o!==void 0?e(o):r(Uw.error_code_to_string(s))}static _s_on_unsuback_callback(e,r,i,s,o){s==0&&o!==void 0?e(o):r(Uw.error_code_to_string(s))}static _s_on_puback_callback(e,r,i,s,o){s==0?e(o):r(Uw.error_code_to_string(s))}static _s_on_message_received(e,r){let i={message:r};process.nextTick(()=>{e.emit(te.MESSAGE_RECEIVED,i)})}};n(te,"Mqtt5Client");ae.Mqtt5Client=te;te.ERROR="error";te.MESSAGE_RECEIVED="messageReceived";te.ATTEMPTING_CONNECT="attemptingConnect";te.CONNECTION_SUCCESS="connectionSuccess";te.CONNECTION_FAILURE="connectionFailure";te.DISCONNECTION="disconnection";te.STOPPED="stopped"});var FA=u(Jt=>{"use strict";var _3=Jt&&Jt.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),y3=Jt&&Jt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ud=Jt&&Jt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_3(e,t,r);return y3(e,t),e},MA=Jt&&Jt.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.AwsIotMqtt5ClientConfigBuilder=void 0;var g3=ud(jw()),Bt=ud(mn()),dd=ud(lm()),w3=fn(),DA=ud(Fw()),E3=ud(Pm()),Ne=class{constructor(e,r,i){this.tlsContextOptions=i,this.config={hostName:e,port:r,connectProperties:{keepAliveIntervalSeconds:E3.DEFAULT_KEEP_ALIVE},extendedValidationAndFlowControlOptions:g3.ClientExtendedValidationAndFlowControl.AwsIotCoreDefaults}}static newDirectMqttBuilderWithMtlsFromPath(e,r,i){let s=new Ne(e,Ne.DEFAULT_DIRECT_MQTT_PORT,Bt.TlsContextOptions.create_client_with_mtls_from_path(r,i));return Bt.is_alpn_available()&&s.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),s}static newDirectMqttBuilderWithMtlsFromMemory(e,r,i){let s=new Ne(e,Ne.DEFAULT_DIRECT_MQTT_PORT,Bt.TlsContextOptions.create_client_with_mtls(r,i));return Bt.is_alpn_available()&&s.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),s}static newDirectMqttBuilderWithMtlsFromPkcs11(e,r){let i=new Ne(e,Ne.DEFAULT_DIRECT_MQTT_PORT,Bt.TlsContextOptions.create_client_with_mtls_pkcs11(r));return Bt.is_alpn_available()&&i.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),i}static newDirectMqttBuilderWithMtlsFromWindowsCertStorePath(e,r){let i=new Ne(e,Ne.DEFAULT_DIRECT_MQTT_PORT,Bt.TlsContextOptions.create_client_with_mtls_windows_cert_store_path(r));return Bt.is_alpn_available()&&i.tlsContextOptions.alpn_list.unshift("x-amzn-mqtt-ca"),i}static newDirectMqttBuilderWithCustomAuth(e,r){let i=new Ne(e,Ne.DEFAULT_WEBSOCKET_MQTT_PORT,new Bt.TlsContextOptions);return i.customAuthConfig=r,i.tlsContextOptions.alpn_list=["mqtt"],i}static newWebsocketMqttBuilderWithSigv4Auth(e,r){let i=new Bt.TlsContextOptions;i.alpn_list=[];let s=new Ne(e,Ne.DEFAULT_WEBSOCKET_MQTT_PORT,i),o=r?.credentialsProvider;return o||(o=dd.AwsCredentialsProvider.newDefault()),s.config.websocketHandshakeTransform=(a,c)=>MA(this,void 0,void 0,function*(){var l;try{let p={algorithm:dd.AwsSigningAlgorithm.SigV4,signature_type:dd.AwsSignatureType.HttpRequestViaQueryParams,provider:o,region:(l=r?.region)!==null&&l!==void 0?l:DA.extractRegionFromEndpoint(e),service:"iotdevicegateway",signed_body_value:dd.AwsSignedBodyValue.EmptySha256,omit_session_token:!0};yield dd.aws_sign_request(a,p),c()}catch(p){p instanceof w3.CrtError?c(p.error_code):c(3)}}),s}static newWebsocketMqttBuilderWithCustomAuth(e,r){let i=new Ne(e,Ne.DEFAULT_WEBSOCKET_MQTT_PORT,new Bt.TlsContextOptions);return i.customAuthConfig=r,i.config.websocketHandshakeTransform=(s,o)=>MA(this,void 0,void 0,function*(){o(0)}),i}withCertificateAuthorityFromPath(e,r){return this.tlsContextOptions.override_default_trust_store_from_path(e,r),this}withCertificateAuthority(e){return this.tlsContextOptions.override_default_trust_store(e),this}withPort(e){return this.config.port=e,this}withConnectProperties(e){return this.config.connectProperties=e,this}withSessionBehavior(e){return this.config.sessionBehavior=e,this}withRetryJitterMode(e){return this.config.retryJitterMode=e,this}withMinReconnectDelayMs(e){return this.config.minReconnectDelayMs=e,this}withMaxReconnectDelayMs(e){return this.config.maxReconnectDelayMs=e,this}withMinConnectedTimeToResetReconnectDelayMs(e){return this.config.minConnectedTimeToResetReconnectDelayMs=e,this}withConnackTimeoutMs(e){return this.config.connackTimeoutMs=e,this}withOfflineQueueBehavior(e){return this.config.offlineQueueBehavior=e,this}withPingTimeoutMs(e){return this.config.pingTimeoutMs=e,this}withAckTimeoutSeconds(e){return this.config.ackTimeoutSeconds=e,this}withSocketOptions(e){return this.config.socketOptions=e,this}withHttpProxyOptions(e){return this.config.httpProxyOptions=e,this}withExtendedValidationAndFlowControlOptions(e){return this.config.extendedValidationAndFlowControlOptions=e,this}build(){var e,r;return this.config.tlsCtx===void 0&&(this.config.tlsCtx=new Bt.ClientTlsContext(this.tlsContextOptions)),this.config.connectProperties&&(this.config.connectProperties.username=DA.buildMqtt5FinalUsername(this.customAuthConfig),!((e=this.customAuthConfig)===null||e===void 0)&&e.password&&(this.config.connectProperties.password=(r=this.customAuthConfig)===null||r===void 0?void 0:r.password)),this.config}};n(Ne,"AwsIotMqtt5ClientConfigBuilder");Jt.AwsIotMqtt5ClientConfigBuilder=Ne;Ne.DEFAULT_WEBSOCKET_MQTT_PORT=443;Ne.DEFAULT_DIRECT_MQTT_PORT=8883});var zA=u(En=>{"use strict";var v3=En&&En.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),LA=En&&En.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&v3(e,t,r)};Object.defineProperty(En,"__esModule",{value:!0});LA(TA(),En);LA(FA(),En)});var GA=u(Se=>{"use strict";var S3=Se&&Se.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),N3=Se&&Se.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),VA=Se&&Se.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&S3(e,t,r);return N3(e,t),e},pa=Se&&Se.__awaiter||function(t,e,r,i){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return n(s,"adopt"),new(r||(r=Promise))(function(o,a){function c(f){try{p(i.next(f))}catch(m){a(m)}}n(c,"fulfilled");function l(f){try{p(i.throw(f))}catch(m){a(m)}}n(l,"rejected");function p(f){f.done?o(f.value):s(f.value).then(c,l)}n(p,"step"),p((i=i.apply(t,e||[])).next())})},b3=Se&&Se.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Se,"__esModule",{value:!0});Se.MqttClientConnection=Se.MqttClient=Se.MqttWill=Se.QoS=Se.HttpProxyOptions=void 0;var cr=b3(Dr()),$A=aa(),x3=vm(),WA=VA(Pm()),UA=fn(),Rm=VA(mn()),A3=Am();Object.defineProperty(Se,"HttpProxyOptions",{enumerable:!0,get:function(){return A3.HttpProxyOptions}});var jA=Tm(),HA=Tm();Object.defineProperty(Se,"QoS",{enumerable:!0,get:function(){return HA.QoS}});Object.defineProperty(Se,"MqttWill",{enumerable:!0,get:function(){return HA.MqttWill}});var Im=class extends $A.NativeResource{constructor(e=void 0){super(cr.default.mqtt_client_new(e!=null?e.native_handle():null)),this.bootstrap=e}new_connection(e){return new dr(this,e)}};n(Im,"MqttClient");Se.MqttClient=Im;var dr=class extends(0,$A.NativeResourceMixin)(x3.BufferedEventEmitter){constructor(e,r){super(),this.client=e,this.config=r;let i=r.will?{topic:r.will.topic,qos:r.will.qos,payload:WA.normalize_payload(r.will.payload),retain:r.will.retain}:void 0;var s=jA.DEFAULT_RECONNECT_MIN_SEC,o=jA.DEFAULT_RECONNECT_MAX_SEC;r.reconnect_min_sec&&(s=r.reconnect_min_sec,o=Math.max(s,o)),r.reconnect_max_sec&&(o=r.reconnect_max_sec,s=Math.min(s,o)),this._super(cr.default.mqtt_client_connection_new(e.native_handle(),a=>{this._on_connection_interrupted(a)},(a,c)=>{this._on_connection_resumed(a,c)},r.tls_ctx?r.tls_ctx.native_handle():null,i,r.username,r.password,r.use_websocket,r.proxy_options?r.proxy_options.create_native_handle():void 0,r.websocket_handshake_transform,s,o)),this.tls_ctx=r.tls_ctx,cr.default.mqtt_client_connection_on_message(this.native_handle(),this._on_any_publish.bind(this)),this.on("error",a=>{})}close(){cr.default.mqtt_client_connection_close(this.native_handle())}on(e,r){return super.on(e,r),e=="connect"&&process.nextTick(()=>{this.uncork()}),this}connect(){return pa(this,void 0,void 0,function*(){return new Promise((e,r)=>{r=this._reject(r);try{cr.default.mqtt_client_connection_connect(this.native_handle(),this.config.client_id,this.config.host_name,this.config.port,this.config.socket_options.native_handle(),this.config.keep_alive,this.config.ping_timeout,this.config.protocol_operation_timeout,this.config.clean_session,this._on_connect_callback.bind(this,e,r))}catch(i){r(i)}})})}reconnect(){return pa(this,void 0,void 0,function*(){return new Promise((e,r)=>{r=this._reject(r);try{cr.default.mqtt_client_connection_reconnect(this.native_handle(),this._on_connect_callback.bind(this,e,r))}catch(i){r(i)}})})}publish(e,r,i,s=!1){return pa(this,void 0,void 0,function*(){return new Promise((o,a)=>{a=this._reject(a);try{cr.default.mqtt_client_connection_publish(this.native_handle(),e,WA.normalize_payload(r),i,s,this._on_puback_callback.bind(this,o,a))}catch(c){a(c)}})})}subscribe(e,r,i){return pa(this,void 0,void 0,function*(){return new Promise((s,o)=>{o=this._reject(o);try{cr.default.mqtt_client_connection_subscribe(this.native_handle(),e,r,i,this._on_suback_callback.bind(this,s,o))}catch(a){o(a)}})})}unsubscribe(e){return pa(this,void 0,void 0,function*(){return new Promise((r,i)=>{i=this._reject(i);try{cr.default.mqtt_client_connection_unsubscribe(this.native_handle(),e,this._on_unsuback_callback.bind(this,r,i))}catch(s){i(s)}})})}disconnect(){return pa(this,void 0,void 0,function*(){return new Promise((e,r)=>{r=this._reject(r);try{cr.default.mqtt_client_connection_disconnect(this.native_handle(),this._on_disconnect_callback.bind(this,e))}catch(i){r(i)}})})}getQueueStatistics(){return cr.default.mqtt_client_connection_get_queue_statistics(this.native_handle())}_reject(e){return r=>{e(r),process.nextTick(()=>{this.emit("error",new UA.CrtError(r))})}}_on_connection_interrupted(e){this.emit("interrupt",new UA.CrtError(e))}_on_connection_resumed(e,r){this.emit("resume",e,r)}_on_any_publish(e,r,i,s,o){this.emit("message",e,r,i,s,o)}_on_connect_callback(e,r,i,s,o){i==0&&s==0?(e(o),this.emit("connect",o)):i!=0?r("Failed to connect: "+Rm.error_code_to_string(i)):r("Server rejected connection.")}_on_puback_callback(e,r,i,s){s==0?e({packet_id:i}):r("Failed to publish: "+Rm.error_code_to_string(s))}_on_suback_callback(e,r,i,s,o,a){a==0?e({packet_id:i,topic:s,qos:o,error_code:a}):r("Failed to subscribe: "+Rm.error_code_to_string(a))}_on_unsuback_callback(e,r,i,s){s==0?e({packet_id:i}):r("Failed to unsubscribe: "+Rm.error_code_to_string(s))}_on_disconnect_callback(e){e(),this.emit("disconnect"),this.close()}};n(dr,"MqttClientConnection");Se.MqttClientConnection=dr;dr.CONNECT="connect";dr.DISCONNECT="disconnect";dr.ERROR="error";dr.INTERRUPT="interrupt";dr.RESUME="resume";dr.MESSAGE="message"});var BA=u(G=>{"use strict";var O3=G&&G.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,s)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),T3=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ur=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&O3(e,t,r);return T3(e,t),e};Object.defineProperty(G,"__esModule",{value:!0});G.CrtError=G.resource_safety=G.platform=G.mqtt5=G.mqtt=G.iot=G.io=G.http=G.crt=G.crypto=G.checksums=G.auth=void 0;var P3=ur(tm());G.platform=P3;var R3=ur(dA());G.resource_safety=R3;var I3=ur(lm());G.auth=I3;var q3=ur(gA());G.checksums=q3;var C3=ur(EA());G.crt=C3;var k3=ur(SA());G.crypto=k3;var M3=ur(Am());G.http=M3;var D3=ur(mn());G.io=D3;var F3=ur(zA());G.iot=F3;var L3=ur(GA());G.mqtt=L3;var z3=ur(jw());G.mqtt5=z3;var W3=fn();Object.defineProperty(G,"CrtError",{enumerable:!0,get:function(){return W3.CrtError}})});var JA=u((qm,Vw)=>{"use strict";Object.defineProperty(qm,"__esModule",{value:!0});qm.isCrtAvailable=void 0;var U3=n(()=>{try{return typeof W=="function"&&typeof Vw<"u"&&Vw.require&&BA()?["md/crt-avail"]:null}catch{return null}},"isCrtAvailable");qm.isCrtAvailable=U3});var ld=u(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.defaultUserAgent=zr.UA_APP_ID_INI_NAME=zr.UA_APP_ID_ENV_NAME=void 0;var j3=ln(),KA=W("os"),$w=W("process"),V3=JA();zr.UA_APP_ID_ENV_NAME="AWS_SDK_UA_APP_ID";zr.UA_APP_ID_INI_NAME="sdk-ua-app-id";var $3=n(({serviceId:t,clientVersion:e})=>{let r=[["aws-sdk-js",e],[`os/${(0,KA.platform)()}`,(0,KA.release)()],["lang/js"],["md/nodejs",`${$w.versions.node}`]],i=(0,V3.isCrtAvailable)();i&&r.push(i),t&&r.push([`api/${t}`,e]),$w.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${$w.env.AWS_EXECUTION_ENV}`]);let s=(0,j3.loadConfig)({environmentVariableSelector:a=>a[zr.UA_APP_ID_ENV_NAME],configFileSelector:a=>a[zr.UA_APP_ID_INI_NAME],default:void 0})(),o;return async()=>{if(!o){let a=await s;o=a?[...r,[`app/${a}`]]:[...r]}return o}},"defaultUserAgent");zr.defaultUserAgent=$3});var YA=u(Cm=>{"use strict";Object.defineProperty(Cm,"__esModule",{value:!0});Cm.fromBase64=void 0;var H3=bo(),G3=/^[A-Za-z0-9+/]*={0,2}$/,B3=n(t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!G3.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,H3.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},"fromBase64");Cm.fromBase64=B3});var QA=u(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});km.toBase64=void 0;var J3=bo(),K3=n(t=>(0,J3.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64"),"toBase64");km.toBase64=K3});var pd=u(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});var XA=(A(),b(x));XA.__exportStar(YA(),Mm);XA.__exportStar(QA(),Mm)});var ZA=u((dge,Y3)=>{Y3.exports={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}}],version:"1.1"}});var Gw=u(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.partition=void 0;var Q3=(A(),b(x)),X3=Q3.__importDefault(ZA()),{partitions:Hw}=X3.default,eO=Hw.find(t=>t.id==="aws"),Z3=n(t=>{for(let e of Hw){let{regions:r,outputs:i}=e;for(let[s,o]of Object.entries(r))if(s===t)return{...i,...o}}for(let e of Hw){let{regionRegex:r,outputs:i}=e;if(new RegExp(r).test(t))return{...i}}if(!eO)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...eO.outputs}},"partition");Dm.partition=Z3});var tO=u(Fm=>{"use strict";Object.defineProperty(Fm,"__esModule",{value:!0});Fm.debugId=void 0;Fm.debugId="endpoints"});var rO=u(Lm=>{"use strict";Object.defineProperty(Lm,"__esModule",{value:!0});Lm.toDebugString=void 0;function Bw(t){return typeof t!="object"||t==null?t:"ref"in t?`$${Bw(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(Bw).join(", ")})`:JSON.stringify(t,null,2)}n(Bw,"toDebugString");Lm.toDebugString=Bw});var fd=u(zm=>{"use strict";Object.defineProperty(zm,"__esModule",{value:!0});var iO=(A(),b(x));iO.__exportStar(tO(),zm);iO.__exportStar(rO(),zm)});var nO=u(Um=>{"use strict";Object.defineProperty(Um,"__esModule",{value:!0});Um.EndpointError=void 0;var Wm=class extends Error{constructor(e){super(e),this.name="EndpointError"}};n(Wm,"EndpointError");Um.EndpointError=Wm});var oO=u(sO=>{"use strict";Object.defineProperty(sO,"__esModule",{value:!0})});var cO=u(aO=>{"use strict";Object.defineProperty(aO,"__esModule",{value:!0})});var uO=u(dO=>{"use strict";Object.defineProperty(dO,"__esModule",{value:!0})});var pO=u(lO=>{"use strict";Object.defineProperty(lO,"__esModule",{value:!0})});var mO=u(fO=>{"use strict";Object.defineProperty(fO,"__esModule",{value:!0})});var Kt=u(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});var fa=(A(),b(x));fa.__exportStar(nO(),vn);fa.__exportStar(oO(),vn);fa.__exportStar(cO(),vn);fa.__exportStar(uO(),vn);fa.__exportStar(pO(),vn);fa.__exportStar(mO(),vn)});var Jw=u(jm=>{"use strict";Object.defineProperty(jm,"__esModule",{value:!0});jm.isIpAddress=void 0;var eG=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),tG=n(t=>eG.test(t)||t.startsWith("[")&&t.endsWith("]"),"isIpAddress");jm.isIpAddress=tG});var Kw=u(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});md.isValidHostLabel=void 0;var rG=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),iG=n((t,e=!1)=>{if(!e)return rG.test(t);let r=t.split(".");for(let i of r)if(!(0,md.isValidHostLabel)(i))return!1;return!0},"isValidHostLabel");md.isValidHostLabel=iG});var hO=u(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.isVirtualHostableS3Bucket=void 0;var nG=Jw(),sG=Kw(),oG=n((t,e=!1)=>{if(e){for(let r of t.split("."))if(!(0,hd.isVirtualHostableS3Bucket)(r))return!1;return!0}return!(!(0,sG.isValidHostLabel)(t)||t.length<3||t.length>63||t!==t.toLowerCase()||(0,nG.isIpAddress)(t))},"isVirtualHostableS3Bucket");hd.isVirtualHostableS3Bucket=oG});var _O=u(Vm=>{"use strict";Object.defineProperty(Vm,"__esModule",{value:!0});Vm.parseArn=void 0;var aG=n(t=>{let e=t.split(":");if(e.length<6)return null;let[r,i,s,o,a,...c]=e;return r!=="arn"||i===""||s===""||c[0]===""?null:{partition:i,service:s,region:o,accountId:a,resourceId:c[0].includes("/")?c[0].split("/"):c}},"parseArn");Vm.parseArn=aG});var yO=u(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});var Yw=(A(),b(x));Yw.__exportStar(hO(),_d);Yw.__exportStar(_O(),_d);Yw.__exportStar(Gw(),_d)});var gO=u($m=>{"use strict";Object.defineProperty($m,"__esModule",{value:!0});$m.booleanEquals=void 0;var cG=n((t,e)=>t===e,"booleanEquals");$m.booleanEquals=cG});var EO=u(Hm=>{"use strict";Object.defineProperty(Hm,"__esModule",{value:!0});Hm.getAttrPathList=void 0;var wO=Kt(),dG=n(t=>{let e=t.split("."),r=[];for(let i of e){let s=i.indexOf("[");if(s!==-1){if(i.indexOf("]")!==i.length-1)throw new wO.EndpointError(`Path: '${t}' does not end with ']'`);let o=i.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new wO.EndpointError(`Invalid array index: '${o}' in path: '${t}'`);s!==0&&r.push(i.slice(0,s)),r.push(o)}else r.push(i)}return r},"getAttrPathList");Hm.getAttrPathList=dG});var vO=u(Gm=>{"use strict";Object.defineProperty(Gm,"__esModule",{value:!0});Gm.getAttr=void 0;var uG=Kt(),lG=EO(),pG=n((t,e)=>(0,lG.getAttrPathList)(e).reduce((r,i)=>{if(typeof r!="object")throw new uG.EndpointError(`Index '${i}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(i)]:r[i]},t),"getAttr");Gm.getAttr=pG});var SO=u(Bm=>{"use strict";Object.defineProperty(Bm,"__esModule",{value:!0});Bm.isSet=void 0;var fG=n(t=>t!=null,"isSet");Bm.isSet=fG});var NO=u(Jm=>{"use strict";Object.defineProperty(Jm,"__esModule",{value:!0});Jm.not=void 0;var mG=n(t=>!t,"not");Jm.not=mG});var xO=u(bO=>{"use strict";Object.defineProperty(bO,"__esModule",{value:!0})});var AO=u(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});yd.HttpAuthLocation=void 0;var hG;(function(t){t.HEADER="header",t.QUERY="query"})(hG=yd.HttpAuthLocation||(yd.HttpAuthLocation={}))});var TO=u(OO=>{"use strict";Object.defineProperty(OO,"__esModule",{value:!0})});var RO=u(PO=>{"use strict";Object.defineProperty(PO,"__esModule",{value:!0})});var qO=u(IO=>{"use strict";Object.defineProperty(IO,"__esModule",{value:!0})});var kO=u(CO=>{"use strict";Object.defineProperty(CO,"__esModule",{value:!0})});var DO=u(MO=>{"use strict";Object.defineProperty(MO,"__esModule",{value:!0})});var FO=u(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.HostAddressType=void 0;var _G;(function(t){t.AAAA="AAAA",t.A="A"})(_G=gd.HostAddressType||(gd.HostAddressType={}))});var LO=u(wd=>{"use strict";Object.defineProperty(wd,"__esModule",{value:!0});wd.EndpointURLScheme=void 0;var yG;(function(t){t.HTTP="http",t.HTTPS="https"})(yG=wd.EndpointURLScheme||(wd.EndpointURLScheme={}))});var WO=u(zO=>{"use strict";Object.defineProperty(zO,"__esModule",{value:!0})});var jO=u(UO=>{"use strict";Object.defineProperty(UO,"__esModule",{value:!0})});var $O=u(VO=>{"use strict";Object.defineProperty(VO,"__esModule",{value:!0})});var GO=u(HO=>{"use strict";Object.defineProperty(HO,"__esModule",{value:!0})});var JO=u(BO=>{"use strict";Object.defineProperty(BO,"__esModule",{value:!0})});var YO=u(KO=>{"use strict";Object.defineProperty(KO,"__esModule",{value:!0})});var XO=u(QO=>{"use strict";Object.defineProperty(QO,"__esModule",{value:!0})});var ZO=u(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});var Ed=(A(),b(x));Ed.__exportStar($O(),us);Ed.__exportStar(GO(),us);Ed.__exportStar(JO(),us);Ed.__exportStar(YO(),us);Ed.__exportStar(XO(),us)});var tT=u(eT=>{"use strict";Object.defineProperty(eT,"__esModule",{value:!0})});var iT=u(rT=>{"use strict";Object.defineProperty(rT,"__esModule",{value:!0})});var sT=u(nT=>{"use strict";Object.defineProperty(nT,"__esModule",{value:!0})});var aT=u(oT=>{"use strict";Object.defineProperty(oT,"__esModule",{value:!0})});var dT=u(cT=>{"use strict";Object.defineProperty(cT,"__esModule",{value:!0})});var lT=u(uT=>{"use strict";Object.defineProperty(uT,"__esModule",{value:!0})});var fT=u(pT=>{"use strict";Object.defineProperty(pT,"__esModule",{value:!0})});var hT=u(mT=>{"use strict";Object.defineProperty(mT,"__esModule",{value:!0})});var yT=u(_T=>{"use strict";Object.defineProperty(_T,"__esModule",{value:!0})});var wT=u(gT=>{"use strict";Object.defineProperty(gT,"__esModule",{value:!0})});var vT=u(ET=>{"use strict";Object.defineProperty(ET,"__esModule",{value:!0})});var NT=u(ST=>{"use strict";Object.defineProperty(ST,"__esModule",{value:!0})});var xT=u(bT=>{"use strict";Object.defineProperty(bT,"__esModule",{value:!0})});var OT=u(AT=>{"use strict";Object.defineProperty(AT,"__esModule",{value:!0})});var PT=u(TT=>{"use strict";Object.defineProperty(TT,"__esModule",{value:!0})});var RT=u(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});var re=(A(),b(x));re.__exportStar(xO(),Q);re.__exportStar(AO(),Q);re.__exportStar(TO(),Q);re.__exportStar(RO(),Q);re.__exportStar(qO(),Q);re.__exportStar(kO(),Q);re.__exportStar(DO(),Q);re.__exportStar(FO(),Q);re.__exportStar(LO(),Q);re.__exportStar(WO(),Q);re.__exportStar(jO(),Q);re.__exportStar(ZO(),Q);re.__exportStar(tT(),Q);re.__exportStar(iT(),Q);re.__exportStar(sT(),Q);re.__exportStar(aT(),Q);re.__exportStar(dT(),Q);re.__exportStar(lT(),Q);re.__exportStar(fT(),Q);re.__exportStar(hT(),Q);re.__exportStar(yT(),Q);re.__exportStar(wT(),Q);re.__exportStar(vT(),Q);re.__exportStar(NT(),Q);re.__exportStar(xT(),Q);re.__exportStar(OT(),Q);re.__exportStar(PT(),Q)});var IT=u(Km=>{"use strict";Object.defineProperty(Km,"__esModule",{value:!0});Km.parseURL=void 0;var Xw=RT(),gG=Jw(),Qw={[Xw.EndpointURLScheme.HTTP]:80,[Xw.EndpointURLScheme.HTTPS]:443},wG=n(t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:h,port:_,protocol:w="",path:g="",query:S={}}=t,ie=new URL(`${w}//${h}${_?`:${_}`:""}${g}`);return ie.search=Object.entries(S).map(([ke,be])=>`${ke}=${be}`).join("&"),ie}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:i,hostname:s,pathname:o,protocol:a,search:c}=e;if(c)return null;let l=a.slice(0,-1);if(!Object.values(Xw.EndpointURLScheme).includes(l))return null;let p=(0,gG.isIpAddress)(s),f=r.includes(`${i}:${Qw[l]}`)||typeof t=="string"&&t.includes(`${i}:${Qw[l]}`),m=`${i}${f?`:${Qw[l]}`:""}`;return{scheme:l,authority:m,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:p}},"parseURL");Km.parseURL=wG});var qT=u(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.stringEquals=void 0;var EG=n((t,e)=>t===e,"stringEquals");Ym.stringEquals=EG});var CT=u(Qm=>{"use strict";Object.defineProperty(Qm,"__esModule",{value:!0});Qm.substring=void 0;var vG=n((t,e,r,i)=>e>=r||t.length<r?null:i?t.substring(t.length-r,t.length-e):t.substring(e,r),"substring");Qm.substring=vG});var kT=u(Xm=>{"use strict";Object.defineProperty(Xm,"__esModule",{value:!0});Xm.uriEncode=void 0;var SG=n(t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode");Xm.uriEncode=SG});var Zw=u(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.aws=void 0;var Wr=(A(),b(x));Ct.aws=Wr.__importStar(yO());Wr.__exportStar(gO(),Ct);Wr.__exportStar(vO(),Ct);Wr.__exportStar(SO(),Ct);Wr.__exportStar(Kw(),Ct);Wr.__exportStar(NO(),Ct);Wr.__exportStar(IT(),Ct);Wr.__exportStar(qT(),Ct);Wr.__exportStar(CT(),Ct);Wr.__exportStar(kT(),Ct)});var eE=u(Zm=>{"use strict";Object.defineProperty(Zm,"__esModule",{value:!0});Zm.evaluateTemplate=void 0;var NG=Zw(),bG=n((t,e)=>{let r=[],i={...e.endpointParams,...e.referenceRecord},s=0;for(;s<t.length;){let o=t.indexOf("{",s);if(o===-1){r.push(t.slice(s));break}r.push(t.slice(s,o));let a=t.indexOf("}",o);if(a===-1){r.push(t.slice(o));break}t[o+1]==="{"&&t[a+1]==="}"&&(r.push(t.slice(o+1,a)),s=a+2);let c=t.substring(o+1,a);if(c.includes("#")){let[l,p]=c.split("#");r.push((0,NG.getAttr)(i[l],p))}else r.push(i[c]);s=a+1}return r.join("")},"evaluateTemplate");Zm.evaluateTemplate=bG});var MT=u(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});eh.getReferenceValue=void 0;var xG=n(({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],"getReferenceValue");eh.getReferenceValue=xG});var vd=u(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});th.evaluateExpression=void 0;var AG=Kt(),OG=tE(),TG=eE(),PG=MT(),RG=n((t,e,r)=>{if(typeof t=="string")return(0,TG.evaluateTemplate)(t,r);if(t.fn)return(0,OG.callFunction)(t,r);if(t.ref)return(0,PG.getReferenceValue)(t,r);throw new AG.EndpointError(`'${e}': ${String(t)} is not a string, function or reference.`)},"evaluateExpression");th.evaluateExpression=RG});var tE=u(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.callFunction=void 0;var IG=(A(),b(x)),qG=IG.__importStar(Zw()),CG=vd(),kG=n(({fn:t,argv:e},r)=>{let i=e.map(s=>["boolean","number"].includes(typeof s)?s:(0,CG.evaluateExpression)(s,"arg",r));return t.split(".").reduce((s,o)=>s[o],qG)(...i)},"callFunction");rh.callFunction=kG});var DT=u(ih=>{"use strict";Object.defineProperty(ih,"__esModule",{value:!0});ih.evaluateCondition=void 0;var rE=fd(),MG=Kt(),DG=tE(),FG=n(({assign:t,...e},r)=>{var i,s;if(t&&t in r.referenceRecord)throw new MG.EndpointError(`'${t}' is already defined in Reference Record.`);let o=(0,DG.callFunction)(e,r);return(s=(i=r.logger)===null||i===void 0?void 0:i.debug)===null||s===void 0||s.call(i,rE.debugId,`evaluateCondition: ${(0,rE.toDebugString)(e)} = ${(0,rE.toDebugString)(o)}`),{result:o===""?!0:!!o,...t!=null&&{toAssign:{name:t,value:o}}}},"evaluateCondition");ih.evaluateCondition=FG});var sh=u(nh=>{"use strict";Object.defineProperty(nh,"__esModule",{value:!0});nh.evaluateConditions=void 0;var FT=fd(),LG=DT(),zG=n((t=[],e)=>{var r,i;let s={};for(let o of t){let{result:a,toAssign:c}=(0,LG.evaluateCondition)(o,{...e,referenceRecord:{...e.referenceRecord,...s}});if(!a)return{result:a};c&&(s[c.name]=c.value,(i=(r=e.logger)===null||r===void 0?void 0:r.debug)===null||i===void 0||i.call(r,FT.debugId,`assign: ${c.name} := ${(0,FT.toDebugString)(c.value)}`))}return{result:!0,referenceRecord:s}},"evaluateConditions");nh.evaluateConditions=zG});var LT=u(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});oh.getEndpointHeaders=void 0;var WG=Kt(),UG=vd(),jG=n((t,e)=>Object.entries(t).reduce((r,[i,s])=>({...r,[i]:s.map(o=>{let a=(0,UG.evaluateExpression)(o,"Header value entry",e);if(typeof a!="string")throw new WG.EndpointError(`Header '${i}' value '${a}' is not a string`);return a})}),{}),"getEndpointHeaders");oh.getEndpointHeaders=jG});var WT=u(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});Sd.getEndpointProperty=void 0;var zT=Kt(),VG=eE(),$G=iE(),HG=n((t,e)=>{if(Array.isArray(t))return t.map(r=>(0,Sd.getEndpointProperty)(r,e));switch(typeof t){case"string":return(0,VG.evaluateTemplate)(t,e);case"object":if(t===null)throw new zT.EndpointError(`Unexpected endpoint property: ${t}`);return(0,$G.getEndpointProperties)(t,e);case"boolean":return t;default:throw new zT.EndpointError(`Unexpected endpoint property type: ${typeof t}`)}},"getEndpointProperty");Sd.getEndpointProperty=HG});var iE=u(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});ah.getEndpointProperties=void 0;var GG=WT(),BG=n((t,e)=>Object.entries(t).reduce((r,[i,s])=>({...r,[i]:(0,GG.getEndpointProperty)(s,e)}),{}),"getEndpointProperties");ah.getEndpointProperties=BG});var UT=u(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.getEndpointUrl=void 0;var JG=Kt(),KG=vd(),YG=n((t,e)=>{let r=(0,KG.evaluateExpression)(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(i){throw console.error(`Failed to construct URL with ${r}`,i),i}throw new JG.EndpointError(`Endpoint URL must be a string, got ${typeof r}`)},"getEndpointUrl");ch.getEndpointUrl=YG});var VT=u(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});dh.evaluateEndpointRule=void 0;var jT=fd(),QG=sh(),XG=LT(),ZG=iE(),eB=UT(),tB=n((t,e)=>{var r,i;let{conditions:s,endpoint:o}=t,{result:a,referenceRecord:c}=(0,QG.evaluateConditions)(s,e);if(!a)return;let l={...e,referenceRecord:{...e.referenceRecord,...c}},{url:p,properties:f,headers:m}=o;return(i=(r=e.logger)===null||r===void 0?void 0:r.debug)===null||i===void 0||i.call(r,jT.debugId,`Resolving endpoint from template: ${(0,jT.toDebugString)(o)}`),{...m!=null&&{headers:(0,XG.getEndpointHeaders)(m,l)},...f!=null&&{properties:(0,ZG.getEndpointProperties)(f,l)},url:(0,eB.getEndpointUrl)(p,l)}},"evaluateEndpointRule");dh.evaluateEndpointRule=tB});var $T=u(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});uh.evaluateErrorRule=void 0;var rB=Kt(),iB=sh(),nB=vd(),sB=n((t,e)=>{let{conditions:r,error:i}=t,{result:s,referenceRecord:o}=(0,iB.evaluateConditions)(r,e);if(s)throw new rB.EndpointError((0,nB.evaluateExpression)(i,"Error",{...e,referenceRecord:{...e.referenceRecord,...o}}))},"evaluateErrorRule");uh.evaluateErrorRule=sB});var HT=u(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});lh.evaluateTreeRule=void 0;var oB=sh(),aB=nE(),cB=n((t,e)=>{let{conditions:r,rules:i}=t,{result:s,referenceRecord:o}=(0,oB.evaluateConditions)(r,e);if(s)return(0,aB.evaluateRules)(i,{...e,referenceRecord:{...e.referenceRecord,...o}})},"evaluateTreeRule");lh.evaluateTreeRule=cB});var nE=u(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});ph.evaluateRules=void 0;var GT=Kt(),dB=VT(),uB=$T(),lB=HT(),pB=n((t,e)=>{for(let r of t)if(r.type==="endpoint"){let i=(0,dB.evaluateEndpointRule)(r,e);if(i)return i}else if(r.type==="error")(0,uB.evaluateErrorRule)(r,e);else if(r.type==="tree"){let i=(0,lB.evaluateTreeRule)(r,e);if(i)return i}else throw new GT.EndpointError(`Unknown endpoint rule: ${r}`);throw new GT.EndpointError("Rules evaluation failed")},"evaluateRules");ph.evaluateRules=pB});var BT=u(sE=>{"use strict";Object.defineProperty(sE,"__esModule",{value:!0});var fB=(A(),b(x));fB.__exportStar(nE(),sE)});var JT=u(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});mh.resolveEndpoint=void 0;var fh=fd(),mB=Kt(),hB=BT(),_B=n((t,e)=>{var r,i,s,o,a,c;let{endpointParams:l,logger:p}=e,{parameters:f,rules:m}=t;(i=(r=e.logger)===null||r===void 0?void 0:r.debug)===null||i===void 0||i.call(r,fh.debugId,`Initial EndpointParams: ${(0,fh.toDebugString)(l)}`);let h=Object.entries(f).filter(([,g])=>g.default!=null).map(([g,S])=>[g,S.default]);if(h.length>0)for(let[g,S]of h)l[g]=(s=l[g])!==null&&s!==void 0?s:S;let _=Object.entries(f).filter(([,g])=>g.required).map(([g])=>g);for(let g of _)if(l[g]==null)throw new mB.EndpointError(`Missing required parameter: '${g}'`);let w=(0,hB.evaluateRules)(m,{endpointParams:l,logger:p,referenceRecord:{}});if(!((o=e.endpointParams)===null||o===void 0)&&o.Endpoint)try{let g=new URL(e.endpointParams.Endpoint),{protocol:S,port:ie}=g;w.url.protocol=S,w.url.port=ie}catch{}return(c=(a=e.logger)===null||a===void 0?void 0:a.debug)===null||c===void 0||c.call(a,fh.debugId,`Resolved endpoint: ${(0,fh.toDebugString)(w)}`),w},"resolveEndpoint");mh.resolveEndpoint=_B});var bd=u(Nd=>{"use strict";Object.defineProperty(Nd,"__esModule",{value:!0});var oE=(A(),b(x));oE.__exportStar(Gw(),Nd);oE.__exportStar(JT(),Nd);oE.__exportStar(Kt(),Nd)});var oP=u(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});hh.ruleSet=void 0;var rP="required",Ni="fn",bi="argv",ma="ref",aE="PartitionResult",Ur="tree",xd="error",Ad="endpoint",KT={[rP]:!1,type:"String"},YT={[rP]:!0,default:!1,type:"Boolean"},iP={[ma]:"Endpoint"},nP={[Ni]:"booleanEquals",[bi]:[{[ma]:"UseFIPS"},!0]},sP={[Ni]:"booleanEquals",[bi]:[{[ma]:"UseDualStack"},!0]},jr={},QT={[Ni]:"booleanEquals",[bi]:[!0,{[Ni]:"getAttr",[bi]:[{[ma]:aE},"supportsFIPS"]}]},XT={[Ni]:"booleanEquals",[bi]:[!0,{[Ni]:"getAttr",[bi]:[{[ma]:aE},"supportsDualStack"]}]},ZT=[iP],eP=[nP],tP=[sP],yB={version:"1.0",parameters:{Region:KT,UseDualStack:YT,UseFIPS:YT,Endpoint:KT},rules:[{conditions:[{[Ni]:"aws.partition",[bi]:[{[ma]:"Region"}],assign:aE}],type:Ur,rules:[{conditions:[{[Ni]:"isSet",[bi]:ZT},{[Ni]:"parseURL",[bi]:ZT,assign:"url"}],type:Ur,rules:[{conditions:eP,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:xd},{type:Ur,rules:[{conditions:tP,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:xd},{endpoint:{url:iP,properties:jr,headers:jr},type:Ad}]}]},{conditions:[nP,sP],type:Ur,rules:[{conditions:[QT,XT],type:Ur,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:jr,headers:jr},type:Ad}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:xd}]},{conditions:eP,type:Ur,rules:[{conditions:[QT],type:Ur,rules:[{type:Ur,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:jr,headers:jr},type:Ad}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:xd}]},{conditions:tP,type:Ur,rules:[{conditions:[XT],type:Ur,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:jr,headers:jr},type:Ad}]},{error:"DualStack is enabled but this partition does not support DualStack",type:xd}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:jr,headers:jr},type:Ad}]}]};hh.ruleSet=yB});var aP=u(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});_h.defaultEndpointResolver=void 0;var gB=bd(),wB=oP(),EB=n((t,e={})=>(0,gB.resolveEndpoint)(wB.ruleSet,{endpointParams:t,logger:e.logger}),"defaultEndpointResolver");_h.defaultEndpointResolver=EB});var uP=u(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});yh.getRuntimeConfig=void 0;var vB=k(),SB=Vn(),cP=pd(),dP=yi(),NB=aP(),bB=n(t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??cP.fromBase64,base64Encoder:t?.base64Encoder??cP.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??NB.defaultEndpointResolver,logger:t?.logger??new vB.NoOpLogger,serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??SB.parseUrl,utf8Decoder:t?.utf8Decoder??dP.fromUtf8,utf8Encoder:t?.utf8Encoder??dP.toUtf8}),"getRuntimeConfig");yh.getRuntimeConfig=bB});var lP=u(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.IMDS_REGION_PATH=Et.DEFAULTS_MODE_OPTIONS=Et.ENV_IMDS_DISABLED=Et.AWS_DEFAULT_REGION_ENV=Et.AWS_REGION_ENV=Et.AWS_EXECUTION_ENV=void 0;Et.AWS_EXECUTION_ENV="AWS_EXECUTION_ENV";Et.AWS_REGION_ENV="AWS_REGION";Et.AWS_DEFAULT_REGION_ENV="AWS_DEFAULT_REGION";Et.ENV_IMDS_DISABLED="AWS_EC2_METADATA_DISABLED";Et.DEFAULTS_MODE_OPTIONS=["in-region","cross-region","mobile","standard","legacy"];Et.IMDS_REGION_PATH="/latest/meta-data/placement/region"});var pP=u(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});gh.NODE_DEFAULTS_MODE_CONFIG_OPTIONS=void 0;var xB="AWS_DEFAULTS_MODE",AB="defaults_mode";gh.NODE_DEFAULTS_MODE_CONFIG_OPTIONS={environmentVariableSelector:t=>t[xB],configFileSelector:t=>t[AB],default:"legacy"}});var hP=u(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});wh.resolveDefaultsModeConfig=void 0;var OB=vr(),fP=ff(),mP=ln(),TB=ee(),Sn=lP(),PB=pP(),RB=n(({region:t=(0,mP.loadConfig)(OB.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=(0,mP.loadConfig)(PB.NODE_DEFAULTS_MODE_CONFIG_OPTIONS)}={})=>(0,TB.memoize)(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return IB(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Sn.DEFAULTS_MODE_OPTIONS.join(", ")}, got ${r}`)}}),"resolveDefaultsModeConfig");wh.resolveDefaultsModeConfig=RB;var IB=n(async t=>{if(t){let e=typeof t=="function"?await t():t,r=await qB();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},"resolveNodeDefaultsModeAuto"),qB=n(async()=>{var t;if(process.env[Sn.AWS_EXECUTION_ENV]&&(process.env[Sn.AWS_REGION_ENV]||process.env[Sn.AWS_DEFAULT_REGION_ENV]))return(t=process.env[Sn.AWS_REGION_ENV])!==null&&t!==void 0?t:process.env[Sn.AWS_DEFAULT_REGION_ENV];if(!process.env[Sn.ENV_IMDS_DISABLED])try{let e=await(0,fP.getInstanceMetadataEndpoint)();return(await(0,fP.httpRequest)({...e,path:Sn.IMDS_REGION_PATH})).toString()}catch{}},"inferPhysicalRegion")});var Od=u(cE=>{"use strict";Object.defineProperty(cE,"__esModule",{value:!0});var CB=(A(),b(x));CB.__exportStar(hP(),cE)});var gP=u(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});vh.getRuntimeConfig=void 0;var kB=(A(),b(x)),MB=kB.__importDefault(Hx()),Eh=vr(),DB=ed(),_P=_i(),Td=ln(),yP=rd(),FB=id(),LB=jt(),zB=ld(),WB=uP(),UB=k(),jB=Od(),VB=k(),$B=n(t=>{(0,VB.emitWarningIfUnsupportedVersion)(process.version);let e=(0,jB.resolveDefaultsModeConfig)(t),r=n(()=>e().then(UB.loadConfigsForDefaultMode),"defaultConfigProvider"),i=(0,WB.getRuntimeConfig)(t);return{...i,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??FB.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,zB.defaultUserAgent)({serviceId:i.serviceId,clientVersion:MB.default.version}),maxAttempts:t?.maxAttempts??(0,Td.loadConfig)(_P.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Td.loadConfig)(Eh.NODE_REGION_CONFIG_OPTIONS,Eh.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new yP.NodeHttpHandler(r),retryMode:t?.retryMode??(0,Td.loadConfig)({..._P.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||LB.DEFAULT_RETRY_MODE}),sha256:t?.sha256??DB.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??yP.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Td.loadConfig)(Eh.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Td.loadConfig)(Eh.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}},"getRuntimeConfig");vh.getRuntimeConfig=$B});var Pd=u(Nh=>{"use strict";Object.defineProperty(Nh,"__esModule",{value:!0});Nh.SSOClient=void 0;var HB=vr(),GB=qc(),BB=ne(),wP=Cc(),JB=kc(),KB=Mc(),EP=_i(),vP=Hc(),YB=k(),QB=$x(),XB=gP(),Sh=class extends YB.Client{constructor(e){let r=(0,XB.getRuntimeConfig)(e),i=(0,QB.resolveClientEndpointParameters)(r),s=(0,HB.resolveRegionConfig)(i),o=(0,BB.resolveEndpointConfig)(s),a=(0,EP.resolveRetryConfig)(o),c=(0,wP.resolveHostHeaderConfig)(a),l=(0,vP.resolveUserAgentConfig)(c);super(l),this.config=l,this.middlewareStack.use((0,EP.getRetryPlugin)(this.config)),this.middlewareStack.use((0,GB.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,wP.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,JB.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,KB.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,vP.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};n(Sh,"SSOClient");Nh.SSOClient=Sh});var Ah=u(xh=>{"use strict";Object.defineProperty(xh,"__esModule",{value:!0});xh.SSO=void 0;var ZB=yw(),eJ=kf(),tJ=Df(),rJ=gw(),iJ=Pd(),bh=class extends iJ.SSOClient{getRoleCredentials(e,r,i){let s=new ZB.GetRoleCredentialsCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}listAccountRoles(e,r,i){let s=new eJ.ListAccountRolesCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}listAccounts(e,r,i){let s=new tJ.ListAccountsCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}logout(e,r,i){let s=new rJ.LogoutCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}};n(bh,"SSO");xh.SSO=bh});var SP=u(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});var Oh=(A(),b(x));Oh.__exportStar(yw(),ha);Oh.__exportStar(kf(),ha);Oh.__exportStar(Df(),ha);Oh.__exportStar(gw(),ha)});var NP=u(dE=>{"use strict";Object.defineProperty(dE,"__esModule",{value:!0});var nJ=(A(),b(x));nJ.__exportStar(os(),dE)});var xP=u(bP=>{"use strict";Object.defineProperty(bP,"__esModule",{value:!0})});var AP=u(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});Th.paginateListAccountRoles=void 0;var sJ=kf(),oJ=Ah(),aJ=Pd(),cJ=n(async(t,e,...r)=>await t.send(new sJ.ListAccountRolesCommand(e),...r),"makePagedClientRequest"),dJ=n(async(t,e,...r)=>await t.listAccountRoles(e,...r),"makePagedRequest");async function*uJ(t,e,...r){let i=t.startingToken||void 0,s=!0,o;for(;s;){if(e.nextToken=i,e.maxResults=t.pageSize,t.client instanceof oJ.SSO)o=await dJ(t.client,e,...r);else if(t.client instanceof aJ.SSOClient)o=await cJ(t.client,e,...r);else throw new Error("Invalid client, expected SSO | SSOClient");yield o;let a=i;i=o.nextToken,s=!!(i&&(!t.stopOnSameToken||i!==a))}return void 0}n(uJ,"paginateListAccountRoles");Th.paginateListAccountRoles=uJ});var OP=u(Ph=>{"use strict";Object.defineProperty(Ph,"__esModule",{value:!0});Ph.paginateListAccounts=void 0;var lJ=Df(),pJ=Ah(),fJ=Pd(),mJ=n(async(t,e,...r)=>await t.send(new lJ.ListAccountsCommand(e),...r),"makePagedClientRequest"),hJ=n(async(t,e,...r)=>await t.listAccounts(e,...r),"makePagedRequest");async function*_J(t,e,...r){let i=t.startingToken||void 0,s=!0,o;for(;s;){if(e.nextToken=i,e.maxResults=t.pageSize,t.client instanceof pJ.SSO)o=await hJ(t.client,e,...r);else if(t.client instanceof fJ.SSOClient)o=await mJ(t.client,e,...r);else throw new Error("Invalid client, expected SSO | SSOClient");yield o;let a=i;i=o.nextToken,s=!!(i&&(!t.stopOnSameToken||i!==a))}return void 0}n(_J,"paginateListAccounts");Ph.paginateListAccounts=_J});var TP=u(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});var uE=(A(),b(x));uE.__exportStar(xP(),Rd);uE.__exportStar(AP(),Rd);uE.__exportStar(OP(),Rd)});var PP=u(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.SSOServiceException=void 0;var Id=(A(),b(x));Id.__exportStar(Ah(),xi);Id.__exportStar(Pd(),xi);Id.__exportStar(SP(),xi);Id.__exportStar(NP(),xi);Id.__exportStar(TP(),xi);var yJ=Ef();Object.defineProperty(xi,"SSOServiceException",{enumerable:!0,get:function(){return yJ.SSOServiceException}})});var Rh=u(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.REFRESH_MESSAGE=_a.EXPIRE_WINDOW_MS=void 0;_a.EXPIRE_WINDOW_MS=5*60*1e3;_a.REFRESH_MESSAGE="To refresh this SSO session run 'aws sso login' with the corresponding profile."});var qh=u(Ih=>{"use strict";Object.defineProperty(Ih,"__esModule",{value:!0});Ih.SSOOIDCServiceException=void 0;var gJ=k(),ya=class extends gJ.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,ya.prototype)}};n(ya,"SSOOIDCServiceException");Ih.SSOOIDCServiceException=ya});var Ra=u(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.StartDeviceAuthorizationResponseFilterSensitiveLog=z.StartDeviceAuthorizationRequestFilterSensitiveLog=z.RegisterClientResponseFilterSensitiveLog=z.RegisterClientRequestFilterSensitiveLog=z.CreateTokenResponseFilterSensitiveLog=z.CreateTokenRequestFilterSensitiveLog=z.InvalidClientMetadataException=z.UnsupportedGrantTypeException=z.UnauthorizedClientException=z.SlowDownException=z.InvalidScopeException=z.InvalidRequestException=z.InvalidGrantException=z.InvalidClientException=z.InternalServerException=z.ExpiredTokenException=z.AuthorizationPendingException=z.AccessDeniedException=void 0;var Yt=qh(),ga=class extends Yt.SSOOIDCServiceException{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,ga.prototype),this.error=e.error,this.error_description=e.error_description}};n(ga,"AccessDeniedException");z.AccessDeniedException=ga;var wa=class extends Yt.SSOOIDCServiceException{constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,wa.prototype),this.error=e.error,this.error_description=e.error_description}};n(wa,"AuthorizationPendingException");z.AuthorizationPendingException=wa;var Ea=class extends Yt.SSOOIDCServiceException{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Ea.prototype),this.error=e.error,this.error_description=e.error_description}};n(Ea,"ExpiredTokenException");z.ExpiredTokenException=Ea;var va=class extends Yt.SSOOIDCServiceException{constructor(e){super({name:"InternalServerException",$fault:"server",...e}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,va.prototype),this.error=e.error,this.error_description=e.error_description}};n(va,"InternalServerException");z.InternalServerException=va;var Sa=class extends Yt.SSOOIDCServiceException{constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Sa.prototype),this.error=e.error,this.error_description=e.error_description}};n(Sa,"InvalidClientException");z.InvalidClientException=Sa;var Na=class extends Yt.SSOOIDCServiceException{constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,Na.prototype),this.error=e.error,this.error_description=e.error_description}};n(Na,"InvalidGrantException");z.InvalidGrantException=Na;var ba=class extends Yt.SSOOIDCServiceException{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,ba.prototype),this.error=e.error,this.error_description=e.error_description}};n(ba,"InvalidRequestException");z.InvalidRequestException=ba;var xa=class extends Yt.SSOOIDCServiceException{constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,xa.prototype),this.error=e.error,this.error_description=e.error_description}};n(xa,"InvalidScopeException");z.InvalidScopeException=xa;var Aa=class extends Yt.SSOOIDCServiceException{constructor(e){super({name:"SlowDownException",$fault:"client",...e}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,Aa.prototype),this.error=e.error,this.error_description=e.error_description}};n(Aa,"SlowDownException");z.SlowDownException=Aa;var Oa=class extends Yt.SSOOIDCServiceException{constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Oa.prototype),this.error=e.error,this.error_description=e.error_description}};n(Oa,"UnauthorizedClientException");z.UnauthorizedClientException=Oa;var Ta=class extends Yt.SSOOIDCServiceException{constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,Ta.prototype),this.error=e.error,this.error_description=e.error_description}};n(Ta,"UnsupportedGrantTypeException");z.UnsupportedGrantTypeException=Ta;var Pa=class extends Yt.SSOOIDCServiceException{constructor(e){super({name:"InvalidClientMetadataException",$fault:"client",...e}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,Pa.prototype),this.error=e.error,this.error_description=e.error_description}};n(Pa,"InvalidClientMetadataException");z.InvalidClientMetadataException=Pa;var wJ=n(t=>({...t}),"CreateTokenRequestFilterSensitiveLog");z.CreateTokenRequestFilterSensitiveLog=wJ;var EJ=n(t=>({...t}),"CreateTokenResponseFilterSensitiveLog");z.CreateTokenResponseFilterSensitiveLog=EJ;var vJ=n(t=>({...t}),"RegisterClientRequestFilterSensitiveLog");z.RegisterClientRequestFilterSensitiveLog=vJ;var SJ=n(t=>({...t}),"RegisterClientResponseFilterSensitiveLog");z.RegisterClientResponseFilterSensitiveLog=SJ;var NJ=n(t=>({...t}),"StartDeviceAuthorizationRequestFilterSensitiveLog");z.StartDeviceAuthorizationRequestFilterSensitiveLog=NJ;var bJ=n(t=>({...t}),"StartDeviceAuthorizationResponseFilterSensitiveLog");z.StartDeviceAuthorizationResponseFilterSensitiveLog=bJ});var kh=u(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.deserializeAws_restJson1StartDeviceAuthorizationCommand=vt.deserializeAws_restJson1RegisterClientCommand=vt.deserializeAws_restJson1CreateTokenCommand=vt.serializeAws_restJson1StartDeviceAuthorizationCommand=vt.serializeAws_restJson1RegisterClientCommand=vt.serializeAws_restJson1CreateTokenCommand=void 0;var lE=at(),O=k(),Qt=Ra(),pE=qh(),xJ=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/token`,l;return l=JSON.stringify({...t.clientId!=null&&{clientId:t.clientId},...t.clientSecret!=null&&{clientSecret:t.clientSecret},...t.code!=null&&{code:t.code},...t.deviceCode!=null&&{deviceCode:t.deviceCode},...t.grantType!=null&&{grantType:t.grantType},...t.redirectUri!=null&&{redirectUri:t.redirectUri},...t.refreshToken!=null&&{refreshToken:t.refreshToken},...t.scope!=null&&{scope:kP(t.scope,e)}}),new lE.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1CreateTokenCommand");vt.serializeAws_restJson1CreateTokenCommand=xJ;var AJ=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/client/register`,l;return l=JSON.stringify({...t.clientName!=null&&{clientName:t.clientName},...t.clientType!=null&&{clientType:t.clientType},...t.scopes!=null&&{scopes:kP(t.scopes,e)}}),new lE.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1RegisterClientCommand");vt.serializeAws_restJson1RegisterClientCommand=AJ;var OJ=n(async(t,e)=>{let{hostname:r,protocol:i="https",port:s,path:o}=await e.endpoint(),a={"content-type":"application/json"},c=`${o?.endsWith("/")?o.slice(0,-1):o||""}/device_authorization`,l;return l=JSON.stringify({...t.clientId!=null&&{clientId:t.clientId},...t.clientSecret!=null&&{clientSecret:t.clientSecret},...t.startUrl!=null&&{startUrl:t.startUrl}}),new lE.HttpRequest({protocol:i,hostname:r,port:s,method:"POST",headers:a,path:c,body:l})},"serializeAws_restJson1StartDeviceAuthorizationCommand");vt.serializeAws_restJson1StartDeviceAuthorizationCommand=OJ;var TJ=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return PJ(t,e);let r=dt({$metadata:ut(t)}),i=(0,O.expectNonNull)((0,O.expectObject)(await Ch(t.body,e)),"body");return i.accessToken!=null&&(r.accessToken=(0,O.expectString)(i.accessToken)),i.expiresIn!=null&&(r.expiresIn=(0,O.expectInt32)(i.expiresIn)),i.idToken!=null&&(r.idToken=(0,O.expectString)(i.idToken)),i.refreshToken!=null&&(r.refreshToken=(0,O.expectString)(i.refreshToken)),i.tokenType!=null&&(r.tokenType=(0,O.expectString)(i.tokenType)),r},"deserializeAws_restJson1CreateTokenCommand");vt.deserializeAws_restJson1CreateTokenCommand=TJ;var PJ=n(async(t,e)=>{let r={...t,body:await hE(t.body,e)},i=_E(t,r.body);switch(i){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await kJ(r,e);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await MJ(r,e);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await DJ(r,e);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await fE(r,e);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await RP(r,e);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await LJ(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await mE(r,e);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await IP(r,e);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await qP(r,e);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await CP(r,e);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await zJ(r,e);default:let s=r.body;(0,O.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:pE.SSOOIDCServiceException,errorCode:i})}},"deserializeAws_restJson1CreateTokenCommandError"),RJ=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return IJ(t,e);let r=dt({$metadata:ut(t)}),i=(0,O.expectNonNull)((0,O.expectObject)(await Ch(t.body,e)),"body");return i.authorizationEndpoint!=null&&(r.authorizationEndpoint=(0,O.expectString)(i.authorizationEndpoint)),i.clientId!=null&&(r.clientId=(0,O.expectString)(i.clientId)),i.clientIdIssuedAt!=null&&(r.clientIdIssuedAt=(0,O.expectLong)(i.clientIdIssuedAt)),i.clientSecret!=null&&(r.clientSecret=(0,O.expectString)(i.clientSecret)),i.clientSecretExpiresAt!=null&&(r.clientSecretExpiresAt=(0,O.expectLong)(i.clientSecretExpiresAt)),i.tokenEndpoint!=null&&(r.tokenEndpoint=(0,O.expectString)(i.tokenEndpoint)),r},"deserializeAws_restJson1RegisterClientCommand");vt.deserializeAws_restJson1RegisterClientCommand=RJ;var IJ=n(async(t,e)=>{let r={...t,body:await hE(t.body,e)},i=_E(t,r.body);switch(i){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await fE(r,e);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await FJ(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await mE(r,e);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await IP(r,e);default:let s=r.body;(0,O.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:pE.SSOOIDCServiceException,errorCode:i})}},"deserializeAws_restJson1RegisterClientCommandError"),qJ=n(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return CJ(t,e);let r=dt({$metadata:ut(t)}),i=(0,O.expectNonNull)((0,O.expectObject)(await Ch(t.body,e)),"body");return i.deviceCode!=null&&(r.deviceCode=(0,O.expectString)(i.deviceCode)),i.expiresIn!=null&&(r.expiresIn=(0,O.expectInt32)(i.expiresIn)),i.interval!=null&&(r.interval=(0,O.expectInt32)(i.interval)),i.userCode!=null&&(r.userCode=(0,O.expectString)(i.userCode)),i.verificationUri!=null&&(r.verificationUri=(0,O.expectString)(i.verificationUri)),i.verificationUriComplete!=null&&(r.verificationUriComplete=(0,O.expectString)(i.verificationUriComplete)),r},"deserializeAws_restJson1StartDeviceAuthorizationCommand");vt.deserializeAws_restJson1StartDeviceAuthorizationCommand=qJ;var CJ=n(async(t,e)=>{let r={...t,body:await hE(t.body,e)},i=_E(t,r.body);switch(i){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await fE(r,e);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await RP(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await mE(r,e);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await qP(r,e);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await CP(r,e);default:let s=r.body;(0,O.throwDefaultError)({output:t,parsedBody:s,exceptionCtor:pE.SSOOIDCServiceException,errorCode:i})}},"deserializeAws_restJson1StartDeviceAuthorizationCommandError"),dt=O.map,kJ=n(async(t,e)=>{let r=dt({}),i=t.body;i.error!=null&&(r.error=(0,O.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,O.expectString)(i.error_description));let s=new Qt.AccessDeniedException({$metadata:ut(t),...r});return(0,O.decorateServiceException)(s,t.body)},"deserializeAws_restJson1AccessDeniedExceptionResponse"),MJ=n(async(t,e)=>{let r=dt({}),i=t.body;i.error!=null&&(r.error=(0,O.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,O.expectString)(i.error_description));let s=new Qt.AuthorizationPendingException({$metadata:ut(t),...r});return(0,O.decorateServiceException)(s,t.body)},"deserializeAws_restJson1AuthorizationPendingExceptionResponse"),DJ=n(async(t,e)=>{let r=dt({}),i=t.body;i.error!=null&&(r.error=(0,O.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,O.expectString)(i.error_description));let s=new Qt.ExpiredTokenException({$metadata:ut(t),...r});return(0,O.decorateServiceException)(s,t.body)},"deserializeAws_restJson1ExpiredTokenExceptionResponse"),fE=n(async(t,e)=>{let r=dt({}),i=t.body;i.error!=null&&(r.error=(0,O.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,O.expectString)(i.error_description));let s=new Qt.InternalServerException({$metadata:ut(t),...r});return(0,O.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InternalServerExceptionResponse"),RP=n(async(t,e)=>{let r=dt({}),i=t.body;i.error!=null&&(r.error=(0,O.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,O.expectString)(i.error_description));let s=new Qt.InvalidClientException({$metadata:ut(t),...r});return(0,O.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidClientExceptionResponse"),FJ=n(async(t,e)=>{let r=dt({}),i=t.body;i.error!=null&&(r.error=(0,O.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,O.expectString)(i.error_description));let s=new Qt.InvalidClientMetadataException({$metadata:ut(t),...r});return(0,O.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidClientMetadataExceptionResponse"),LJ=n(async(t,e)=>{let r=dt({}),i=t.body;i.error!=null&&(r.error=(0,O.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,O.expectString)(i.error_description));let s=new Qt.InvalidGrantException({$metadata:ut(t),...r});return(0,O.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidGrantExceptionResponse"),mE=n(async(t,e)=>{let r=dt({}),i=t.body;i.error!=null&&(r.error=(0,O.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,O.expectString)(i.error_description));let s=new Qt.InvalidRequestException({$metadata:ut(t),...r});return(0,O.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidRequestExceptionResponse"),IP=n(async(t,e)=>{let r=dt({}),i=t.body;i.error!=null&&(r.error=(0,O.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,O.expectString)(i.error_description));let s=new Qt.InvalidScopeException({$metadata:ut(t),...r});return(0,O.decorateServiceException)(s,t.body)},"deserializeAws_restJson1InvalidScopeExceptionResponse"),qP=n(async(t,e)=>{let r=dt({}),i=t.body;i.error!=null&&(r.error=(0,O.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,O.expectString)(i.error_description));let s=new Qt.SlowDownException({$metadata:ut(t),...r});return(0,O.decorateServiceException)(s,t.body)},"deserializeAws_restJson1SlowDownExceptionResponse"),CP=n(async(t,e)=>{let r=dt({}),i=t.body;i.error!=null&&(r.error=(0,O.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,O.expectString)(i.error_description));let s=new Qt.UnauthorizedClientException({$metadata:ut(t),...r});return(0,O.decorateServiceException)(s,t.body)},"deserializeAws_restJson1UnauthorizedClientExceptionResponse"),zJ=n(async(t,e)=>{let r=dt({}),i=t.body;i.error!=null&&(r.error=(0,O.expectString)(i.error)),i.error_description!=null&&(r.error_description=(0,O.expectString)(i.error_description));let s=new Qt.UnsupportedGrantTypeException({$metadata:ut(t),...r});return(0,O.decorateServiceException)(s,t.body)},"deserializeAws_restJson1UnsupportedGrantTypeExceptionResponse"),kP=n((t,e)=>t.filter(r=>r!=null).map(r=>r),"serializeAws_restJson1Scopes"),ut=n(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),WJ=n((t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),"collectBody"),UJ=n((t,e)=>WJ(t,e).then(r=>e.utf8Encoder(r)),"collectBodyString"),Ch=n((t,e)=>UJ(t,e).then(r=>r.length?JSON.parse(r):{}),"parseBody"),hE=n(async(t,e)=>{let r=await Ch(t,e);return r.message=r.message??r.Message,r},"parseErrorBody"),_E=n((t,e)=>{let r=n((o,a)=>Object.keys(o).find(c=>c.toLowerCase()===a.toLowerCase()),"findKey"),i=n(o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},"sanitizeErrorCode"),s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return i(t.headers[s]);if(e.code!==void 0)return i(e.code);if(e.__type!==void 0)return i(e.__type)},"loadRestJsonErrorCode")});var yE=u(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.CreateTokenCommand=void 0;var jJ=ne(),VJ=ge(),$J=k(),MP=Ra(),DP=kh(),Ia=class extends $J.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,VJ.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,jJ.getEndpointPlugin)(r,Ia.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:MP.CreateTokenRequestFilterSensitiveLog,outputFilterSensitiveLog:MP.CreateTokenResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,DP.serializeAws_restJson1CreateTokenCommand)(e,r)}deserialize(e,r){return(0,DP.deserializeAws_restJson1CreateTokenCommand)(e,r)}};n(Ia,"CreateTokenCommand");Mh.CreateTokenCommand=Ia});var gE=u(Dh=>{"use strict";Object.defineProperty(Dh,"__esModule",{value:!0});Dh.RegisterClientCommand=void 0;var HJ=ne(),GJ=ge(),BJ=k(),FP=Ra(),LP=kh(),qa=class extends BJ.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,GJ.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,HJ.getEndpointPlugin)(r,qa.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:FP.RegisterClientRequestFilterSensitiveLog,outputFilterSensitiveLog:FP.RegisterClientResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,LP.serializeAws_restJson1RegisterClientCommand)(e,r)}deserialize(e,r){return(0,LP.deserializeAws_restJson1RegisterClientCommand)(e,r)}};n(qa,"RegisterClientCommand");Dh.RegisterClientCommand=qa});var wE=u(Fh=>{"use strict";Object.defineProperty(Fh,"__esModule",{value:!0});Fh.StartDeviceAuthorizationCommand=void 0;var JJ=ne(),KJ=ge(),YJ=k(),zP=Ra(),WP=kh(),Ca=class extends YJ.Command{constructor(e){super(),this.input=e}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(e,r,i){this.middlewareStack.use((0,KJ.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,JJ.getEndpointPlugin)(r,Ca.getEndpointParameterInstructions()));let s=e.concat(this.middlewareStack),{logger:o}=r,l={logger:o,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:zP.StartDeviceAuthorizationRequestFilterSensitiveLog,outputFilterSensitiveLog:zP.StartDeviceAuthorizationResponseFilterSensitiveLog},{requestHandler:p}=r;return s.resolve(f=>p.handle(f.request,i||{}),l)}serialize(e,r){return(0,WP.serializeAws_restJson1StartDeviceAuthorizationCommand)(e,r)}deserialize(e,r){return(0,WP.deserializeAws_restJson1StartDeviceAuthorizationCommand)(e,r)}};n(Ca,"StartDeviceAuthorizationCommand");Fh.StartDeviceAuthorizationCommand=Ca});var UP=u(Lh=>{"use strict";Object.defineProperty(Lh,"__esModule",{value:!0});Lh.resolveClientEndpointParameters=void 0;var QJ=n(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"}),"resolveClientEndpointParameters");Lh.resolveClientEndpointParameters=QJ});var jP=u((KEe,XJ)=>{XJ.exports={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.279.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.272.0","@aws-sdk/fetch-http-handler":"3.272.0","@aws-sdk/hash-node":"3.272.0","@aws-sdk/invalid-dependency":"3.272.0","@aws-sdk/middleware-content-length":"3.272.0","@aws-sdk/middleware-endpoint":"3.272.0","@aws-sdk/middleware-host-header":"3.278.0","@aws-sdk/middleware-logger":"3.272.0","@aws-sdk/middleware-recursion-detection":"3.272.0","@aws-sdk/middleware-retry":"3.272.0","@aws-sdk/middleware-serde":"3.272.0","@aws-sdk/middleware-stack":"3.272.0","@aws-sdk/middleware-user-agent":"3.272.0","@aws-sdk/node-config-provider":"3.272.0","@aws-sdk/node-http-handler":"3.272.0","@aws-sdk/protocol-http":"3.272.0","@aws-sdk/smithy-client":"3.279.0","@aws-sdk/types":"3.272.0","@aws-sdk/url-parser":"3.272.0","@aws-sdk/util-base64":"3.208.0","@aws-sdk/util-body-length-browser":"3.188.0","@aws-sdk/util-body-length-node":"3.208.0","@aws-sdk/util-defaults-mode-browser":"3.279.0","@aws-sdk/util-defaults-mode-node":"3.279.0","@aws-sdk/util-endpoints":"3.272.0","@aws-sdk/util-retry":"3.272.0","@aws-sdk/util-user-agent-browser":"3.272.0","@aws-sdk/util-user-agent-node":"3.272.0","@aws-sdk/util-utf8":"3.254.0",tslib:"^2.3.1"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.208.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.19.2",typescript:"~4.6.2"},overrides:{typedoc:{typescript:"~4.6.2"}},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}}});var eR=u(zh=>{"use strict";Object.defineProperty(zh,"__esModule",{value:!0});zh.ruleSet=void 0;var YP="required",Ai="fn",Oi="argv",ka="ref",EE="PartitionResult",Vr="tree",qd="error",Cd="endpoint",VP={[YP]:!1,type:"String"},$P={[YP]:!0,default:!1,type:"Boolean"},QP={[ka]:"Endpoint"},XP={[Ai]:"booleanEquals",[Oi]:[{[ka]:"UseFIPS"},!0]},ZP={[Ai]:"booleanEquals",[Oi]:[{[ka]:"UseDualStack"},!0]},$r={},HP={[Ai]:"booleanEquals",[Oi]:[!0,{[Ai]:"getAttr",[Oi]:[{[ka]:EE},"supportsFIPS"]}]},GP={[Ai]:"booleanEquals",[Oi]:[!0,{[Ai]:"getAttr",[Oi]:[{[ka]:EE},"supportsDualStack"]}]},BP=[QP],JP=[XP],KP=[ZP],ZJ={version:"1.0",parameters:{Region:VP,UseDualStack:$P,UseFIPS:$P,Endpoint:VP},rules:[{conditions:[{[Ai]:"aws.partition",[Oi]:[{[ka]:"Region"}],assign:EE}],type:Vr,rules:[{conditions:[{[Ai]:"isSet",[Oi]:BP},{[Ai]:"parseURL",[Oi]:BP,assign:"url"}],type:Vr,rules:[{conditions:JP,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:qd},{type:Vr,rules:[{conditions:KP,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:qd},{endpoint:{url:QP,properties:$r,headers:$r},type:Cd}]}]},{conditions:[XP,ZP],type:Vr,rules:[{conditions:[HP,GP],type:Vr,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:$r,headers:$r},type:Cd}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:qd}]},{conditions:JP,type:Vr,rules:[{conditions:[HP],type:Vr,rules:[{type:Vr,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:$r,headers:$r},type:Cd}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:qd}]},{conditions:KP,type:Vr,rules:[{conditions:[GP],type:Vr,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:$r,headers:$r},type:Cd}]},{error:"DualStack is enabled but this partition does not support DualStack",type:qd}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:$r,headers:$r},type:Cd}]}]};zh.ruleSet=ZJ});var tR=u(Wh=>{"use strict";Object.defineProperty(Wh,"__esModule",{value:!0});Wh.defaultEndpointResolver=void 0;var e4=bd(),t4=eR(),r4=n((t,e={})=>(0,e4.resolveEndpoint)(t4.ruleSet,{endpointParams:t,logger:e.logger}),"defaultEndpointResolver");Wh.defaultEndpointResolver=r4});var nR=u(Uh=>{"use strict";Object.defineProperty(Uh,"__esModule",{value:!0});Uh.getRuntimeConfig=void 0;var i4=k(),n4=Vn(),rR=pd(),iR=yi(),s4=tR(),o4=n(t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??rR.fromBase64,base64Encoder:t?.base64Encoder??rR.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??s4.defaultEndpointResolver,logger:t?.logger??new i4.NoOpLogger,serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??n4.parseUrl,utf8Decoder:t?.utf8Decoder??iR.fromUtf8,utf8Encoder:t?.utf8Encoder??iR.toUtf8}),"getRuntimeConfig");Uh.getRuntimeConfig=o4});var aR=u(Vh=>{"use strict";Object.defineProperty(Vh,"__esModule",{value:!0});Vh.getRuntimeConfig=void 0;var a4=(A(),b(x)),c4=a4.__importDefault(jP()),jh=vr(),d4=ed(),sR=_i(),kd=ln(),oR=rd(),u4=id(),l4=jt(),p4=ld(),f4=nR(),m4=k(),h4=Od(),_4=k(),y4=n(t=>{(0,_4.emitWarningIfUnsupportedVersion)(process.version);let e=(0,h4.resolveDefaultsModeConfig)(t),r=n(()=>e().then(m4.loadConfigsForDefaultMode),"defaultConfigProvider"),i=(0,f4.getRuntimeConfig)(t);return{...i,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??u4.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,p4.defaultUserAgent)({serviceId:i.serviceId,clientVersion:c4.default.version}),maxAttempts:t?.maxAttempts??(0,kd.loadConfig)(sR.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,kd.loadConfig)(jh.NODE_REGION_CONFIG_OPTIONS,jh.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new oR.NodeHttpHandler(r),retryMode:t?.retryMode??(0,kd.loadConfig)({...sR.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||l4.DEFAULT_RETRY_MODE}),sha256:t?.sha256??d4.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??oR.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,kd.loadConfig)(jh.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,kd.loadConfig)(jh.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}},"getRuntimeConfig");Vh.getRuntimeConfig=y4});var vE=u(Hh=>{"use strict";Object.defineProperty(Hh,"__esModule",{value:!0});Hh.SSOOIDCClient=void 0;var g4=vr(),w4=qc(),E4=ne(),cR=Cc(),v4=kc(),S4=Mc(),dR=_i(),uR=Hc(),N4=k(),b4=UP(),x4=aR(),$h=class extends N4.Client{constructor(e){let r=(0,x4.getRuntimeConfig)(e),i=(0,b4.resolveClientEndpointParameters)(r),s=(0,g4.resolveRegionConfig)(i),o=(0,E4.resolveEndpointConfig)(s),a=(0,dR.resolveRetryConfig)(o),c=(0,cR.resolveHostHeaderConfig)(a),l=(0,uR.resolveUserAgentConfig)(c);super(l),this.config=l,this.middlewareStack.use((0,dR.getRetryPlugin)(this.config)),this.middlewareStack.use((0,w4.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,cR.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,v4.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,S4.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,uR.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};n($h,"SSOOIDCClient");Hh.SSOOIDCClient=$h});var lR=u(Bh=>{"use strict";Object.defineProperty(Bh,"__esModule",{value:!0});Bh.SSOOIDC=void 0;var A4=yE(),O4=gE(),T4=wE(),P4=vE(),Gh=class extends P4.SSOOIDCClient{createToken(e,r,i){let s=new A4.CreateTokenCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}registerClient(e,r,i){let s=new O4.RegisterClientCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}startDeviceAuthorization(e,r,i){let s=new T4.StartDeviceAuthorizationCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}};n(Gh,"SSOOIDC");Bh.SSOOIDC=Gh});var pR=u(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});var SE=(A(),b(x));SE.__exportStar(yE(),Md);SE.__exportStar(gE(),Md);SE.__exportStar(wE(),Md)});var fR=u(NE=>{"use strict";Object.defineProperty(NE,"__esModule",{value:!0});var R4=(A(),b(x));R4.__exportStar(Ra(),NE)});var bE=u(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.SSOOIDCServiceException=void 0;var Jh=(A(),b(x));Jh.__exportStar(lR(),Nn);Jh.__exportStar(vE(),Nn);Jh.__exportStar(pR(),Nn);Jh.__exportStar(fR(),Nn);var I4=qh();Object.defineProperty(Nn,"SSOOIDCServiceException",{enumerable:!0,get:function(){return I4.SSOOIDCServiceException}})});var mR=u(Kh=>{"use strict";Object.defineProperty(Kh,"__esModule",{value:!0});Kh.getSsoOidcClient=void 0;var q4=bE(),xE={},C4=n(t=>{if(xE[t])return xE[t];let e=new q4.SSOOIDCClient({region:t});return xE[t]=e,e},"getSsoOidcClient");Kh.getSsoOidcClient=C4});var hR=u(Yh=>{"use strict";Object.defineProperty(Yh,"__esModule",{value:!0});Yh.getNewSsoOidcToken=void 0;var k4=bE(),M4=mR(),D4=n((t,e)=>(0,M4.getSsoOidcClient)(e).send(new k4.CreateTokenCommand({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"})),"getNewSsoOidcToken");Yh.getNewSsoOidcToken=D4});var _R=u(Qh=>{"use strict";Object.defineProperty(Qh,"__esModule",{value:!0});Qh.validateTokenExpiry=void 0;var F4=ee(),L4=Rh(),z4=n(t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new F4.TokenProviderError(`Token is expired. ${L4.REFRESH_MESSAGE}`,!1)},"validateTokenExpiry");Qh.validateTokenExpiry=z4});var yR=u(Xh=>{"use strict";Object.defineProperty(Xh,"__esModule",{value:!0});Xh.validateTokenKey=void 0;var W4=ee(),U4=Rh(),j4=n((t,e,r=!1)=>{if(typeof e>"u")throw new W4.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${U4.REFRESH_MESSAGE}`,!1)},"validateTokenKey");Xh.validateTokenKey=j4});var gR=u(Zh=>{"use strict";Object.defineProperty(Zh,"__esModule",{value:!0});Zh.writeSSOTokenToFile=void 0;var V4=Rr(),$4=W("fs"),{writeFile:H4}=$4.promises,G4=n((t,e)=>{let r=(0,V4.getSSOTokenFilepath)(t),i=JSON.stringify(e,null,2);return H4(r,i)},"writeSSOTokenToFile");Zh.writeSSOTokenToFile=G4});var AE=u(t_=>{"use strict";Object.defineProperty(t_,"__esModule",{value:!0});t_.fromSso=void 0;var Dd=ee(),e_=Rr(),wR=Rh(),B4=hR(),ER=_R(),ls=yR(),J4=gR(),vR=new Date(0),K4=n((t={})=>async()=>{let e=await(0,e_.parseKnownFiles)(t),r=(0,e_.getProfileName)(t),i=e[r];if(i){if(!i.sso_session)throw new Dd.TokenProviderError(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new Dd.TokenProviderError(`Profile '${r}' could not be found in shared credentials file.`,!1);let s=i.sso_session,a=(await(0,e_.loadSsoSessionData)(t))[s];if(!a)throw new Dd.TokenProviderError(`Sso session '${s}' could not be found in shared credentials file.`,!1);for(let _ of["sso_start_url","sso_region"])if(!a[_])throw new Dd.TokenProviderError(`Sso session '${s}' is missing required property '${_}'.`,!1);let c=a.sso_start_url,l=a.sso_region,p;try{p=await(0,e_.getSSOTokenFromFile)(s)}catch{throw new Dd.TokenProviderError(`The SSO session token associated with profile=${r} was not found or is invalid. ${wR.REFRESH_MESSAGE}`,!1)}(0,ls.validateTokenKey)("accessToken",p.accessToken),(0,ls.validateTokenKey)("expiresAt",p.expiresAt);let{accessToken:f,expiresAt:m}=p,h={token:f,expiration:new Date(m)};if(h.expiration.getTime()-Date.now()>wR.EXPIRE_WINDOW_MS)return h;if(Date.now()-vR.getTime()<30*1e3)return(0,ER.validateTokenExpiry)(h),h;(0,ls.validateTokenKey)("clientId",p.clientId,!0),(0,ls.validateTokenKey)("clientSecret",p.clientSecret,!0),(0,ls.validateTokenKey)("refreshToken",p.refreshToken,!0);try{vR.setTime(Date.now());let _=await(0,B4.getNewSsoOidcToken)(p,l);(0,ls.validateTokenKey)("accessToken",_.accessToken),(0,ls.validateTokenKey)("expiresIn",_.expiresIn);let w=new Date(Date.now()+_.expiresIn*1e3);try{await(0,J4.writeSSOTokenToFile)(s,{...p,accessToken:_.accessToken,expiresAt:w.toISOString(),refreshToken:_.refreshToken})}catch{}return{token:_.accessToken,expiration:w}}catch{return(0,ER.validateTokenExpiry)(h),h}},"fromSso");t_.fromSso=K4});var SR=u(r_=>{"use strict";Object.defineProperty(r_,"__esModule",{value:!0});r_.fromStatic=void 0;var Y4=ee(),Q4=n(({token:t})=>async()=>{if(!t||!t.token)throw new Y4.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},"fromStatic");r_.fromStatic=Q4});var NR=u(i_=>{"use strict";Object.defineProperty(i_,"__esModule",{value:!0});i_.nodeProvider=void 0;var OE=ee(),X4=AE(),Z4=n((t={})=>(0,OE.memoize)((0,OE.chain)((0,X4.fromSso)(t),async()=>{throw new OE.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0),"nodeProvider");i_.nodeProvider=Z4});var bR=u(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});var TE=(A(),b(x));TE.__exportStar(AE(),Fd);TE.__exportStar(SR(),Fd);TE.__exportStar(NR(),Fd)});var AR=u(n_=>{"use strict";Object.defineProperty(n_,"__esModule",{value:!0});n_.resolveSSOCredentials=void 0;var xR=PP(),Ld=ee(),eK=Rr(),tK=bR(),rK=15*60*1e3,zd=!1,iK=n(async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:i,ssoRoleName:s,ssoClient:o,profile:a})=>{let c,l="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let S=await(0,tK.fromSso)({profile:a})();c={accessToken:S.token,expiresAt:new Date(S.expiration).toISOString()}}catch(S){throw new Ld.CredentialsProviderError(S.message,zd)}else try{c=await(0,eK.getSSOTokenFromFile)(t)}catch{throw new Ld.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${l}`,zd)}if(new Date(c.expiresAt).getTime()-Date.now()<=rK)throw new Ld.CredentialsProviderError(`The SSO session associated with this profile has expired. ${l}`,zd);let{accessToken:p}=c,f=o||new xR.SSOClient({region:i}),m;try{m=await f.send(new xR.GetRoleCredentialsCommand({accountId:r,roleName:s,accessToken:p}))}catch(S){throw Ld.CredentialsProviderError.from(S,zd)}let{roleCredentials:{accessKeyId:h,secretAccessKey:_,sessionToken:w,expiration:g}={}}=m;if(!h||!_||!w||!g)throw new Ld.CredentialsProviderError("SSO returns an invalid temporary credential.",zd);return{accessKeyId:h,secretAccessKey:_,sessionToken:w,expiration:new Date(g)}},"resolveSSOCredentials");n_.resolveSSOCredentials=iK});var PE=u(s_=>{"use strict";Object.defineProperty(s_,"__esModule",{value:!0});s_.validateSsoProfile=void 0;var nK=ee(),sK=n(t=>{let{sso_start_url:e,sso_account_id:r,sso_region:i,sso_role_name:s}=t;if(!e||!r||!i||!s)throw new nK.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return t},"validateSsoProfile");s_.validateSsoProfile=sK});var TR=u(o_=>{"use strict";Object.defineProperty(o_,"__esModule",{value:!0});o_.fromSSO=void 0;var Wd=ee(),RE=Rr(),oK=hw(),OR=AR(),aK=PE(),cK=n((t={})=>async()=>{let{ssoStartUrl:e,ssoAccountId:r,ssoRegion:i,ssoRoleName:s,ssoClient:o,ssoSession:a}=t,c=(0,RE.getProfileName)(t);if(!e&&!r&&!i&&!s&&!a){let p=(await(0,RE.parseKnownFiles)(t))[c];if(!p)throw new Wd.CredentialsProviderError(`Profile ${c} was not found.`);if(!(0,oK.isSsoProfile)(p))throw new Wd.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`);if(p?.sso_session){let S=(await(0,RE.loadSsoSessionData)(t))[p.sso_session],ie=` configurations in profile ${c} and sso-session ${p.sso_session}`;if(i&&i!==S.sso_region)throw new Wd.CredentialsProviderError("Conflicting SSO region"+ie,!1);if(e&&e!==S.sso_start_url)throw new Wd.CredentialsProviderError("Conflicting SSO start_url"+ie,!1);p.sso_region=S.sso_region,p.sso_start_url=S.sso_start_url}let{sso_start_url:f,sso_account_id:m,sso_region:h,sso_role_name:_,sso_session:w}=(0,aK.validateSsoProfile)(p);return(0,OR.resolveSSOCredentials)({ssoStartUrl:f,ssoSession:w,ssoAccountId:m,ssoRegion:h,ssoRoleName:_,ssoClient:o,profile:c})}else{if(!e||!r||!i||!s)throw new Wd.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return(0,OR.resolveSSOCredentials)({ssoStartUrl:e,ssoSession:a,ssoAccountId:r,ssoRegion:i,ssoRoleName:s,ssoClient:o,profile:c})}},"fromSSO");o_.fromSSO=cK});var RR=u(PR=>{"use strict";Object.defineProperty(PR,"__esModule",{value:!0})});var c_=u(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});var a_=(A(),b(x));a_.__exportStar(TR(),Ma);a_.__exportStar(hw(),Ma);a_.__exportStar(RR(),Ma);a_.__exportStar(PE(),Ma)});var qR=u(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.resolveSsoCredentials=Da.isSsoProfile=void 0;var IR=c_(),dK=c_();Object.defineProperty(Da,"isSsoProfile",{enumerable:!0,get:function(){return dK.isSsoProfile}});var uK=n(t=>{let{sso_start_url:e,sso_account_id:r,sso_session:i,sso_region:s,sso_role_name:o}=(0,IR.validateSsoProfile)(t);return(0,IR.fromSSO)({ssoStartUrl:e,ssoAccountId:r,ssoSession:i,ssoRegion:s,ssoRoleName:o})()},"resolveSsoCredentials");Da.resolveSsoCredentials=uK});var CR=u(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.resolveStaticCredentials=Fa.isStaticCredsProfile=void 0;var lK=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1,"isStaticCredsProfile");Fa.isStaticCredsProfile=lK;var pK=n(t=>Promise.resolve({accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token}),"resolveStaticCredentials");Fa.resolveStaticCredentials=pK});var IE=u(d_=>{"use strict";Object.defineProperty(d_,"__esModule",{value:!0});d_.fromWebToken=void 0;var fK=ee(),mK=n(t=>()=>{let{roleArn:e,roleSessionName:r,webIdentityToken:i,providerId:s,policyArns:o,policy:a,durationSeconds:c,roleAssumerWithWebIdentity:l}=t;if(!l)throw new fK.CredentialsProviderError(`Role Arn '${e}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return l({RoleArn:e,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:i,ProviderId:s,PolicyArns:o,Policy:a,DurationSeconds:c})},"fromWebToken");d_.fromWebToken=mK});var kR=u(u_=>{"use strict";Object.defineProperty(u_,"__esModule",{value:!0});u_.fromTokenFile=void 0;var hK=ee(),_K=W("fs"),yK=IE(),gK="AWS_WEB_IDENTITY_TOKEN_FILE",wK="AWS_ROLE_ARN",EK="AWS_ROLE_SESSION_NAME",vK=n((t={})=>async()=>SK(t),"fromTokenFile");u_.fromTokenFile=vK;var SK=n(t=>{var e,r,i;let s=(e=t?.webIdentityTokenFile)!==null&&e!==void 0?e:process.env[gK],o=(r=t?.roleArn)!==null&&r!==void 0?r:process.env[wK],a=(i=t?.roleSessionName)!==null&&i!==void 0?i:process.env[EK];if(!s||!o)throw new hK.CredentialsProviderError("Web identity configuration not specified");return(0,yK.fromWebToken)({...t,webIdentityToken:(0,_K.readFileSync)(s,{encoding:"ascii"}),roleArn:o,roleSessionName:a})()},"resolveTokenFile")});var qE=u(l_=>{"use strict";Object.defineProperty(l_,"__esModule",{value:!0});var MR=(A(),b(x));MR.__exportStar(kR(),l_);MR.__exportStar(IE(),l_)});var DR=u(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.resolveWebIdentityCredentials=La.isWebIdentityProfile=void 0;var NK=qE(),bK=n(t=>Boolean(t)&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,"isWebIdentityProfile");La.isWebIdentityProfile=bK;var xK=n(async(t,e)=>(0,NK.fromTokenFile)({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity})(),"resolveWebIdentityCredentials");La.resolveWebIdentityCredentials=xK});var lw=u(f_=>{"use strict";Object.defineProperty(f_,"__esModule",{value:!0});f_.resolveProfileData=void 0;var AK=ee(),FR=Rx(),LR=Mx(),zR=qR(),p_=CR(),WR=DR(),OK=n(async(t,e,r,i={})=>{let s=e[t];if(Object.keys(i).length>0&&(0,p_.isStaticCredsProfile)(s))return(0,p_.resolveStaticCredentials)(s);if((0,FR.isAssumeRoleProfile)(s))return(0,FR.resolveAssumeRoleCredentials)(t,e,r,i);if((0,p_.isStaticCredsProfile)(s))return(0,p_.resolveStaticCredentials)(s);if((0,WR.isWebIdentityProfile)(s))return(0,WR.resolveWebIdentityCredentials)(s,r);if((0,LR.isProcessProfile)(s))return(0,LR.resolveProcessCredentials)(r,t);if((0,zR.isSsoProfile)(s))return(0,zR.resolveSsoCredentials)(s);throw new AK.CredentialsProviderError(`Profile ${t} could not be found or parsed in shared credentials file.`)},"resolveProfileData");f_.resolveProfileData=OK});var jR=u(m_=>{"use strict";Object.defineProperty(m_,"__esModule",{value:!0});m_.fromIni=void 0;var UR=Rr(),TK=lw(),PK=n((t={})=>async()=>{let e=await(0,UR.parseKnownFiles)(t);return(0,TK.resolveProfileData)((0,UR.getProfileName)(t),e,t)},"fromIni");m_.fromIni=PK});var VR=u(CE=>{"use strict";Object.defineProperty(CE,"__esModule",{value:!0});var RK=(A(),b(x));RK.__exportStar(jR(),CE)});var $R=u(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.remoteProvider=ps.ENV_IMDS_DISABLED=void 0;var h_=ff(),IK=ee();ps.ENV_IMDS_DISABLED="AWS_EC2_METADATA_DISABLED";var qK=n(t=>process.env[h_.ENV_CMDS_RELATIVE_URI]||process.env[h_.ENV_CMDS_FULL_URI]?(0,h_.fromContainerMetadata)(t):process.env[ps.ENV_IMDS_DISABLED]?async()=>{throw new IK.CredentialsProviderError("EC2 Instance Metadata Service access disabled")}:(0,h_.fromInstanceMetadata)(t),"remoteProvider");ps.remoteProvider=qK});var HR=u(__=>{"use strict";Object.defineProperty(__,"__esModule",{value:!0});__.defaultProvider=void 0;var CK=Kg(),kK=VR(),MK=mw(),DK=c_(),FK=qE(),kE=ee(),LK=Rr(),zK=$R(),WK=n((t={})=>(0,kE.memoize)((0,kE.chain)(...t.profile||process.env[LK.ENV_PROFILE]?[]:[(0,CK.fromEnv)()],(0,DK.fromSSO)(t),(0,kK.fromIni)(t),(0,MK.fromProcess)(t),(0,FK.fromTokenFile)(t),(0,zK.remoteProvider)(t),async()=>{throw new kE.CredentialsProviderError("Could not load credentials from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0),"defaultProvider");__.defaultProvider=WK});var DE=u(ME=>{"use strict";Object.defineProperty(ME,"__esModule",{value:!0});var UK=(A(),b(x));UK.__exportStar(HR(),ME)});var pI=u(y_=>{"use strict";Object.defineProperty(y_,"__esModule",{value:!0});y_.ruleSet=void 0;var tI="required",D="type",K="fn",Y="argv",bn="ref",fs="properties",ms="headers",GR=!1,jK=!0,LE="PartitionResult",Xt="tree",hs="booleanEquals",He="stringEquals",rI="sigv4",iI="us-east-1",nI="sts",me="endpoint",sI="https://sts.{Region}.{PartitionResult#dnsSuffix}",Ud="error",zE="getAttr",BR={[tI]:!1,[D]:"String"},FE={[tI]:!0,default:!1,[D]:"Boolean"},Ge={[bn]:"Region"},oI={[bn]:"UseFIPS"},aI={[bn]:"UseDualStack"},JR={[K]:"isSet",[Y]:[{[bn]:"Endpoint"}]},cI={[bn]:"Endpoint"},et={url:"https://sts.amazonaws.com",[fs]:{authSchemes:[{name:rI,signingRegion:iI,signingName:nI}]},[ms]:{}},Ti={},KR={conditions:[{[K]:He,[Y]:[Ge,"aws-global"]}],[me]:et,[D]:me},dI={[K]:hs,[Y]:[oI,!0]},uI={[K]:hs,[Y]:[aI,!0]},YR={[K]:hs,[Y]:[!0,{[K]:zE,[Y]:[{[bn]:LE},"supportsFIPS"]}]},lI={[bn]:LE},QR={[K]:hs,[Y]:[!0,{[K]:zE,[Y]:[lI,"supportsDualStack"]}]},XR={url:sI,[fs]:{},[ms]:{}},VK=[cI],ZR=[dI],eI=[uI],$K={version:"1.0",parameters:{Region:BR,UseDualStack:FE,UseFIPS:FE,Endpoint:BR,UseGlobalEndpoint:FE},rules:[{conditions:[{[K]:"aws.partition",[Y]:[Ge],assign:LE}],[D]:Xt,rules:[{conditions:[{[K]:hs,[Y]:[{[bn]:"UseGlobalEndpoint"},jK]},{[K]:hs,[Y]:[oI,GR]},{[K]:hs,[Y]:[aI,GR]},{[K]:"not",[Y]:[JR]}],[D]:Xt,rules:[{conditions:[{[K]:He,[Y]:[Ge,"ap-northeast-1"]}],endpoint:et,[D]:me},{conditions:[{[K]:He,[Y]:[Ge,"ap-south-1"]}],endpoint:et,[D]:me},{conditions:[{[K]:He,[Y]:[Ge,"ap-southeast-1"]}],endpoint:et,[D]:me},{conditions:[{[K]:He,[Y]:[Ge,"ap-southeast-2"]}],endpoint:et,[D]:me},KR,{conditions:[{[K]:He,[Y]:[Ge,"ca-central-1"]}],endpoint:et,[D]:me},{conditions:[{[K]:He,[Y]:[Ge,"eu-central-1"]}],endpoint:et,[D]:me},{conditions:[{[K]:He,[Y]:[Ge,"eu-north-1"]}],endpoint:et,[D]:me},{conditions:[{[K]:He,[Y]:[Ge,"eu-west-1"]}],endpoint:et,[D]:me},{conditions:[{[K]:He,[Y]:[Ge,"eu-west-2"]}],endpoint:et,[D]:me},{conditions:[{[K]:He,[Y]:[Ge,"eu-west-3"]}],endpoint:et,[D]:me},{conditions:[{[K]:He,[Y]:[Ge,"sa-east-1"]}],endpoint:et,[D]:me},{conditions:[{[K]:He,[Y]:[Ge,iI]}],endpoint:et,[D]:me},{conditions:[{[K]:He,[Y]:[Ge,"us-east-2"]}],endpoint:et,[D]:me},{conditions:[{[K]:He,[Y]:[Ge,"us-west-1"]}],endpoint:et,[D]:me},{conditions:[{[K]:He,[Y]:[Ge,"us-west-2"]}],endpoint:et,[D]:me},{endpoint:{url:sI,[fs]:{authSchemes:[{name:rI,signingRegion:"{Region}",signingName:nI}]},[ms]:Ti},[D]:me}]},{conditions:[JR,{[K]:"parseURL",[Y]:VK,assign:"url"}],[D]:Xt,rules:[{conditions:ZR,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[D]:Ud},{[D]:Xt,rules:[{conditions:eI,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[D]:Ud},{endpoint:{url:cI,[fs]:Ti,[ms]:Ti},[D]:me}]}]},{conditions:[dI,uI],[D]:Xt,rules:[{conditions:[YR,QR],[D]:Xt,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[fs]:Ti,[ms]:Ti},[D]:me}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[D]:Ud}]},{conditions:ZR,[D]:Xt,rules:[{conditions:[YR],[D]:Xt,rules:[{[D]:Xt,rules:[{conditions:[{[K]:He,[Y]:["aws-us-gov",{[K]:zE,[Y]:[lI,"name"]}]}],endpoint:XR,[D]:me},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",[fs]:Ti,[ms]:Ti},[D]:me}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[D]:Ud}]},{conditions:eI,[D]:Xt,rules:[{conditions:[QR],[D]:Xt,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",[fs]:Ti,[ms]:Ti},[D]:me}]},{error:"DualStack is enabled but this partition does not support DualStack",[D]:Ud}]},{[D]:Xt,rules:[KR,{endpoint:XR,[D]:me}]}]}]};y_.ruleSet=$K});var fI=u(g_=>{"use strict";Object.defineProperty(g_,"__esModule",{value:!0});g_.defaultEndpointResolver=void 0;var HK=bd(),GK=pI(),BK=n((t,e={})=>(0,HK.resolveEndpoint)(GK.ruleSet,{endpointParams:t,logger:e.logger}),"defaultEndpointResolver");g_.defaultEndpointResolver=BK});var _I=u(w_=>{"use strict";Object.defineProperty(w_,"__esModule",{value:!0});w_.getRuntimeConfig=void 0;var JK=k(),KK=Vn(),mI=pd(),hI=yi(),YK=fI(),QK=n(t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??mI.fromBase64,base64Encoder:t?.base64Encoder??mI.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??YK.defaultEndpointResolver,logger:t?.logger??new JK.NoOpLogger,serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??KK.parseUrl,utf8Decoder:t?.utf8Decoder??hI.fromUtf8,utf8Encoder:t?.utf8Encoder??hI.toUtf8}),"getRuntimeConfig");w_.getRuntimeConfig=QK});var wI=u(v_=>{"use strict";Object.defineProperty(v_,"__esModule",{value:!0});v_.getRuntimeConfig=void 0;var XK=(A(),b(x)),ZK=XK.__importDefault(j0()),e6=Bg(),E_=vr(),t6=DE(),r6=ed(),yI=_i(),jd=ln(),gI=rd(),i6=id(),n6=jt(),s6=ld(),o6=_I(),a6=k(),c6=Od(),d6=k(),u6=n(t=>{(0,d6.emitWarningIfUnsupportedVersion)(process.version);let e=(0,c6.resolveDefaultsModeConfig)(t),r=n(()=>e().then(a6.loadConfigsForDefaultMode),"defaultConfigProvider"),i=(0,o6.getRuntimeConfig)(t);return{...i,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??i6.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??(0,e6.decorateDefaultCredentialProvider)(t6.defaultProvider),defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,s6.defaultUserAgent)({serviceId:i.serviceId,clientVersion:ZK.default.version}),maxAttempts:t?.maxAttempts??(0,jd.loadConfig)(yI.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,jd.loadConfig)(E_.NODE_REGION_CONFIG_OPTIONS,E_.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new gI.NodeHttpHandler(r),retryMode:t?.retryMode??(0,jd.loadConfig)({...yI.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||n6.DEFAULT_RETRY_MODE}),sha256:t?.sha256??r6.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??gI.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,jd.loadConfig)(E_.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,jd.loadConfig)(E_.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}},"getRuntimeConfig");v_.getRuntimeConfig=u6});var N_=u(S_=>{"use strict";Object.defineProperty(S_,"__esModule",{value:!0});S_.STSClient=void 0;var l6=vr(),p6=qc(),f6=ne(),EI=Cc(),m6=kc(),h6=Mc(),vI=_i(),_6=W0(),SI=Hc(),y6=k(),g6=U0(),w6=wI(),za=class extends y6.Client{constructor(e){let r=(0,w6.getRuntimeConfig)(e),i=(0,g6.resolveClientEndpointParameters)(r),s=(0,l6.resolveRegionConfig)(i),o=(0,f6.resolveEndpointConfig)(s),a=(0,vI.resolveRetryConfig)(o),c=(0,EI.resolveHostHeaderConfig)(a),l=(0,_6.resolveStsAuthConfig)(c,{stsClientCtor:za}),p=(0,SI.resolveUserAgentConfig)(l);super(p),this.config=p,this.middlewareStack.use((0,vI.getRetryPlugin)(this.config)),this.middlewareStack.use((0,p6.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,EI.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,m6.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,h6.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,SI.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};n(za,"STSClient");S_.STSClient=za});var NI=u(x_=>{"use strict";Object.defineProperty(x_,"__esModule",{value:!0});x_.STS=void 0;var E6=Ip(),v6=Ug(),S6=kp(),N6=jg(),b6=Vg(),x6=$g(),A6=Hg(),O6=Gg(),T6=N_(),b_=class extends T6.STSClient{assumeRole(e,r,i){let s=new E6.AssumeRoleCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}assumeRoleWithSAML(e,r,i){let s=new v6.AssumeRoleWithSAMLCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}assumeRoleWithWebIdentity(e,r,i){let s=new S6.AssumeRoleWithWebIdentityCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}decodeAuthorizationMessage(e,r,i){let s=new N6.DecodeAuthorizationMessageCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}getAccessKeyInfo(e,r,i){let s=new b6.GetAccessKeyInfoCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}getCallerIdentity(e,r,i){let s=new x6.GetCallerIdentityCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}getFederationToken(e,r,i){let s=new A6.GetFederationTokenCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}getSessionToken(e,r,i){let s=new O6.GetSessionTokenCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}};n(b_,"STS");x_.STS=b_});var bI=u(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});var xn=(A(),b(x));xn.__exportStar(Ip(),Hr);xn.__exportStar(Ug(),Hr);xn.__exportStar(kp(),Hr);xn.__exportStar(jg(),Hr);xn.__exportStar(Vg(),Hr);xn.__exportStar($g(),Hr);xn.__exportStar(Hg(),Hr);xn.__exportStar(Gg(),Hr)});var TI=u(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.decorateDefaultCredentialProvider=Gr.getDefaultRoleAssumerWithWebIdentity=Gr.getDefaultRoleAssumer=void 0;var xI=Bg(),AI=N_(),OI=n((t,e)=>e?n(class extends t{constructor(i){super(i);for(let s of e)this.middlewareStack.use(s)}},"CustomizableSTSClient"):t,"getCustomizableStsClientCtor"),P6=n((t={},e)=>(0,xI.getDefaultRoleAssumer)(t,OI(AI.STSClient,e)),"getDefaultRoleAssumer");Gr.getDefaultRoleAssumer=P6;var R6=n((t={},e)=>(0,xI.getDefaultRoleAssumerWithWebIdentity)(t,OI(AI.STSClient,e)),"getDefaultRoleAssumerWithWebIdentity");Gr.getDefaultRoleAssumerWithWebIdentity=R6;var I6=n(t=>e=>t({roleAssumer:(0,Gr.getDefaultRoleAssumer)(e),roleAssumerWithWebIdentity:(0,Gr.getDefaultRoleAssumerWithWebIdentity)(e),...e}),"decorateDefaultCredentialProvider");Gr.decorateDefaultCredentialProvider=I6});var PI=u(WE=>{"use strict";Object.defineProperty(WE,"__esModule",{value:!0});var q6=(A(),b(x));q6.__exportStar(sr(),WE)});var RI=u(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.STSServiceException=void 0;var Vd=(A(),b(x));Vd.__exportStar(NI(),Pi);Vd.__exportStar(N_(),Pi);Vd.__exportStar(bI(),Pi);Vd.__exportStar(TI(),Pi);Vd.__exportStar(PI(),Pi);var C6=Np();Object.defineProperty(Pi,"STSServiceException",{enumerable:!0,get:function(){return C6.STSServiceException}})});var jI=u(A_=>{"use strict";Object.defineProperty(A_,"__esModule",{value:!0});A_.ruleSet=void 0;var LI="required",Ii="fn",qi="argv",Wa="ref",UE="PartitionResult",Ri="tree",$d="error",Hd="endpoint",II={[LI]:!1,type:"String"},qI={[LI]:!0,default:!1,type:"Boolean"},zI={[Wa]:"Endpoint"},WI={[Ii]:"booleanEquals",[qi]:[{[Wa]:"UseFIPS"},!0]},UI={[Ii]:"booleanEquals",[qi]:[{[Wa]:"UseDualStack"},!0]},Br={},CI={[Ii]:"booleanEquals",[qi]:[!0,{[Ii]:"getAttr",[qi]:[{[Wa]:UE},"supportsFIPS"]}]},kI={[Ii]:"booleanEquals",[qi]:[!0,{[Ii]:"getAttr",[qi]:[{[Wa]:UE},"supportsDualStack"]}]},MI=[zI],DI=[WI],FI=[UI],k6={version:"1.0",parameters:{Region:II,UseDualStack:qI,UseFIPS:qI,Endpoint:II},rules:[{conditions:[{[Ii]:"aws.partition",[qi]:[{[Wa]:"Region"}],assign:UE}],type:Ri,rules:[{conditions:[{[Ii]:"isSet",[qi]:MI},{[Ii]:"parseURL",[qi]:MI,assign:"url"}],type:Ri,rules:[{conditions:DI,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:$d},{type:Ri,rules:[{conditions:FI,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:$d},{endpoint:{url:zI,properties:Br,headers:Br},type:Hd}]}]},{conditions:[WI,UI],type:Ri,rules:[{conditions:[CI,kI],type:Ri,rules:[{endpoint:{url:"https://rds-data-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Br,headers:Br},type:Hd}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:$d}]},{conditions:DI,type:Ri,rules:[{conditions:[CI],type:Ri,rules:[{endpoint:{url:"https://rds-data-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Br,headers:Br},type:Hd}]},{error:"FIPS is enabled but this partition does not support FIPS",type:$d}]},{conditions:FI,type:Ri,rules:[{conditions:[kI],type:Ri,rules:[{endpoint:{url:"https://rds-data.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Br,headers:Br},type:Hd}]},{error:"DualStack is enabled but this partition does not support DualStack",type:$d}]},{endpoint:{url:"https://rds-data.{Region}.{PartitionResult#dnsSuffix}",properties:Br,headers:Br},type:Hd}]}]};A_.ruleSet=k6});var VI=u(O_=>{"use strict";Object.defineProperty(O_,"__esModule",{value:!0});O_.defaultEndpointResolver=void 0;var M6=bd(),D6=jI(),F6=n((t,e={})=>(0,M6.resolveEndpoint)(D6.ruleSet,{endpointParams:t,logger:e.logger}),"defaultEndpointResolver");O_.defaultEndpointResolver=F6});var GI=u(T_=>{"use strict";Object.defineProperty(T_,"__esModule",{value:!0});T_.getRuntimeConfig=void 0;var L6=k(),z6=Vn(),$I=pd(),HI=yi(),W6=VI(),U6=n(t=>({apiVersion:"2018-08-01",base64Decoder:t?.base64Decoder??$I.fromBase64,base64Encoder:t?.base64Encoder??$I.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??W6.defaultEndpointResolver,logger:t?.logger??new L6.NoOpLogger,serviceId:t?.serviceId??"RDS Data",urlParser:t?.urlParser??z6.parseUrl,utf8Decoder:t?.utf8Decoder??HI.fromUtf8,utf8Encoder:t?.utf8Encoder??HI.toUtf8}),"getRuntimeConfig");T_.getRuntimeConfig=U6});var KI=u(R_=>{"use strict";Object.defineProperty(R_,"__esModule",{value:!0});R_.getRuntimeConfig=void 0;var j6=(A(),b(x)),V6=j6.__importDefault(Vb()),$6=RI(),P_=vr(),H6=DE(),G6=ed(),BI=_i(),Gd=ln(),JI=rd(),B6=id(),J6=jt(),K6=ld(),Y6=GI(),Q6=k(),X6=Od(),Z6=k(),e8=n(t=>{(0,Z6.emitWarningIfUnsupportedVersion)(process.version);let e=(0,X6.resolveDefaultsModeConfig)(t),r=n(()=>e().then(Q6.loadConfigsForDefaultMode),"defaultConfigProvider"),i=(0,Y6.getRuntimeConfig)(t);return{...i,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??B6.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??(0,$6.decorateDefaultCredentialProvider)(H6.defaultProvider),defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,K6.defaultUserAgent)({serviceId:i.serviceId,clientVersion:V6.default.version}),maxAttempts:t?.maxAttempts??(0,Gd.loadConfig)(BI.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Gd.loadConfig)(P_.NODE_REGION_CONFIG_OPTIONS,P_.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:t?.requestHandler??new JI.NodeHttpHandler(r),retryMode:t?.retryMode??(0,Gd.loadConfig)({...BI.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||J6.DEFAULT_RETRY_MODE}),sha256:t?.sha256??G6.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??JI.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Gd.loadConfig)(P_.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Gd.loadConfig)(P_.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS)}},"getRuntimeConfig");R_.getRuntimeConfig=e8});var jE=u(q_=>{"use strict";Object.defineProperty(q_,"__esModule",{value:!0});q_.RDSDataClient=void 0;var t8=vr(),r8=qc(),i8=ne(),YI=Cc(),n8=kc(),s8=Mc(),QI=_i(),XI=gi(),ZI=Hc(),o8=k(),a8=jb(),c8=KI(),I_=class extends o8.Client{constructor(e){let r=(0,c8.getRuntimeConfig)(e),i=(0,a8.resolveClientEndpointParameters)(r),s=(0,t8.resolveRegionConfig)(i),o=(0,i8.resolveEndpointConfig)(s),a=(0,QI.resolveRetryConfig)(o),c=(0,YI.resolveHostHeaderConfig)(a),l=(0,XI.resolveAwsAuthConfig)(c),p=(0,ZI.resolveUserAgentConfig)(l);super(p),this.config=p,this.middlewareStack.use((0,QI.getRetryPlugin)(this.config)),this.middlewareStack.use((0,r8.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,YI.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,n8.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,s8.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,XI.getAwsAuthPlugin)(this.config)),this.middlewareStack.use((0,ZI.getUserAgentPlugin)(this.config))}destroy(){super.destroy()}};n(I_,"RDSDataClient");q_.RDSDataClient=I_});var eq=u(k_=>{"use strict";Object.defineProperty(k_,"__esModule",{value:!0});k_.RDSData=void 0;var d8=ky(),u8=My(),l8=Dy(),p8=Fy(),f8=Ly(),m8=zy(),h8=jE(),C_=class extends h8.RDSDataClient{batchExecuteStatement(e,r,i){let s=new d8.BatchExecuteStatementCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}beginTransaction(e,r,i){let s=new u8.BeginTransactionCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}commitTransaction(e,r,i){let s=new l8.CommitTransactionCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}executeSql(e,r,i){let s=new p8.ExecuteSqlCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}executeStatement(e,r,i){let s=new f8.ExecuteStatementCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}rollbackTransaction(e,r,i){let s=new m8.RollbackTransactionCommand(e);if(typeof r=="function")this.send(s,r);else if(typeof i=="function"){if(typeof r!="object")throw new Error(`Expect http options but get ${typeof r}`);this.send(s,r||{},i)}else return this.send(s,r)}};n(C_,"RDSData");k_.RDSData=C_});var tq=u(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});var Ua=(A(),b(x));Ua.__exportStar(ky(),An);Ua.__exportStar(My(),An);Ua.__exportStar(Dy(),An);Ua.__exportStar(Fy(),An);Ua.__exportStar(Ly(),An);Ua.__exportStar(zy(),An)});var rq=u(VE=>{"use strict";Object.defineProperty(VE,"__esModule",{value:!0});var _8=(A(),b(x));_8.__exportStar(ui(),VE)});var iq=u(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.RDSDataServiceException=void 0;var M_=(A(),b(x));M_.__exportStar(eq(),On);M_.__exportStar(jE(),On);M_.__exportStar(tq(),On);M_.__exportStar(rq(),On);var y8=Gu();Object.defineProperty(On,"RDSDataServiceException",{enumerable:!0,get:function(){return y8.RDSDataServiceException}})});import g8 from"path";function Ci(t){return typeof t>"u"||t===void 0}n(Ci,"isUndefined");function Ie(t){return typeof t=="string"}n(Ie,"isString");function JE(t){return typeof t=="number"}n(JE,"isNumber");function Jd(t){return typeof t=="boolean"}n(Jd,"isBoolean");function Kd(t){return t===null}n(Kd,"isNull");function KE(t){return t instanceof Date}n(KE,"isDate");function YE(t){return typeof t=="bigint"}n(YE,"isBigInt");function he(t){return typeof t=="function"}n(he,"isFunction");function Je(t){return typeof t=="object"&&t!==null}n(Je,"isObject");function QE(t){return t[t.length-1]}n(QE,"getLast");function d(t){return Object.freeze(t)}n(d,"freeze");function lr(t){return Array.isArray(t)}n(lr,"isReadonlyArray");function ki(t){return t}n(ki,"noop");var ce=d({is(t){return t.kind==="AlterTableNode"},create(t){return d({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return d({...t,...e})},cloneWithColumnAlteration(t,e){return d({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}});var M=d({is(t){return t.kind==="IdentifierNode"},create(t){return d({kind:"IdentifierNode",name:t})}});var pr=d({is(t){return t.kind==="CreateIndexNode"},create(t){return d({kind:"CreateIndexNode",name:M.create(t)})},cloneWith(t,e){return d({...t,...e})},cloneWithColumns(t,e){return d({...t,columns:[...t.columns||[],...e]})}});var Yd=d({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return d({kind:"CreateSchemaNode",schema:M.create(t),...e})},cloneWith(t,e){return d({...t,...e})}});var XE=["preserve rows","delete rows","drop"],St=d({is(t){return t.kind==="CreateTableNode"},create(t){return d({kind:"CreateTableNode",table:t,columns:d([])})},cloneWithColumn(t,e){return d({...t,columns:d([...t.columns,e])})},cloneWithConstraint(t,e){return d({...t,constraints:t.constraints?d([...t.constraints,e]):d([e])})},cloneWithFrontModifier(t,e){return d({...t,frontModifiers:t.frontModifiers?d([...t.frontModifiers,e]):d([e])})},cloneWithEndModifier(t,e){return d({...t,endModifiers:t.endModifiers?d([...t.endModifiers,e]):d([e])})},cloneWith(t,e){return d({...t,...e})}});var lt=d({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return d({kind:"SchemableIdentifierNode",identifier:M.create(t)})},createWithSchema(t,e){return d({kind:"SchemableIdentifierNode",schema:M.create(t),identifier:M.create(e)})}});var _s=d({is(t){return t.kind==="DropIndexNode"},create(t,e){return d({kind:"DropIndexNode",name:lt.create(t),...e})},cloneWith(t,e){return d({...t,...e})}});var Va=d({is(t){return t.kind==="DropSchemaNode"},create(t,e){return d({kind:"DropSchemaNode",schema:M.create(t),...e})},cloneWith(t,e){return d({...t,...e})}});var $a=d({is(t){return t.kind==="DropTableNode"},create(t,e){return d({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return d({...t,...e})}});var pt=d({is(t){return t.kind==="AliasNode"},create(t,e){return d({kind:"AliasNode",node:t,alias:e})}});var kt=d({is(t){return t.kind==="TableNode"},create(t){return d({kind:"TableNode",table:lt.create(t)})},createWithSchema(t,e){return d({kind:"TableNode",table:lt.createWithSchema(t,e)})}});function _e(t){return Je(t)&&he(t.toOperationNode)}n(_e,"isOperationNodeSource");function ZE(t){return Je(t)&&"expressionType"in t&&_e(t)}n(ZE,"isExpression");function ev(t){return Je(t)&&"expression"in t&&Ie(t.alias)&&_e(t)}n(ev,"isAliasedExpression");var fr=d({is(t){return t.kind==="SelectModifierNode"},create(t){return d({kind:"SelectModifierNode",modifier:t})},createWithExpression(t){return d({kind:"SelectModifierNode",rawModifier:t})}});var Jr=d({is(t){return t.kind==="AndNode"},create(t,e){return d({kind:"AndNode",left:t,right:e})}});var Kr=d({is(t){return t.kind==="OrNode"},create(t,e){return d({kind:"OrNode",left:t,right:e})}});var ys=d({is(t){return t.kind==="OnNode"},create(t){return d({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return d({...t,on:e==="And"?Jr.create(t.on,r):Kr.create(t.on,r)})}});var Ke=d({is(t){return t.kind==="JoinNode"},create(t,e){return d({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return d({kind:"JoinNode",joinType:t,table:e,on:ys.create(r)})},cloneWithOn(t,e){return d({...t,on:t.on?ys.cloneWithOperation(t.on,"And",e):ys.create(e)})},cloneWithOrOn(t,e){return d({...t,on:t.on?ys.cloneWithOperation(t.on,"Or",e):ys.create(e)})}});var Ha=d({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return d({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}});var xe=d({is(t){return t.kind==="RawNode"},create(t,e){return d({kind:"RawNode",sqlFragments:d(t),parameters:d(e)})},createWithSql(t){return xe.create([t],[])},createWithChild(t){return xe.create(["",""],[t])},createWithChildren(t){return xe.create(new Array(t.length+1).fill(""),t)}});var tv=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->"],fq=["+","-","*","/","%","^","&","|","#","<<",">>"],rv=[...tv,...fq,"&&","||"],mq=["exists","not exists"],hq=["not","-",...mq],iv=[...rv,...hq],gs=d({is(t){return t.kind==="OperatorNode"},create(t){return d({kind:"OperatorNode",operator:t})}});function z_(t){return Ie(t)&&rv.includes(t)}n(z_,"isBinaryOperator");function W_(t){return Ie(t)&&tv.includes(t)}n(W_,"isComparisonOperator");var Mi=d({is(t){return t.kind==="ParensNode"},create(t){return d({kind:"ParensNode",node:t})}});var U=d({is(t){return t.kind==="ColumnNode"},create(t){return d({kind:"ColumnNode",column:M.create(t)})}});var ws=d({is(t){return t.kind==="SelectAllNode"},create(){return d({kind:"SelectAllNode"})}});var Tn=d({is(t){return t.kind==="ReferenceNode"},create(t,e){return d({kind:"ReferenceNode",table:t,column:e})},createSelectAll(t){return d({kind:"ReferenceNode",table:t,column:ws.create()})}});var nv=d({is(t){return t.kind==="OrderByItemNode"},create(t,e){return d({kind:"OrderByItemNode",orderBy:t,direction:e})}});function sv(t){return t==="asc"||t==="desc"}n(sv,"isOrderByDirection");function Di(t,e){return nv.create(_q(t),yq(e))}n(Di,"parseOrderBy");function _q(t){return Nt(t)}n(_q,"parseOrderByExpression");function yq(t){if(t)return t==="asc"||t==="desc"?xe.createWithSql(t):t.toOperationNode()}n(yq,"parseOrderByDirectionExpression");function U_(t){return Ie(t)?Yr(t):t.toOperationNode()}n(U_,"parseSimpleReferenceExpression");function Qr(t){return lr(t)?t.map(e=>Nt(e)):[Nt(t)]}n(Qr,"parseReferenceExpressionOrList");function Nt(t){return Pn(t)?Fi(t):U_(t)}n(Nt,"parseReferenceExpression");function Yr(t){let e=".";if(t.includes(e)){let r=t.split(e).map($_);if(r.length===3)return gq(r);if(r.length===2)return wq(r);throw new Error(`invalid column reference ${t}`)}else return U.create(t)}n(Yr,"parseStringReference");function ov(t){let e=" as ";if(t.includes(e)){let[r,i]=t.split(e).map($_);return pt.create(Yr(r),M.create(i))}else return Yr(t)}n(ov,"parseAliasedStringReference");function j_(t){return U.create(t)}n(j_,"parseColumnName");function V_(t){let e=" ";if(t.includes(e)){let[r,i]=t.split(e).map($_);if(!sv(i))throw new Error(`invalid order direction "${i}" next to "${r}"`);return Di(r,i)}else return j_(t)}n(V_,"parseOrderedColumnName");function gq(t){let[e,r,i]=t;return Tn.create(kt.createWithSchema(e,r),U.create(i))}n(gq,"parseStringReferenceWithTableAndSchema");function wq(t){let[e,r]=t;return Tn.create(kt.create(e),U.create(r))}n(wq,"parseStringReferenceWithTable");function $_(t){return t.trim()}n($_,"trim");var Qd=d({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return d({kind:"PrimitiveValueListNode",values:d([...t])})}});var Es=d({is(t){return t.kind==="ValueListNode"},create(t){return d({kind:"ValueListNode",values:d(t)})}});var Me=d({is(t){return t.kind==="ValueNode"},create(t){return d({kind:"ValueNode",value:t})},createImmediate(t){return d({kind:"ValueNode",value:t,immediate:!0})}});function Xd(t){return lr(t)?Eq(t):bt(t)}n(Xd,"parseValueExpressionOrList");function bt(t){return Pn(t)?Fi(t):Me.create(t)}n(bt,"parseValueExpression");function Eq(t){return t.some(Pn)?Es.create(t.map(e=>bt(e))):Qd.create(t)}n(Eq,"parseValueExpressionList");var Xr=d({is(t){return t.kind==="OrderByNode"},create(t){return d({kind:"OrderByNode",items:d([t])})},cloneWithItem(t,e){return d({...t,items:d([...t.items,e])})}});var H_=d({is(t){return t.kind==="PartitionByNode"},create(t){return d({kind:"PartitionByNode",items:d(t)})},cloneWithItems(t,e){return d({...t,items:d([...t.items,...e])})}});var Ga=d({is(t){return t.kind==="OverNode"},create(){return d({kind:"OverNode"})},cloneWithOrderByItem(t,e){return d({...t,orderBy:t.orderBy?Xr.cloneWithItem(t.orderBy,e):Xr.create(e)})},cloneWithPartitionByItems(t,e){return d({...t,partitionBy:t.partitionBy?H_.cloneWithItems(t.partitionBy,e):H_.create(e)})}});var Rn=d({is(t){return t.kind==="FromNode"},create(t){return d({kind:"FromNode",froms:d(t)})},cloneWithFroms(t,e){return d({...t,froms:d([...t.froms,...e])})}});var G_=d({is(t){return t.kind==="GroupByNode"},create(t){return d({kind:"GroupByNode",items:d(t)})},cloneWithItems(t,e){return d({...t,items:d([...t.items,...e])})}});var Ba=d({is(t){return t.kind==="HavingNode"},create(t){return d({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return d({...t,having:e==="And"?Jr.create(t.having,r):Kr.create(t.having,r)})}});var C=d({is(t){return t.kind==="SelectQueryNode"},create(t,e){return d({kind:"SelectQueryNode",from:Rn.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return d({...t,selections:t.selections?d([...t.selections,...e]):d(e)})},cloneWithDistinctOn(t,e){return d({...t,distinctOn:t.distinctOn?d([...t.distinctOn,...e]):d(e)})},cloneWithFrontModifier(t,e){return d({...t,frontModifiers:t.frontModifiers?d([...t.frontModifiers,e]):d([e])})},cloneWithEndModifier(t,e){return d({...t,endModifiers:t.endModifiers?d([...t.endModifiers,e]):d([e])})},cloneWithOrderByItem(t,e){return d({...t,orderBy:t.orderBy?Xr.cloneWithItem(t.orderBy,e):Xr.create(e)})},cloneWithGroupByItems(t,e){return d({...t,groupBy:t.groupBy?G_.cloneWithItems(t.groupBy,e):G_.create(e)})},cloneWithLimit(t,e){return d({...t,limit:e})},cloneWithOffset(t,e){return d({...t,offset:e})},cloneWithHaving(t,e){return d({...t,having:t.having?Ba.cloneWithOperation(t.having,"And",e):Ba.create(e)})},cloneWithOrHaving(t,e){return d({...t,having:t.having?Ba.cloneWithOperation(t.having,"Or",e):Ba.create(e)})},cloneWithSetOperation(t,e){return d({...t,setOperations:t.setOperations?d([...t.setOperations,e]):d([e])})},cloneWithoutSelections(t){return d({...t,selections:[]})},cloneWithoutLimit(t){return d({...t,limit:void 0})},cloneWithoutOffset(t){return d({...t,offset:void 0})},cloneWithoutOrderBy(t){return d({...t,orderBy:void 0})}});var Zd=d({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return d({kind:"UnaryOperationNode",operator:t,operand:e})}});function we(t){return eu("exists",t)}n(we,"parseExists");function ye(t){return eu("not exists",t)}n(ye,"parseNotExists");function eu(t,e){return Zd.create(gs.create(t),Nt(e))}n(eu,"parseUnaryOperation");function I(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}n(I,"preventAwait");var Ye=class{#e;constructor(e){this.#e=d(e)}on(...e){return new Ye({...this.#e,joinNode:Ke.cloneWithOn(this.#e.joinNode,B_(e))})}orOn(...e){return new Ye({...this.#e,joinNode:Ke.cloneWithOrOn(this.#e.joinNode,B_(e))})}onRef(e,r,i){return new Ye({...this.#e,joinNode:Ke.cloneWithOn(this.#e.joinNode,de(e,r,i))})}orOnRef(e,r,i){return new Ye({...this.#e,joinNode:Ke.cloneWithOrOn(this.#e.joinNode,de(e,r,i))})}onExists(e){return new Ye({...this.#e,joinNode:Ke.cloneWithOn(this.#e.joinNode,we(e))})}onNotExists(e){return new Ye({...this.#e,joinNode:Ke.cloneWithOn(this.#e.joinNode,ye(e))})}orOnExists(e){return new Ye({...this.#e,joinNode:Ke.cloneWithOrOn(this.#e.joinNode,we(e))})}orOnNotExists(e){return new Ye({...this.#e,joinNode:Ke.cloneWithOrOn(this.#e.joinNode,ye(e))})}onTrue(){return new Ye({...this.#e,joinNode:Ke.cloneWithOn(this.#e.joinNode,xe.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}};n(Ye,"JoinBuilder");I(Ye,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");var av=d({is(t){return t.kind==="PartitionByItemNode"},create(t){return d({kind:"PartitionByItemNode",partitionBy:t})}});function cv(t){return Qr(t).map(av.create)}n(cv,"parsePartitionBy");var Zr=class{#e;constructor(e){this.#e=d(e)}orderBy(e,r){return new Zr({overNode:Ga.cloneWithOrderByItem(this.#e.overNode,Di(e,r))})}partitionBy(e){return new Zr({overNode:Ga.cloneWithPartitionByItems(this.#e.overNode,cv(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}};n(Zr,"OverBuilder");I(Zr,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");var vs=d({is(t){return t.kind==="SelectionNode"},create(t){return d({kind:"SelectionNode",selection:t})},createSelectAll(){return d({kind:"SelectionNode",selection:ws.create()})},createSelectAllFromTable(t){return d({kind:"SelectionNode",selection:Tn.createSelectAll(t)})}});var Ja=class{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return U_(this.#e)}};n(Ja,"DynamicReferenceBuilder");function dv(t){return Je(t)&&_e(t)&&Ie(t.dynamicReference)}n(dv,"isDynamicReferenceBuilder");function ei(t){return he(t)?ei(t(tt())):lr(t)?t.map(e=>uv(e)):[uv(t)]}n(ei,"parseSelectArg");function uv(t){return Ie(t)?vs.create(ov(t)):dv(t)?vs.create(t.toOperationNode()):vs.create(tu(t))}n(uv,"parseSelectExpression");function mr(t){return t?Array.isArray(t)?t.map(lv):[lv(t)]:[vs.createSelectAll()]}n(mr,"parseSelectAll");function lv(t){if(Ie(t))return vs.createSelectAllFromTable(Ee(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}n(lv,"parseSelectAllArg");var pv=d({is(t){return t.kind==="ValuesNode"},create(t){return d({kind:"ValuesNode",values:d(t)})}});var fv=d({is(t){return t.kind==="DefaultInsertValueNode"},create(){return d({kind:"DefaultInsertValueNode"})}});function mv(t){let e=he(t)?t(tt()):t,r=lr(e)?e:d([e]);return vq(r)}n(mv,"parseInsertExpression");function vq(t){let e=Sq(t);return[d([...e.keys()].map(U.create)),pv.create(t.map(r=>Nq(r,e)))]}n(vq,"parseInsertColumnsAndValues");function Sq(t){let e=new Map;for(let r of t){let i=Object.keys(r);for(let s of i)!e.has(s)&&r[s]!==void 0&&e.set(s,e.size)}return e}n(Sq,"parseColumnNamesAndIndexes");function Nq(t,e){let r=Object.keys(t),i=Array.from({length:e.size}),s=!1;for(let a of r){let c=e.get(a);if(Ci(c))continue;let l=t[a];(Ci(l)||Pn(l))&&(s=!0),i[c]=l}if(r.length<e.size||s){let a=fv.create();return Es.create(i.map(c=>Ci(c)?a:bt(c)))}return Qd.create(i)}n(Nq,"parseRowValues");var ft=d({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return d({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},cloneWith(t,e){return d({...t,...e})}});var In=d({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return d({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return d({...t,from:t.from?Rn.cloneWithFroms(t.from,e):Rn.create(e)})},cloneWithUpdates(t,e){return d({...t,updates:t.updates?d([...t.updates,...e]):e})}});var J_=d({is(t){return t.kind==="UsingNode"},create(t){return d({kind:"UsingNode",tables:d(t)})},cloneWithTables(t,e){return d({...t,tables:d([...t.tables,...e])})}});var Li=d({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return d({kind:"DeleteQueryNode",from:Rn.create(t),...e&&{with:e}})},cloneWithOrderByItem(t,e){return d({...t,orderBy:t.orderBy?Xr.cloneWithItem(t.orderBy,e):Xr.create(e)})},cloneWithLimit(t,e){return d({...t,limit:e})},cloneWithUsing(t,e){return d({...t,using:t.using!==void 0?J_.cloneWithTables(t.using,e):J_.create(e)})}});var qe=d({is(t){return t.kind==="WhereNode"},create(t){return d({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return d({...t,where:e==="And"?Jr.create(t.where,r):Kr.create(t.where,r)})}});var K_=d({is(t){return t.kind==="ReturningNode"},create(t){return d({kind:"ReturningNode",selections:d(t)})},cloneWithSelections(t,e){return d({...t,selections:t.selections?d([...t.selections,...e]):d(e)})}});var hv=d({is(t){return t.kind==="ExplainNode"},create(t,e){return d({kind:"ExplainNode",format:t,options:e})}});var P=d({is(t){return C.is(t)||ft.is(t)||In.is(t)||Li.is(t)},cloneWithWhere(t,e){return d({...t,where:t.where?qe.cloneWithOperation(t.where,"And",e):qe.create(e)})},cloneWithOrWhere(t,e){return d({...t,where:t.where?qe.cloneWithOperation(t.where,"Or",e):qe.create(e)})},cloneWithJoin(t,e){return d({...t,joins:t.joins?d([...t.joins,e]):d([e])})},cloneWithReturning(t,e){return d({...t,returning:t.returning?K_.cloneWithSelections(t.returning,e):K_.create(e)})},cloneWithoutWhere(t){return d({...t,where:void 0})},cloneWithExplain(t,e,r){return d({...t,explain:hv.create(e,r?.toOperationNode())})}});var _v=d({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return d({kind:"ColumnUpdateNode",column:t,value:e})}});function Ss(t){let e=he(t)?t(tt()):t;return Object.entries(e).filter(([r,i])=>i!==void 0).map(([r,i])=>_v.create(U.create(r),bt(i)))}n(Ss,"parseUpdateExpression");var yv=d({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return d({kind:"OnDuplicateKeyNode",updates:t})}});var Ns=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get insertId(){return this.#e}get numInsertedOrUpdatedRows(){return this.#t}};n(Ns,"InsertResult");for(let t of["insertId","numInsertedOrUpdatedRows"])Object.defineProperty(Ns.prototype,t,{enumerable:!0});var er=class extends Error{node;constructor(e){super("no result"),this.node=e}};n(er,"NoResultError");function zi(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}n(zi,"isNoResultErrorConstructor");var Z=d({is(t){return t.kind==="OnConflictNode"},create(){return d({kind:"OnConflictNode"})},cloneWith(t,e){return d({...t,...e})},cloneWithIndexWhere(t,e){return d({...t,indexWhere:t.indexWhere?qe.cloneWithOperation(t.indexWhere,"And",e):qe.create(e)})},cloneWithIndexOrWhere(t,e){return d({...t,indexWhere:t.indexWhere?qe.cloneWithOperation(t.indexWhere,"Or",e):qe.create(e)})},cloneWithUpdateWhere(t,e){return d({...t,updateWhere:t.updateWhere?qe.cloneWithOperation(t.updateWhere,"And",e):qe.create(e)})},cloneWithUpdateOrWhere(t,e){return d({...t,updateWhere:t.updateWhere?qe.cloneWithOperation(t.updateWhere,"Or",e):qe.create(e)})},cloneWithoutIndexWhere(t){return d({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return d({...t,updateWhere:void 0})}});var Ae=class{#e;constructor(e){this.#e=d(e)}column(e){let r=U.create(e);return new Ae({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?d([...this.#e.onConflictNode.columns,r]):d([r])})})}columns(e){let r=e.map(U.create);return new Ae({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?d([...this.#e.onConflictNode.columns,...r]):d(r)})})}constraint(e){return new Ae({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{constraint:M.create(e)})})}expression(e){return new Ae({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Ae({...this.#e,onConflictNode:Z.cloneWithIndexWhere(this.#e.onConflictNode,Ce(e))})}whereRef(e,r,i){return new Ae({...this.#e,onConflictNode:Z.cloneWithIndexWhere(this.#e.onConflictNode,de(e,r,i))})}orWhere(...e){return new Ae({...this.#e,onConflictNode:Z.cloneWithIndexOrWhere(this.#e.onConflictNode,Ce(e))})}orWhereRef(e,r,i){return new Ae({...this.#e,onConflictNode:Z.cloneWithIndexOrWhere(this.#e.onConflictNode,de(e,r,i))})}whereExists(e){return new Ae({...this.#e,onConflictNode:Z.cloneWithIndexWhere(this.#e.onConflictNode,we(e))})}whereNotExists(e){return new Ae({...this.#e,onConflictNode:Z.cloneWithIndexWhere(this.#e.onConflictNode,ye(e))})}orWhereExists(e){return new Ae({...this.#e,onConflictNode:Z.cloneWithIndexOrWhere(this.#e.onConflictNode,we(e))})}orWhereNotExists(e){return new Ae({...this.#e,onConflictNode:Z.cloneWithIndexOrWhere(this.#e.onConflictNode,ye(e))})}clearWhere(){return new Ae({...this.#e,onConflictNode:Z.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new Ka({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new rt({...this.#e,onConflictNode:Z.cloneWith(this.#e.onConflictNode,{updates:Ss(e)})})}$call(e){return e(this)}};n(Ae,"OnConflictBuilder");I(Ae,"don't await OnConflictBuilder instances.");var Ka=class{#e;constructor(e){this.#e=d(e)}toOperationNode(){return this.#e.onConflictNode}};n(Ka,"OnConflictDoNothingBuilder");I(Ka,"don't await OnConflictDoNothingBuilder instances.");var rt=class{#e;constructor(e){this.#e=d(e)}where(...e){return new rt({...this.#e,onConflictNode:Z.cloneWithUpdateWhere(this.#e.onConflictNode,Ce(e))})}whereRef(e,r,i){return new rt({...this.#e,onConflictNode:Z.cloneWithUpdateWhere(this.#e.onConflictNode,de(e,r,i))})}orWhere(...e){return new rt({...this.#e,onConflictNode:Z.cloneWithUpdateOrWhere(this.#e.onConflictNode,Ce(e))})}orWhereRef(e,r,i){return new rt({...this.#e,onConflictNode:Z.cloneWithUpdateOrWhere(this.#e.onConflictNode,de(e,r,i))})}whereExists(e){return new rt({...this.#e,onConflictNode:Z.cloneWithUpdateWhere(this.#e.onConflictNode,we(e))})}whereNotExists(e){return new rt({...this.#e,onConflictNode:Z.cloneWithUpdateWhere(this.#e.onConflictNode,ye(e))})}orWhereExists(e){return new rt({...this.#e,onConflictNode:Z.cloneWithUpdateOrWhere(this.#e.onConflictNode,we(e))})}orWhereNotExists(e){return new rt({...this.#e,onConflictNode:Z.cloneWithUpdateOrWhere(this.#e.onConflictNode,ye(e))})}clearWhere(){return new rt({...this.#e,onConflictNode:Z.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}};n(rt,"OnConflictUpdateBuilder");I(rt,"don't await OnConflictUpdateBuilder instances.");var ue=class{#e;constructor(e){this.#e=d(e)}values(e){let[r,i]=mv(e);return new ue({...this.#e,queryNode:ft.cloneWith(this.#e.queryNode,{columns:r,values:i})})}columns(e){return new ue({...this.#e,queryNode:ft.cloneWith(this.#e.queryNode,{columns:d(e.map(U.create))})})}expression(e){return new ue({...this.#e,queryNode:ft.cloneWith(this.#e.queryNode,{values:Fi(e)})})}ignore(){return new ue({...this.#e,queryNode:ft.cloneWith(this.#e.queryNode,{ignore:!0})})}onConflict(e){return new ue({...this.#e,queryNode:ft.cloneWith(this.#e.queryNode,{onConflict:e(new Ae({onConflictNode:Z.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new ue({...this.#e,queryNode:ft.cloneWith(this.#e.queryNode,{onDuplicateKey:yv.create(Ss(e))})})}returning(e){return new ue({...this.#e,queryNode:P.cloneWithReturning(this.#e.queryNode,ei(e))})}returningAll(){return new ue({...this.#e,queryNode:P.cloneWithReturning(this.#e.queryNode,mr())})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new ue({...this.#e})}if(e,r){return e?r(this):new ue({...this.#e})}$castTo(){return new ue(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new ue(this.#e)}$assertType(){return new ue(this.#e)}assertType(){return new ue(this.#e)}withPlugin(e){return new ue({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,i=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?i.rows:[new Ns(i.insertId,i.numAffectedRows??i.numUpdatedOrDeletedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=er){let r=await this.executeTakeFirst();if(r===void 0)throw zi(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e,this.#e.queryId);for await(let s of i)yield*s.rows}async explain(e,r){return await new ue({...this.#e,queryNode:P.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};n(ue,"InsertQueryBuilder");I(ue,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var bs=class{#e;constructor(e){this.#e=e}get numDeletedRows(){return this.#e}};n(bs,"DeleteResult");Object.defineProperty(bs.prototype,"numDeletedRows",{enumerable:!0});var ru=d({is(t){return t.kind==="LimitNode"},create(t){return d({kind:"LimitNode",limit:Me.create(t)})}});var H=class{#e;constructor(e){this.#e=d(e)}where(...e){return new H({...this.#e,queryNode:P.cloneWithWhere(this.#e.queryNode,Ce(e))})}whereRef(e,r,i){return new H({...this.#e,queryNode:P.cloneWithWhere(this.#e.queryNode,de(e,r,i))})}orWhere(...e){return new H({...this.#e,queryNode:P.cloneWithOrWhere(this.#e.queryNode,Ce(e))})}orWhereRef(e,r,i){return new H({...this.#e,queryNode:P.cloneWithOrWhere(this.#e.queryNode,de(e,r,i))})}whereExists(e){return new H({...this.#e,queryNode:P.cloneWithWhere(this.#e.queryNode,we(e))})}whereNotExists(e){return new H({...this.#e,queryNode:P.cloneWithWhere(this.#e.queryNode,ye(e))})}orWhereExists(e){return new H({...this.#e,queryNode:P.cloneWithOrWhere(this.#e.queryNode,we(e))})}orWhereNotExists(e){return new H({...this.#e,queryNode:P.cloneWithOrWhere(this.#e.queryNode,ye(e))})}clearWhere(){return new H({...this.#e,queryNode:P.cloneWithoutWhere(this.#e.queryNode)})}using(e){return new H({...this.#e,queryNode:Li.cloneWithUsing(this.#e.queryNode,tr(e))})}innerJoin(...e){return new H({...this.#e,queryNode:P.cloneWithJoin(this.#e.queryNode,Ue("InnerJoin",e))})}leftJoin(...e){return new H({...this.#e,queryNode:P.cloneWithJoin(this.#e.queryNode,Ue("LeftJoin",e))})}rightJoin(...e){return new H({...this.#e,queryNode:P.cloneWithJoin(this.#e.queryNode,Ue("RightJoin",e))})}fullJoin(...e){return new H({...this.#e,queryNode:P.cloneWithJoin(this.#e.queryNode,Ue("FullJoin",e))})}returning(e){return new H({...this.#e,queryNode:P.cloneWithReturning(this.#e.queryNode,ei(e))})}returningAll(e){return new H({...this.#e,queryNode:P.cloneWithReturning(this.#e.queryNode,mr(e))})}orderBy(e,r){return new H({...this.#e,queryNode:Li.cloneWithOrderByItem(this.#e.queryNode,Di(e,r))})}limit(e){return new H({...this.#e,queryNode:Li.cloneWithLimit(this.#e.queryNode,ru.create(e))})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new H({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new H(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new H(this.#e)}$assertType(){return new H(this.#e)}assertType(){return new H(this.#e)}withPlugin(e){return new H({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,i=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?i.rows:[new bs(i.numAffectedRows??i.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=er){let r=await this.executeTakeFirst();if(r===void 0)throw zi(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e,this.#e.queryId);for await(let s of i)yield*s.rows}async explain(e,r){return await new H({...this.#e,queryNode:P.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};n(H,"DeleteQueryBuilder");I(H,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var xs=class{#e;constructor(e){this.#e=e}get numUpdatedRows(){return this.#e}};n(xs,"UpdateResult");Object.defineProperty(xs.prototype,"numUpdatedRows",{enumerable:!0});var B=class{#e;constructor(e){this.#e=d(e)}where(...e){return new B({...this.#e,queryNode:P.cloneWithWhere(this.#e.queryNode,Ce(e))})}whereRef(e,r,i){return new B({...this.#e,queryNode:P.cloneWithWhere(this.#e.queryNode,de(e,r,i))})}orWhere(...e){return new B({...this.#e,queryNode:P.cloneWithOrWhere(this.#e.queryNode,Ce(e))})}orWhereRef(e,r,i){return new B({...this.#e,queryNode:P.cloneWithOrWhere(this.#e.queryNode,de(e,r,i))})}whereExists(e){return new B({...this.#e,queryNode:P.cloneWithWhere(this.#e.queryNode,we(e))})}whereNotExists(e){return new B({...this.#e,queryNode:P.cloneWithWhere(this.#e.queryNode,ye(e))})}orWhereExists(e){return new B({...this.#e,queryNode:P.cloneWithOrWhere(this.#e.queryNode,we(e))})}orWhereNotExists(e){return new B({...this.#e,queryNode:P.cloneWithOrWhere(this.#e.queryNode,ye(e))})}clearWhere(){return new B({...this.#e,queryNode:P.cloneWithoutWhere(this.#e.queryNode)})}from(e){return new B({...this.#e,queryNode:In.cloneWithFromItems(this.#e.queryNode,tr(e))})}innerJoin(...e){return new B({...this.#e,queryNode:P.cloneWithJoin(this.#e.queryNode,Ue("InnerJoin",e))})}leftJoin(...e){return new B({...this.#e,queryNode:P.cloneWithJoin(this.#e.queryNode,Ue("LeftJoin",e))})}rightJoin(...e){return new B({...this.#e,queryNode:P.cloneWithJoin(this.#e.queryNode,Ue("RightJoin",e))})}fullJoin(...e){return new B({...this.#e,queryNode:P.cloneWithJoin(this.#e.queryNode,Ue("FullJoin",e))})}set(e){return new B({...this.#e,queryNode:In.cloneWithUpdates(this.#e.queryNode,Ss(e))})}returning(e){return new B({...this.#e,queryNode:P.cloneWithReturning(this.#e.queryNode,ei(e))})}returningAll(){return new B({...this.#e,queryNode:P.cloneWithReturning(this.#e.queryNode,mr())})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new B({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new B(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new B(this.#e)}$assertType(){return new B(this.#e)}assertType(){return new B(this.#e)}withPlugin(e){return new B({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,i=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?i.rows:[new xs(i.numAffectedRows??i.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=er){let r=await this.executeTakeFirst();if(r===void 0)throw zi(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e,this.#e.queryId);for await(let s of i)yield*s.rows}async explain(e,r){return await new B({...this.#e,queryNode:P.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};n(B,"UpdateQueryBuilder");I(B,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var gv=d({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return d({kind:"CommonTableExpressionNode",name:t,expression:e})}});var Y_=d({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return d({kind:"CommonTableExpressionNameNode",table:kt.create(t),columns:e?d(e.map(U.create)):void 0})}});function Q_(t,e){let r=e(wv());return gv.create(bq(t),r.toOperationNode())}n(Q_,"parseCommonTableExpression");function bq(t){if(t.includes("(")){let e=t.split(/[\(\)]/),r=e[0],i=e[1].split(",").map(s=>s.trim());return Y_.create(r,i)}else return Y_.create(t)}n(bq,"parseCommonTableExpressionName");var Ya=d({is(t){return t.kind==="WithNode"},create(t,e){return d({kind:"WithNode",expressions:d([t]),...e})},cloneWithExpression(t,e){return d({...t,expressions:d([...t.expressions,e])})}});var Ev=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function vv(t){let e="";for(let r=0;r<t;++r)e+=xq();return e}n(vv,"randomString");function xq(){return Ev[~~(Math.random()*Ev.length)]}n(xq,"randomChar");function V(){return new iu}n(V,"createQueryId");var iu=class{#e;get queryId(){return this.#e===void 0&&(this.#e=vv(8)),this.#e}};n(iu,"LazyQueryId");var qn=class{nodeStack=[];#e=d({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);let r=this.transformNodeImpl(e);return this.nodeStack.pop(),d(r)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&d(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",table:this.transformNode(e.table),column:this.transformNode(e.column)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:d([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where)}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}};n(qn,"OperationNodeTransformer");var Aq=d({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0}),Qa=class extends qn{#e;#t=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);let r=this.#i(e);for(let s of r)this.#t.add(s);let i=super.transformNodeImpl(e);for(let s of r)this.#t.delete(s);return i}transformSchemableIdentifier(e){let r=super.transformSchemableIdentifier(e);return r.schema||!this.#t.has(e.identifier.name)?r:{...r,schema:M.create(this.#e)}}transformReferences(e){let r=super.transformReferences(e);return r.table.table.schema?r:{...r,table:kt.createWithSchema(this.#e,r.table.table.identifier.name)}}#r(e){return e.kind in Aq}#i(e){let r=new Set;if("name"in e&&e.name&&lt.is(e.name)&&this.#s(e.name,r),"from"in e&&e.from)for(let i of e.from.froms)this.#n(i,r);if("into"in e&&e.into&&this.#n(e.into,r),"table"in e&&e.table&&this.#n(e.table,r),"joins"in e&&e.joins)for(let i of e.joins)this.#n(i.table,r);return"with"in e&&e.with&&this.#o(e.with,r),r}#n(e,r){let i=kt.is(e)?e:pt.is(e)&&kt.is(e.node)?e.node:null;i&&this.#s(i.table,r)}#s(e,r){this.#t.has(e.identifier.name)||r.add(e.identifier.name)}#o(e,r){for(let i of e.expressions)r.delete(i.name.table.table.identifier.name)}};n(Qa,"WithSchemaTransformer");var mt=class{#e;constructor(e){this.#e=new Qa(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}};n(mt,"WithSchemaPlugin");var xt=class{#e;constructor(e){this.#e=d(e)}selectFrom(e){return new N({queryId:V(),executor:this.#e.executor,queryNode:C.create(tr(e),this.#e.withNode)})}insertInto(e){return new ue({queryId:V(),executor:this.#e.executor,queryNode:ft.create(Ee(e),this.#e.withNode)})}replaceInto(e){return new ue({queryId:V(),executor:this.#e.executor,queryNode:ft.create(Ee(e),this.#e.withNode,!0)})}deleteFrom(e){return new H({queryId:V(),executor:this.#e.executor,queryNode:Li.create(tr(e),this.#e.withNode)})}updateTable(e){return new B({queryId:V(),executor:this.#e.executor,queryNode:In.create(Wi(e),this.#e.withNode)})}with(e,r){let i=Q_(e,r);return new xt({...this.#e,withNode:this.#e.withNode?Ya.cloneWithExpression(this.#e.withNode,i):Ya.create(i)})}withRecursive(e,r){let i=Q_(e,r);return new xt({...this.#e,withNode:this.#e.withNode?Ya.cloneWithExpression(this.#e.withNode,i):Ya.create(i,{recursive:!0})})}withPlugin(e){return new xt({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new xt({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new xt({...this.#e,executor:this.#e.executor.withPluginAtFront(new mt(e))})}};n(xt,"QueryCreator");var As=class{#e;#t;#r;constructor(){this.#e=new Promise((e,r)=>{this.#r=r,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#r&&this.#r(e)}};n(As,"Deferred");var Sv=new Set;function Nv(t){Sv.has(t)||(Sv.add(t),console.log(t))}n(Nv,"logOnce");var Oq=d([]),Cn=class{#e;constructor(e=Oq){this.#e=e}get plugins(){return this.#e}transformQuery(e,r){for(let i of this.#e){let s=i.transformQuery({node:e,queryId:r});if(s.kind===e.kind)e=s;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${s.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async i=>{let s=await i.executeQuery(e),o=await this.#t(s,r);return Tq(s,o),o})}async*stream(e,r,i){let s=new As,o=new As;this.provideConnection(async c=>(s.resolve(c),await o.promise)).catch(c=>s.reject(c));let a=await s.promise;try{for await(let c of a.streamQuery(e,r))yield await this.#t(c,i)}finally{o.resolve()}}async#t(e,r){for(let i of this.#e)e=await i.transformResult({result:e,queryId:r});return e}};n(Cn,"QueryExecutorBase");function Tq(t,e){let{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||Nv("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}n(Tq,"warnOfOutdatedDriverOrPlugins");var ti=class extends Cn{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new ti([...this.plugins,e])}withPlugins(e){return new ti([...this.plugins,...e])}withPluginAtFront(e){return new ti([e,...this.plugins])}withoutPlugins(){return new ti([])}};n(ti,"NoopQueryExecutor");var kn=new ti;function X_(){return new N({queryId:V(),executor:kn,queryNode:C.create(tr([]))})}n(X_,"createSelectQueryBuilder");function wv(){return new xt({executor:kn})}n(wv,"createQueryCreator");function nu(t,e){return new Ye({joinNode:Ke.create(t,Wi(e))})}n(nu,"createJoinBuilder");function bv(){return new Zr({overNode:Ga.create()})}n(bv,"createOverBuilder");var Xa=d({is(t){return t.kind==="WhenNode"},create(t){return d({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return d({...t,result:e})}});var it=d({is(t){return t.kind==="CaseNode"},create(t){return d({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return d({...t,when:d(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return d({...t,when:t.when?d([...t.when.slice(0,-1),Xa.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return d({...t,...e})}});function su(t,e,r){if(!z_(e)&&!_e(e))throw new Error(`invalid binary operator ${JSON.stringify(e)}`);return Iq(e,r)?qq(t,e,r):Ha.create(Nt(t),ty(e),Xd(r))}n(su,"parseValueBinaryOperation");function Pq(t,e,r){if(!z_(e)&&!_e(e))throw new Error(`invalid binary operator ${JSON.stringify(e)}`);return Ha.create(Nt(t),ty(e),Nt(r))}n(Pq,"parseReferentialBinaryOperation");function Rq(t,e,r){if(!W_(e)&&!_e(e))throw new Error(`invalid comparison operator ${JSON.stringify(e)}`);return su(t,e,r)}n(Rq,"parseValueComparison");function de(t,e,r){if(!W_(e)&&!_e(e))throw new Error(`invalid comparison operator ${JSON.stringify(e)}`);return Pq(t,e,r)}n(de,"parseReferentialComparison");function Ce(t){return ou("where",t)}n(Ce,"parseWhere");function Z_(t){return ou("having",t)}n(Z_,"parseHaving");function B_(t){return ou("on",t)}n(B_,"parseOn");function ey(t){return ou("when",t)}n(ey,"parseWhen");function ou(t,e){if(e.length===3)return Rq(e[0],e[1],e[2]);if(e.length===1)return Cq(t,e[0]);throw xv(t,e)}n(ou,"parseFilter");function Iq(t,e){return(t==="is"||t==="is not")&&(Kd(e)||Jd(e))}n(Iq,"isIsComparison");function qq(t,e,r){return Ha.create(Nt(t),ty(e),Me.createImmediate(r))}n(qq,"parseIs");function ty(t){if(Ie(t)&&iv.includes(t))return gs.create(t);if(_e(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}n(ty,"parseOperator");function Cq(t,e){if(he(e)){if(t==="when")throw new Error("when method doesn't accept a callback as an argument");return kq[t](e)}else if(_e(e)){let r=e.toOperationNode();if(xe.is(r)||Ha.is(r)||Zd.is(r)||Mi.is(r)||it.is(r))return r}else if(t==="when")return Me.create(e);throw xv(t,e)}n(Cq,"parseOneArgFilterExpression");function xv(t,e){return new Error(`invalid arguments passed to a '${t}' method: ${JSON.stringify(e)}`)}n(xv,"createFilterExpressionError");var kq=d({where(t){let e=X_(),r=tt(),s=t(Object.assign(e,r)).toOperationNode();if(C.is(s)){if(!s.where)throw new Error("no `where` methods called inside a group callback");return Mi.create(s.where.where)}else return s},having(t){let e=X_(),r=tt(),s=t(Object.assign(e,r)).toOperationNode();if(C.is(s)){if(!s.having)throw new Error("no `having` methods called inside a group callback");return Mi.create(s.having.having)}else return s},on(t){let e=nu("InnerJoin","table"),r=tt(),s=t(Object.assign(e,r)).toOperationNode();if(Ke.is(s)){if(!s.on)throw new Error("no `on` methods called inside a group callback");return Mi.create(s.on.on)}else return s}});function Ue(t,e){if(e.length===3)return Dq(t,e[0],e[1],e[2]);if(e.length===2)return Mq(t,e[0],e[1]);throw new Error("not implemented")}n(Ue,"parseJoin");function Mq(t,e,r){return r(nu(t,e)).toOperationNode()}n(Mq,"parseCallbackJoin");function Dq(t,e,r,i){return Ke.createWithOn(t,Wi(e),de(r,"=",i))}n(Dq,"parseSingleOnJoin");var Av=d({is(t){return t.kind==="OffsetNode"},create(t){return d({kind:"OffsetNode",offset:Me.create(t)})}});var Ov=d({is(t){return t.kind==="GroupByItemNode"},create(t){return d({kind:"GroupByItemNode",groupBy:t})}});function Tv(t){return t=he(t)?t(tt()):t,Qr(t).map(Ov.create)}n(Tv,"parseGroupBy");var au=d({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return d({kind:"SetOperationNode",operator:t,expression:e,all:r})}});function Mn(t,e,r){return au.create(t,e.toOperationNode(),r)}n(Mn,"parseSetOperation");var N=class{#e;constructor(e){this.#e=d(e)}get expressionType(){}where(...e){return new N({...this.#e,queryNode:P.cloneWithWhere(this.#e.queryNode,Ce(e))})}whereRef(e,r,i){return new N({...this.#e,queryNode:P.cloneWithWhere(this.#e.queryNode,de(e,r,i))})}orWhere(...e){return new N({...this.#e,queryNode:P.cloneWithOrWhere(this.#e.queryNode,Ce(e))})}orWhereRef(e,r,i){return new N({...this.#e,queryNode:P.cloneWithOrWhere(this.#e.queryNode,de(e,r,i))})}whereExists(e){return new N({...this.#e,queryNode:P.cloneWithWhere(this.#e.queryNode,we(e))})}whereNotExists(e){return new N({...this.#e,queryNode:P.cloneWithWhere(this.#e.queryNode,ye(e))})}orWhereExists(e){return new N({...this.#e,queryNode:P.cloneWithOrWhere(this.#e.queryNode,we(e))})}orWhereNotExists(e){return new N({...this.#e,queryNode:P.cloneWithOrWhere(this.#e.queryNode,ye(e))})}having(...e){return new N({...this.#e,queryNode:C.cloneWithHaving(this.#e.queryNode,Z_(e))})}havingRef(e,r,i){return new N({...this.#e,queryNode:C.cloneWithHaving(this.#e.queryNode,de(e,r,i))})}orHaving(...e){return new N({...this.#e,queryNode:C.cloneWithOrHaving(this.#e.queryNode,Z_(e))})}orHavingRef(e,r,i){return new N({...this.#e,queryNode:C.cloneWithOrHaving(this.#e.queryNode,de(e,r,i))})}havingExists(e){return new N({...this.#e,queryNode:C.cloneWithHaving(this.#e.queryNode,we(e))})}havingNotExist(e){return new N({...this.#e,queryNode:C.cloneWithHaving(this.#e.queryNode,ye(e))})}havingNotExists(e){return new N({...this.#e,queryNode:C.cloneWithHaving(this.#e.queryNode,ye(e))})}orHavingExists(e){return new N({...this.#e,queryNode:C.cloneWithOrHaving(this.#e.queryNode,we(e))})}orHavingNotExists(e){return new N({...this.#e,queryNode:C.cloneWithOrHaving(this.#e.queryNode,ye(e))})}select(e){return new N({...this.#e,queryNode:C.cloneWithSelections(this.#e.queryNode,ei(e))})}distinctOn(e){return new N({...this.#e,queryNode:C.cloneWithDistinctOn(this.#e.queryNode,Qr(e))})}modifyFront(e){return new N({...this.#e,queryNode:C.cloneWithFrontModifier(this.#e.queryNode,fr.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new N({...this.#e,queryNode:C.cloneWithEndModifier(this.#e.queryNode,fr.createWithExpression(e.toOperationNode()))})}distinct(){return new N({...this.#e,queryNode:C.cloneWithFrontModifier(this.#e.queryNode,fr.create("Distinct"))})}forUpdate(){return new N({...this.#e,queryNode:C.cloneWithEndModifier(this.#e.queryNode,fr.create("ForUpdate"))})}forShare(){return new N({...this.#e,queryNode:C.cloneWithEndModifier(this.#e.queryNode,fr.create("ForShare"))})}forKeyShare(){return new N({...this.#e,queryNode:C.cloneWithEndModifier(this.#e.queryNode,fr.create("ForKeyShare"))})}forNoKeyUpdate(){return new N({...this.#e,queryNode:C.cloneWithEndModifier(this.#e.queryNode,fr.create("ForNoKeyUpdate"))})}skipLocked(){return new N({...this.#e,queryNode:C.cloneWithEndModifier(this.#e.queryNode,fr.create("SkipLocked"))})}noWait(){return new N({...this.#e,queryNode:C.cloneWithEndModifier(this.#e.queryNode,fr.create("NoWait"))})}selectAll(e){return new N({...this.#e,queryNode:C.cloneWithSelections(this.#e.queryNode,mr(e))})}innerJoin(...e){return new N({...this.#e,queryNode:P.cloneWithJoin(this.#e.queryNode,Ue("InnerJoin",e))})}leftJoin(...e){return new N({...this.#e,queryNode:P.cloneWithJoin(this.#e.queryNode,Ue("LeftJoin",e))})}rightJoin(...e){return new N({...this.#e,queryNode:P.cloneWithJoin(this.#e.queryNode,Ue("RightJoin",e))})}fullJoin(...e){return new N({...this.#e,queryNode:P.cloneWithJoin(this.#e.queryNode,Ue("FullJoin",e))})}innerJoinLateral(...e){return new N({...this.#e,queryNode:P.cloneWithJoin(this.#e.queryNode,Ue("LateralInnerJoin",e))})}leftJoinLateral(...e){return new N({...this.#e,queryNode:P.cloneWithJoin(this.#e.queryNode,Ue("LateralLeftJoin",e))})}orderBy(e,r){return new N({...this.#e,queryNode:C.cloneWithOrderByItem(this.#e.queryNode,Di(e,r))})}groupBy(e){return new N({...this.#e,queryNode:C.cloneWithGroupByItems(this.#e.queryNode,Tv(e))})}limit(e){return new N({...this.#e,queryNode:C.cloneWithLimit(this.#e.queryNode,ru.create(e))})}offset(e){return new N({...this.#e,queryNode:C.cloneWithOffset(this.#e.queryNode,Av.create(e))})}union(e){return new N({...this.#e,queryNode:C.cloneWithSetOperation(this.#e.queryNode,Mn("union",e,!1))})}unionAll(e){return new N({...this.#e,queryNode:C.cloneWithSetOperation(this.#e.queryNode,Mn("union",e,!0))})}intersect(e){return new N({...this.#e,queryNode:C.cloneWithSetOperation(this.#e.queryNode,Mn("intersect",e,!1))})}intersectAll(e){return new N({...this.#e,queryNode:C.cloneWithSetOperation(this.#e.queryNode,Mn("intersect",e,!0))})}except(e){return new N({...this.#e,queryNode:C.cloneWithSetOperation(this.#e.queryNode,Mn("except",e,!1))})}exceptAll(e){return new N({...this.#e,queryNode:C.cloneWithSetOperation(this.#e.queryNode,Mn("except",e,!0))})}as(e){return new cu(this,e)}clearSelect(){return new N({...this.#e,queryNode:C.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new N({...this.#e,queryNode:P.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new N({...this.#e,queryNode:C.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new N({...this.#e,queryNode:C.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new N({...this.#e,queryNode:C.cloneWithoutOrderBy(this.#e.queryNode)})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new N({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new N(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new N(this.#e)}$assertType(){return new N(this.#e)}assertType(){return new N(this.#e)}withPlugin(e){return new N({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=er){let r=await this.executeTakeFirst();if(r===void 0)throw zi(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e,this.#e.queryId);for await(let s of i)yield*s.rows}async explain(e,r){return await new N({...this.#e,queryNode:P.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};n(N,"SelectQueryBuilder");I(N,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var cu=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return pt.create(this.#e.toOperationNode(),M.create(this.#t))}};n(cu,"AliasedSelectQueryBuilder");var le=class{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new du(this,e)}$castTo(){return new le(this.#e)}toOperationNode(){return this.#e}};n(le,"ExpressionWrapper");var du=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return pt.create(this.#e.toOperationNode(),_e(this.#t)?this.#t.toOperationNode():M.create(this.#t))}};n(du,"AliasedExpressionWrapper");var ht=d({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return d({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return d({...t,distinct:!0})},cloneWithFilter(t,e){return d({...t,filter:t.filter?qe.cloneWithOperation(t.filter,"And",e):qe.create(e)})},cloneWithOrFilter(t,e){return d({...t,filter:t.filter?qe.cloneWithOperation(t.filter,"Or",e):qe.create(e)})},cloneWithOver(t,e){return d({...t,over:e})}});var Pv=d({is(t){return t.kind==="FunctionNode"},create(t,e){return d({kind:"FunctionNode",func:t,arguments:e})}});var De=class{#e;constructor(e){this.#e=d(e)}get expressionType(){}as(e){return new uu(this,e)}distinct(){return new De({...this.#e,aggregateFunctionNode:ht.cloneWithDistinct(this.#e.aggregateFunctionNode)})}filterWhere(...e){return new De({...this.#e,aggregateFunctionNode:ht.cloneWithFilter(this.#e.aggregateFunctionNode,Ce(e))})}filterWhereExists(e){return new De({...this.#e,aggregateFunctionNode:ht.cloneWithFilter(this.#e.aggregateFunctionNode,we(e))})}filterWhereNotExists(e){return new De({...this.#e,aggregateFunctionNode:ht.cloneWithFilter(this.#e.aggregateFunctionNode,ye(e))})}filterWhereRef(e,r,i){return new De({...this.#e,aggregateFunctionNode:ht.cloneWithFilter(this.#e.aggregateFunctionNode,de(e,r,i))})}orFilterWhere(...e){return new De({...this.#e,aggregateFunctionNode:ht.cloneWithOrFilter(this.#e.aggregateFunctionNode,Ce(e))})}orFilterWhereExists(e){return new De({...this.#e,aggregateFunctionNode:ht.cloneWithOrFilter(this.#e.aggregateFunctionNode,we(e))})}orFilterWhereNotExists(e){return new De({...this.#e,aggregateFunctionNode:ht.cloneWithOrFilter(this.#e.aggregateFunctionNode,ye(e))})}orFilterWhereRef(e,r,i){return new De({...this.#e,aggregateFunctionNode:ht.cloneWithOrFilter(this.#e.aggregateFunctionNode,de(e,r,i))})}over(e){let r=bv();return new De({...this.#e,aggregateFunctionNode:ht.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}toOperationNode(){return this.#e.aggregateFunctionNode}};n(De,"AggregateFunctionBuilder");I(De,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var uu=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return pt.create(this.#e.toOperationNode(),M.create(this.#t))}};n(uu,"AliasedAggregateFunctionBuilder");function lu(){let t=n((r,i)=>new le(Pv.create(r,Qr(i))),"fn"),e=n((r,i)=>new De({aggregateFunctionNode:ht.create(r,i?Qr(i):void 0)}),"agg");return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(r,...i){return t("coalesce",[r,...i])},count(r){return e("count",[r])},countAll(r){return new De({aggregateFunctionNode:ht.create("count",mr(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])}})}n(lu,"createFunctionModule");var Dn=class{#e;constructor(e){this.#e=d(e)}when(...e){return new Za({...this.#e,node:it.cloneWithWhen(this.#e.node,Xa.create(ey(e)))})}};n(Dn,"CaseBuilder");var Za=class{#e;constructor(e){this.#e=d(e)}then(e){return new pu({...this.#e,node:it.cloneWithThen(this.#e.node,bt(e))})}};n(Za,"CaseThenBuilder");var pu=class{#e;constructor(e){this.#e=d(e)}when(...e){return new Za({...this.#e,node:it.cloneWithWhen(this.#e.node,Xa.create(ey(e)))})}else(e){return new fu({...this.#e,node:it.cloneWith(this.#e.node,{else:bt(e)})})}end(){return new le(it.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new le(it.cloneWith(this.#e.node,{isStatement:!0}))}};n(pu,"CaseWhenBuilder");var fu=class{#e;constructor(e){this.#e=d(e)}end(){return new le(it.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new le(it.cloneWith(this.#e.node,{isStatement:!0}))}};n(fu,"CaseEndBuilder");function Rv(t=kn){function e(r,i){return new le(eu(r,i))}return n(e,"unary"),{get fn(){return lu()},selectFrom(r){return new N({queryId:V(),executor:t,queryNode:C.create(tr(r))})},case(r){return new Dn({node:it.create(Ci(r)?void 0:Nt(r))})},ref(r){return new le(Yr(r))},val(r){return new le(Xd(r))},cmpr(r,i,s){return new le(su(r,i,s))},bxp(r,i,s){return new le(su(r,i,s))},unary:e,not(r){return e("not",r)},exists(r){return e("exists",r)},neg(r){return e("-",r)},and(r){if(r.length===0)return new le(Me.createImmediate(!0));if(r.length===1)return new le(r[0].toOperationNode());let i=Jr.create(r[0].toOperationNode(),r[1].toOperationNode());for(let s=2;s<r.length;++s)i=Jr.create(i,r[s].toOperationNode());return new le(Mi.create(i))},or(r){if(r.length===0)return new le(Me.createImmediate(!1));if(r.length===1)return new le(r[0].toOperationNode());let i=Kr.create(r[0].toOperationNode(),r[1].toOperationNode());for(let s=2;s<r.length;++s)i=Kr.create(i,r[s].toOperationNode());return new le(Mi.create(i))},withSchema(r){return Rv(t.withPluginAtFront(new mt(r)))}}}n(Rv,"createExpressionBuilder");function tt(t){return Rv()}n(tt,"expressionBuilder");function Fi(t){if(_e(t))return t.toOperationNode();if(he(t))return t(tt()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}n(Fi,"parseExpression");function tu(t){if(_e(t))return t.toOperationNode();if(he(t))return t(tt()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}n(tu,"parseAliasedExpression");function Pn(t){return ZE(t)||ev(t)||he(t)}n(Pn,"isExpressionOrFactory");function tr(t){return lr(t)?t.map(e=>Wi(e)):[Wi(t)]}n(tr,"parseTableExpressionOrList");function Wi(t){return Ie(t)?Fq(t):tu(t)}n(Wi,"parseTableExpression");function Fq(t){let e=" as ";if(t.includes(e)){let[r,i]=t.split(e).map(Iv);return pt.create(Ee(r),M.create(i))}else return Ee(t)}n(Fq,"parseAliasedTable");function Ee(t){let e=".";if(t.includes(e)){let[r,i]=t.split(e).map(Iv);return kt.createWithSchema(r,i)}else return kt.create(t)}n(Ee,"parseTable");function Iv(t){return t.trim()}n(Iv,"trim");var ry=d({is(t){return t.kind==="AddColumnNode"},create(t){return d({kind:"AddColumnNode",column:t})}});var ri=d({is(t){return t.kind==="AlterColumnNode"},create(t){return d({kind:"AlterColumnNode",column:U.create(t)})},cloneWith(t,e){return d({...t,...e})}});var pe=d({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return d({kind:"ColumnDefinitionNode",column:U.create(t),dataType:e})},cloneWithFrontModifier(t,e){return d({...t,frontModifiers:t.frontModifiers?d([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return d({...t,endModifiers:t.endModifiers?d([...t.endModifiers,e]):[e]})},cloneWith(t,e){return d({...t,...e})}});var iy=d({is(t){return t.kind==="DropColumnNode"},create(t){return d({kind:"DropColumnNode",column:U.create(t)})}});var ny=d({is(t){return t.kind==="RenameColumnNode"},create(t,e){return d({kind:"RenameColumnNode",column:U.create(t),renameTo:U.create(e)})}});var Os=d({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return d({kind:"CheckConstraintNode",expression:t,name:e?M.create(e):void 0})}});var qv=["no action","restrict","cascade","set null","set default"],Ts=d({is(t){return t.kind==="ReferencesNode"},create(t,e){return d({kind:"ReferencesNode",table:t,columns:d([...e])})},cloneWithOnDelete(t,e){return d({...t,onDelete:e})},cloneWithOnUpdate(t,e){return d({...t,onUpdate:e})}});function mu(t){return _e(t)?t.toOperationNode():Me.createImmediate(t)}n(mu,"parseDefaultValueExpression");var ec=d({is(t){return t.kind==="GeneratedNode"},create(t){return d({kind:"GeneratedNode",...t})},createWithExpression(t){return d({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return d({...t,...e})}});var Cv=d({is(t){return t.kind==="DefaultValueNode"},create(t){return d({kind:"DefaultValueNode",defaultValue:t})}});function Ps(t){if(qv.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}n(Ps,"parseOnModifyForeignAction");var X=class{#e;constructor(e){this.#e=e}autoIncrement(){return new X(pe.cloneWith(this.#e,{autoIncrement:!0}))}primaryKey(){return new X(pe.cloneWith(this.#e,{primaryKey:!0}))}references(e){let r=Yr(e);if(!Tn.is(r)||ws.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new X(pe.cloneWith(this.#e,{references:Ts.create(r.table,[r.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new X(pe.cloneWith(this.#e,{references:Ts.cloneWithOnDelete(this.#e.references,Ps(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new X(pe.cloneWith(this.#e,{references:Ts.cloneWithOnUpdate(this.#e.references,Ps(e))}))}unique(){return new X(pe.cloneWith(this.#e,{unique:!0}))}notNull(){return new X(pe.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new X(pe.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new X(pe.cloneWith(this.#e,{defaultTo:Cv.create(mu(e))}))}check(e){return new X(pe.cloneWith(this.#e,{check:Os.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new X(pe.cloneWith(this.#e,{generated:ec.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new X(pe.cloneWith(this.#e,{generated:ec.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new X(pe.cloneWith(this.#e,{generated:ec.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new X(pe.cloneWith(this.#e,{generated:ec.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new X(pe.cloneWithFrontModifier(this.#e,e.toOperationNode()))}modifyEnd(e){return new X(pe.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}};n(X,"ColumnDefinitionBuilder");I(X,"don't await ColumnDefinitionBuilder instances directly.");var sy=d({is(t){return t.kind==="ModifyColumnNode"},create(t){return d({kind:"ModifyColumnNode",column:t})}});var kv=d({is(t){return t.kind==="DataTypeNode"},create(t){return d({kind:"DataTypeNode",dataType:t})}});function ii(t){return _e(t)?t.toOperationNode():kv.create(t)}n(ii,"parseDataTypeExpression");var Fn=d({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,i){return d({kind:"ForeignKeyConstraintNode",columns:t,references:Ts.create(e,r),name:i?M.create(i):void 0})},cloneWith(t,e){return d({...t,...e})}});var rr=class{#e;constructor(e){this.#e=e}onDelete(e){return new rr(Fn.cloneWith(this.#e,{onDelete:Ps(e)}))}onUpdate(e){return new rr(Fn.cloneWith(this.#e,{onUpdate:Ps(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}};n(rr,"ForeignKeyConstraintBuilder");I(rr,"don't await ForeignKeyConstraintBuilder instances directly.");var tc=d({is(t){return t.kind==="AddConstraintNode"},create(t){return d({kind:"AddConstraintNode",constraint:t})}});var hu=d({is(t){return t.kind==="UniqueConstraintNode"},create(t,e){return d({kind:"UniqueConstraintNode",columns:d(t.map(U.create)),name:e?M.create(e):void 0})}});var Rs=d({is(t){return t.kind==="DropConstraintNode"},create(t){return d({kind:"DropConstraintNode",constraintName:M.create(t)})},cloneWith(t,e){return d({...t,...e})}});var ji=class{alterColumnNode;constructor(e){this.alterColumnNode=e}setDataType(e){return new Ui(ri.cloneWith(this.alterColumnNode,{dataType:ii(e)}))}setDefault(e){return new Ui(ri.cloneWith(this.alterColumnNode,{setDefault:mu(e)}))}dropDefault(){return new Ui(ri.cloneWith(this.alterColumnNode,{dropDefault:!0}))}setNotNull(){return new Ui(ri.cloneWith(this.alterColumnNode,{setNotNull:!0}))}dropNotNull(){return new Ui(ri.cloneWith(this.alterColumnNode,{dropNotNull:!0}))}$call(e){return e(this)}};n(ji,"AlterColumnBuilder");var Ui=class extends ji{toOperationNode(){return this.alterColumnNode}};n(Ui,"AlteredColumnBuilder");var ni=class{#e;constructor(e){this.#e=d(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(ni,"AlterTableExecutor");I(ni,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var si=class{#e;constructor(e){this.#e=d(e)}onDelete(e){return new si({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new si({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(ce.cloneWithTableProps(this.#e.node,{addConstraint:tc.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(si,"AlterTableAddForeignKeyConstraintBuilder");I(si,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var hr=class{#e;constructor(e){this.#e=d(e)}ifExists(){return new hr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{dropConstraint:Rs.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new hr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{dropConstraint:Rs.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new hr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{dropConstraint:Rs.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(hr,"AlterTableDropConstraintBuilder");I(hr,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");var Is=class{#e;constructor(e){this.#e=d(e)}renameTo(e){return new ni({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{renameTo:Ee(e)})})}setSchema(e){return new ni({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{setSchema:M.create(e)})})}alterColumn(e,r){let i=r(new ji(ri.create(e)));return new nt({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,i.toOperationNode())})}dropColumn(e){return new nt({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,iy.create(e))})}renameColumn(e,r){return new nt({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,ny.create(e,r))})}addColumn(e,r,i=ki){let s=i(new X(pe.create(e,ii(r))));return new nt({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,ry.create(s.toOperationNode()))})}modifyColumn(e,r,i=ki){let s=i(new X(pe.create(e,ii(r))));return new nt({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,sy.create(s.toOperationNode()))})}addUniqueConstraint(e,r){return new ni({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{addConstraint:tc.create(hu.create(r,e))})})}addCheckConstraint(e,r){return new ni({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{addConstraint:tc.create(Os.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,i,s){return new si({...this.#e,constraintBuilder:new rr(Fn.create(r.map(U.create),Ee(i),s.map(U.create),e))})}dropConstraint(e){return new hr({...this.#e,node:ce.cloneWithTableProps(this.#e.node,{dropConstraint:Rs.create(e)})})}$call(e){return e(this)}call(e){return this.$call(e)}};n(Is,"AlterTableBuilder");var nt=class{#e;constructor(e){this.#e=d(e)}alterColumn(e,r){let i=r(new ji(ri.create(e)));return new nt({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,i.toOperationNode())})}dropColumn(e){return new nt({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,iy.create(e))})}renameColumn(e,r){return new nt({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,ny.create(e,r))})}addColumn(e,r,i=ki){let s=i(new X(pe.create(e,ii(r))));return new nt({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,ry.create(s.toOperationNode()))})}modifyColumn(e,r,i=ki){let s=i(new X(pe.create(e,ii(r))));return new nt({...this.#e,node:ce.cloneWithColumnAlteration(this.#e.node,sy.create(s.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(nt,"AlterTableColumnAlteringBuilder");I(Is,"don't await AlterTableBuilder instances");I(ji,"don't await AlterColumnBuilder instances");I(nt,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");var Ln=class extends qn{transformValue(e){return{...super.transformValue(e),immediate:!0}}};n(Ln,"ImmediateValueTransformer");var st=class{#e;constructor(e){this.#e=d(e)}ifNotExists(){return new st({...this.#e,node:pr.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new st({...this.#e,node:pr.cloneWith(this.#e.node,{unique:!0})})}on(e){return new st({...this.#e,node:pr.cloneWith(this.#e.node,{table:Ee(e)})})}column(e){return new st({...this.#e,node:pr.cloneWithColumns(this.#e.node,[V_(e)])})}columns(e){return new st({...this.#e,node:pr.cloneWithColumns(this.#e.node,e.map(V_))})}expression(e){return new st({...this.#e,node:pr.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new st({...this.#e,node:pr.cloneWith(this.#e.node,{using:xe.createWithSql(e)})})}where(...e){let r=new Ln;return new st({...this.#e,node:P.cloneWithWhere(this.#e.node,r.transformNode(Ce(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(st,"CreateIndexBuilder");I(st,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var Vi=class{#e;constructor(e){this.#e=d(e)}ifNotExists(){return new Vi({...this.#e,node:Yd.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Vi,"CreateSchemaBuilder");I(Vi,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");var Mv=d({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return d({kind:"PrimaryKeyConstraintNode",columns:d(t.map(U.create)),name:e?M.create(e):void 0})}});function Dv(t){if(XE.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}n(Dv,"parseOnCommitAction");var je=class{#e;constructor(e){this.#e=d(e)}temporary(){return new je({...this.#e,node:St.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new je({...this.#e,node:St.cloneWith(this.#e.node,{onCommit:Dv(e)})})}ifNotExists(){return new je({...this.#e,node:St.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,r,i=ki){let s=i(new X(pe.create(e,ii(r))));return new je({...this.#e,node:St.cloneWithColumn(this.#e.node,s.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new je({...this.#e,node:St.cloneWithConstraint(this.#e.node,Mv.create(r,e))})}addUniqueConstraint(e,r){return new je({...this.#e,node:St.cloneWithConstraint(this.#e.node,hu.create(r,e))})}addCheckConstraint(e,r){return new je({...this.#e,node:St.cloneWithConstraint(this.#e.node,Os.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,i,s,o=ki){let a=o(new rr(Fn.create(r.map(U.create),Ee(i),s.map(U.create),e)));return new je({...this.#e,node:St.cloneWithConstraint(this.#e.node,a.toOperationNode())})}modifyFront(e){return new je({...this.#e,node:St.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new je({...this.#e,node:St.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}$call(e){return e(this)}call(e){return this.$call(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(je,"CreateTableBuilder");I(je,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var _r=class{#e;constructor(e){this.#e=d(e)}on(e){return new _r({...this.#e,node:_s.cloneWith(this.#e.node,{table:Ee(e)})})}ifExists(){return new _r({...this.#e,node:_s.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new _r({...this.#e,node:_s.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(_r,"DropIndexBuilder");I(_r,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var oi=class{#e;constructor(e){this.#e=d(e)}ifExists(){return new oi({...this.#e,node:Va.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new oi({...this.#e,node:Va.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(oi,"DropSchemaBuilder");I(oi,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var ai=class{#e;constructor(e){this.#e=d(e)}ifExists(){return new ai({...this.#e,node:$a.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new ai({...this.#e,node:$a.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(ai,"DropTableBuilder");I(ai,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");var ir=d({is(t){return t.kind==="CreateViewNode"},create(t){return d({kind:"CreateViewNode",name:lt.create(t)})},cloneWith(t,e){return d({...t,...e})}});var rc=class{#e=new Ln;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}};n(rc,"ImmediateValuePlugin");var At=class{#e;constructor(e){this.#e=d(e)}temporary(){return new At({...this.#e,node:ir.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new At({...this.#e,node:ir.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new At({...this.#e,node:ir.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new At({...this.#e,node:ir.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new At({...this.#e,node:ir.cloneWith(this.#e.node,{columns:e.map(j_)})})}as(e){let r=e.withPlugin(new rc).toOperationNode();return new At({...this.#e,node:ir.cloneWith(this.#e.node,{as:r})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(At,"CreateViewBuilder");I(At,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");var qs=d({is(t){return t.kind==="DropViewNode"},create(t){return d({kind:"DropViewNode",name:lt.create(t)})},cloneWith(t,e){return d({...t,...e})}});var yr=class{#e;constructor(e){this.#e=d(e)}materialized(){return new yr({...this.#e,node:qs.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new yr({...this.#e,node:qs.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new yr({...this.#e,node:qs.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(yr,"DropViewBuilder");I(yr,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");var _u=d({is(t){return t.kind==="CreateTypeNode"},create(t){return d({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return d({...t,enum:Es.create(e.map(r=>Me.createImmediate(r)))})}});var $i=class{#e;constructor(e){this.#e=d(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new $i({...this.#e,node:_u.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n($i,"CreateTypeBuilder");I($i,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");var yu=d({is(t){return t.kind==="DropTypeNode"},create(t){return d({kind:"DropTypeNode",name:t})},cloneWith(t,e){return d({...t,...e})}});var Hi=class{#e;constructor(e){this.#e=d(e)}ifExists(){return new Hi({...this.#e,node:yu.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};n(Hi,"DropTypeBuilder");I(Hi,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function oy(t){let e=".";if(t.includes(e)){let r=t.split(e).map(Lq);if(r.length===2)return lt.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return lt.create(t)}n(oy,"parseSchemableIdentifier");function Lq(t){return t.trim()}n(Lq,"trim");var ci=class{#e;constructor(e){this.#e=e}createTable(e){return new je({queryId:V(),executor:this.#e,node:St.create(Ee(e))})}dropTable(e){return new ai({queryId:V(),executor:this.#e,node:$a.create(Ee(e))})}createIndex(e){return new st({queryId:V(),executor:this.#e,node:pr.create(e)})}dropIndex(e){return new _r({queryId:V(),executor:this.#e,node:_s.create(e)})}createSchema(e){return new Vi({queryId:V(),executor:this.#e,node:Yd.create(e)})}dropSchema(e){return new oi({queryId:V(),executor:this.#e,node:Va.create(e)})}alterTable(e){return new Is({queryId:V(),executor:this.#e,node:ce.create(Ee(e))})}createView(e){return new At({queryId:V(),executor:this.#e,node:ir.create(e)})}dropView(e){return new yr({queryId:V(),executor:this.#e,node:qs.create(e)})}createType(e){return new $i({queryId:V(),executor:this.#e,node:_u.create(oy(e))})}dropType(e){return new Hi({queryId:V(),executor:this.#e,node:yu.create(oy(e))})}withPlugin(e){return new ci(this.#e.withPlugin(e))}withoutPlugins(){return new ci(this.#e.withoutPlugins())}withSchema(e){return new ci(this.#e.withPluginAtFront(new mt(e)))}};n(ci,"SchemaModule");var ic=class{ref(e){return new Ja(e)}};n(ic,"DynamicModule");var nc=class{#e;constructor(e){this.#e=e}async provideConnection(e){let r=await this.#e.acquireConnection();try{return await e(r)}finally{await this.#e.releaseConnection(r)}}};n(nc,"DefaultConnectionProvider");var nr=class extends Cn{#e;#t;#r;constructor(e,r,i,s=[]){super(s),this.#e=e,this.#t=r,this.#r=i}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#r.provideConnection(e)}withPlugins(e){return new nr(this.#e,this.#t,this.#r,[...this.plugins,...e])}withPlugin(e){return new nr(this.#e,this.#t,this.#r,[...this.plugins,e])}withPluginAtFront(e){return new nr(this.#e,this.#t,this.#r,[e,...this.plugins])}withConnectionProvider(e){return new nr(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new nr(this.#e,this.#t,this.#r,[])}};n(nr,"DefaultQueryExecutor");function ay(){return typeof performance<"u"&&he(performance.now)?performance.now():Date.now()}n(ay,"performanceNow");var sc=class{#e;#t;#r;#i;#n=new WeakSet;constructor(e,r){this.#e=e,this.#t=r}async init(){this.#r||(this.#r=this.#e.init().catch(e=>(this.#r=void 0,Promise.reject(e)))),await this.#r}async acquireConnection(){await this.init();let e=await this.#e.acquireConnection();return this.#n.has(e)||(this.#s()&&this.#o(e),this.#n.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,r){return this.#e.beginTransaction(e,r)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#r&&(await this.#r,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#s(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#o(e){let r=e.executeQuery;e.executeQuery=async i=>{let s=ay();try{return await r.call(e,i)}catch(o){throw await this.#d(o,i,s),o}finally{await this.#u(i,s)}}}async#d(e,r,i){await this.#t.error(()=>({level:"error",error:e,query:r,queryDurationMillis:this.#c(i)}))}async#u(e,r){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#c(r)}))}#c(e){return ay()-e}};n(sc,"RuntimeDriver");var Cs=class{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t;let r=this.#r(e);return this.#t=r.then(()=>{this.#t=void 0}).catch(()=>{this.#t=void 0}),r}async#r(e){return await e(this.#e)}};n(Cs,"SingleConnectionProvider");var Fv=["read uncommitted","read committed","repeatable read","serializable"];var Soe=d(["query","error"]),oc=class{#e;#t;constructor(e){he(e)?(this.#t=e,this.#e=d({query:!0,error:!0})):(this.#t=zq,this.#e=d({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}};n(oc,"Log");function zq(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${t}`))}n(zq,"defaultLogger");function Lv(t){return Je(t)&&he(t.compile)}n(Lv,"isCompilable");var Mt=class extends xt{#e;constructor(e){let r,i;if(Wq(e))r={executor:e.executor},i={...e};else{let s=e.dialect,o=s.createDriver(),a=s.createQueryCompiler(),c=s.createAdapter(),l=new oc(e.log??[]),p=new sc(o,l),f=new nc(p),m=new nr(a,c,f,e.plugins??[]);r={executor:m},i={config:e,executor:m,dialect:s,driver:p}}super(r),this.#e=d(i)}get schema(){return new ci(this.#e.executor)}get dynamic(){return new ic}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new Dn({node:it.create(Ci(e)?void 0:Fi(e))})}get fn(){return lu()}transaction(){return new zn({...this.#e})}connection(){return new ac({...this.#e})}withPlugin(e){return new Mt({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Mt({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Mt({...this.#e,executor:this.#e.executor.withPluginAtFront(new mt(e))})}withTables(){return new Mt({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,r=V()){let i=Lv(e)?e.compile():e;return this.getExecutor().executeQuery(i,r)}};n(Mt,"Kysely");var di=class extends Mt{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new di({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new di({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new di({...this.#e,executor:this.#e.executor.withPluginAtFront(new mt(e))})}withTables(){return new di({...this.#e})}};n(di,"Transaction");function Wq(t){return Je(t)&&Je(t.config)&&Je(t.driver)&&Je(t.executor)&&Je(t.dialect)}n(Wq,"isKyselyProps");var ac=class{#e;constructor(e){this.#e=d(e)}async execute(e){return this.#e.executor.provideConnection(async r=>{let i=this.#e.executor.withConnectionProvider(new Cs(r)),s=new Mt({...this.#e,executor:i});return await e(s)})}};n(ac,"ConnectionBuilder");I(ac,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var zn=class{#e;constructor(e){this.#e=d(e)}setIsolationLevel(e){return new zn({...this.#e,isolationLevel:e})}async execute(e){let{isolationLevel:r,...i}=this.#e,s={isolationLevel:r};return Uq(s),this.#e.executor.provideConnection(async o=>{let a=this.#e.executor.withConnectionProvider(new Cs(o)),c=new di({...i,executor:a});try{await this.#e.driver.beginTransaction(o,s);let l=await e(c);return await this.#e.driver.commitTransaction(o),l}catch(l){throw await this.#e.driver.rollbackTransaction(o),l}})}};n(zn,"TransactionBuilder");I(zn,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function Uq(t){if(t.isolationLevel&&!Fv.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}n(Uq,"validateTransactionSettings");var Qe=class{#e;constructor(e){this.#e=d(e)}get expressionType(){}as(e){return new gu(this,e)}$castTo(){return new Qe({...this.#e})}castTo(){return this.$castTo()}withPlugin(e){return new Qe({...this.#e,plugins:this.#e.plugins!==void 0?d([...this.#e.plugins,e]):d([e])})}toOperationNode(){return this.#r(this.#t())}compile(e){return this.#i(this.#t(e))}async execute(e){let r=this.#t(e);return r.executeQuery(this.#i(r),this.#e.queryId)}#t(e){let r=e!==void 0?e.getExecutor():kn;return this.#e.plugins!==void 0?r.withPlugins(this.#e.plugins):r}#r(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#i(e){return e.compileQuery(this.#r(e),this.#e.queryId)}};n(Qe,"RawBuilder");I(Qe,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var gu=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return pt.create(this.#e.toOperationNode(),_e(this.#t)?this.#t.toOperationNode():M.create(this.#t))}};n(gu,"AliasedRawBuilder");var ot=Object.assign((t,...e)=>new Qe({queryId:V(),rawNode:xe.create(t,e?.map(bt)??[])}),{ref(t){return new Qe({queryId:V(),rawNode:xe.createWithChild(Yr(t))})},val(t){return new Qe({queryId:V(),rawNode:xe.createWithChild(bt(t))})},value(t){return this.val(t)},table(t){return new Qe({queryId:V(),rawNode:xe.createWithChild(Ee(t))})},id(...t){let e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",new Qe({queryId:V(),rawNode:xe.create(e,t.map(M.create))})},lit(t){return new Qe({queryId:V(),rawNode:xe.createWithChild(Me.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return new Qe({queryId:V(),rawNode:xe.createWithSql(t)})},join(t,e=ot`, `){let r=new Array(2*t.length-1),i=e.toOperationNode();for(let s=0;s<t.length;++s)r[2*s]=bt(t[s]),s!==t.length-1&&(r[2*s+1]=i);return new Qe({queryId:V(),rawNode:xe.createWithChildren(r)})}});var cc=class{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=d({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}};n(cc,"OperationNodeVisitor");var Wn=class extends cc{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.visitNode(e),d({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){let r=this.parentNode!==void 0&&!ft.is(this.parentNode)&&!ir.is(this.parentNode)&&!au.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select "),e.distinctOn&&(this.compileDistinctOn(e.distinctOn),this.append(" ")),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.selections&&(this.compileList(e.selections),this.append(" ")),this.visitNode(e.from),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")),r&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,r=", "){let i=e.length-1;for(let s=0;s<=i;s++)this.visitNode(e[s]),s<i&&this.append(r)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){let r=this.nodeStack.find(P.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(e.into),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.values&&(this.append(" "),this.visitNode(e.values)),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){let r=this.nodeStack.find(P.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),this.visitNode(e.from),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){this.visitNode(e.table),this.append("."),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!Ie(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");let{values:r}=e;for(let i=0;i<r.length;++i)this.appendValue(r[i]),i!==r.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(Vq[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){let{sqlFragments:r,parameters:i}=e;for(let s=0;s<r.length;++s)this.append(r[s]),i.length>s&&this.visitNode(i[s])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnDefinition(e){this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){let r=this.nodeStack.find(P.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),this.visitNode(e.table),this.append(" set "),e.updates&&this.compileList(e.updates),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileList(e.columnAlterations)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(jq[e.modifier])}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return gs.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){let r=this.getLeftIdentifierWrapper(),i=this.getRightIdentifierWrapper(),s="";for(let o of e)s+=o,o===r?s+=r:o===i&&(s+=i);return s}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(Ie(e))this.append(`'${e}'`);else if(JE(e)||Jd(e))this.append(e.toString());else if(Kd(e))this.append("null");else if(KE(e))this.appendImmediateValue(e.toISOString());else if(YE(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}};n(Wn,"DefaultQueryCompiler");var jq=d({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),Vq=d({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"});var Un=class{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}};n(Un,"DialectAdapterBase");var dc=class{transformQuery(e){return e.node}async transformResult(e){return e.result}};n(dc,"NoopPlugin");var lc="kysely_migration",Ms="kysely_migration_lock",cy="migration_lock",dy=d({__noMigrations__:!0}),uc=class{#e;constructor(e){this.#e=d(e)}async getMigrations(){let e=await this.#a(this.#i)?await this.#e.db.withPlugin(this.#s).selectFrom(this.#i).select(["name","timestamp"]).execute():[];return(await this.#f()).map(({name:i,...s})=>{let o=e.find(a=>a.name===i);return{name:i,migration:s,executedAt:o?new Date(o.timestamp):void 0}})}async migrateToLatest(){return this.#t(({migrations:e})=>e.length-1)}async migrateTo(e){return this.#t(({migrations:r})=>{if(e===dy)return-1;let i=r.findIndex(s=>s.name===e);if(i===-1)throw new Error(`migration "${e}" doesn't exist`);return i})}async migrateUp(){return this.#t(({currentIndex:e,migrations:r})=>Math.min(e+1,r.length-1))}async migrateDown(){return this.#t(({currentIndex:e})=>Math.max(e-1,-1))}async#t(e){try{return await this.#o(),await this.#h(e)}catch(r){return r instanceof ks?r.resultSet:{error:r}}}get#r(){return this.#e.migrationTableSchema}get#i(){return this.#e.migrationTableName??lc}get#n(){return this.#e.migrationLockTableName??Ms}get#s(){return this.#r?new mt(this.#r):new dc}async#o(){await this.#d(),await this.#u(),await this.#c(),await this.#m()}async#d(){if(this.#r&&!await this.#l())try{await this.#e.db.schema.createSchema(this.#r).ifNotExists().execute()}catch(e){if(!await this.#l())throw e}}async#u(){if(!await this.#a(this.#i))try{this.#r&&await this.#e.db.schema.createSchema(this.#r).ifNotExists().execute(),await this.#e.db.schema.withPlugin(this.#s).createTable(this.#i).ifNotExists().addColumn("name","varchar(255)",e=>e.notNull().primaryKey()).addColumn("timestamp","varchar(255)",e=>e.notNull()).execute()}catch(e){if(!await this.#a(this.#i))throw e}}async#c(){if(!await this.#a(this.#n))try{await this.#e.db.schema.withPlugin(this.#s).createTable(this.#n).ifNotExists().addColumn("id","varchar(255)",e=>e.notNull().primaryKey()).addColumn("is_locked","integer",e=>e.notNull().defaultTo(0)).execute()}catch(e){if(!await this.#a(this.#n))throw e}}async#m(){if(!await this.#p())try{await this.#e.db.withPlugin(this.#s).insertInto(this.#n).values({id:cy,is_locked:0}).execute()}catch(e){if(!await this.#p())throw e}}async#l(){return(await this.#e.db.introspection.getSchemas()).some(r=>r.name===this.#r)}async#a(e){let r=this.#r;return(await this.#e.db.introspection.getTables({withInternalKyselyTables:!0})).some(s=>s.name===e&&(!r||s.schema===r))}async#p(){return!!await this.#e.db.withPlugin(this.#s).selectFrom(this.#n).where("id","=",cy).select("id").executeTakeFirst()}async#h(e){let r=this.#e.db.getExecutor().adapter,i=d({lockTable:this.#e.migrationLockTableName??Ms,lockRowId:cy,lockTableSchema:this.#e.migrationTableSchema}),s=n(async o=>{try{await r.acquireMigrationLock(o,i);let a=await this.#_(o);if(a.migrations.length===0)return{results:[]};let c=e(a);return c===void 0?{results:[]}:c<a.currentIndex?await this.#w(o,a,c):c>a.currentIndex?await this.#E(o,a,c):{results:[]}}finally{await r.releaseMigrationLock(o,i)}},"run");return r.supportsTransactionalDdl?this.#e.db.transaction().execute(s):this.#e.db.connection().execute(s)}async#_(e){let r=await this.#f(),i=await this.#y(e);return this.#g(r,i),d({migrations:r,currentIndex:r.findIndex(s=>s.name===QE(i))})}async#f(){let e=await this.#e.provider.getMigrations();return Object.keys(e).sort().map(r=>({...e[r],name:r}))}async#y(e){return(await e.withPlugin(this.#s).selectFrom(this.#i).select("name").orderBy("name").execute()).map(i=>i.name)}#g(e,r){for(let i of r)if(!e.some(s=>s.name===i))throw new Error(`corrupted migrations: previously executed migration ${i} is missing`);for(let i=0;i<r.length;++i)if(e[i].name!==r[i])throw new Error(`corrupted migrations: expected previously executed migration ${r[i]} to be at index ${i} but ${e[i].name} was found in its place. New migrations must always have a name that comes alphabetically after the last executed migration.`)}async#w(e,r,i){let s=[];for(let o=r.currentIndex;o>i;--o)s.push({migrationName:r.migrations[o].name,direction:"Down",status:"NotExecuted"});for(let o=0;o<s.length;++o){let a=r.migrations.find(c=>c.name===s[o].migrationName);try{a.down&&(await a.down(e),await e.withPlugin(this.#s).deleteFrom(this.#i).where("name","=",a.name).execute(),s[o]={migrationName:a.name,direction:"Down",status:"Success"})}catch(c){throw s[o]={migrationName:a.name,direction:"Down",status:"Error"},new ks({error:c,results:s})}}return{results:s}}async#E(e,r,i){let s=[];for(let o=r.currentIndex+1;o<=i;++o)s.push({migrationName:r.migrations[o].name,direction:"Up",status:"NotExecuted"});for(let o=0;o<s.length;++o){let a=r.migrations.find(c=>c.name===s[o].migrationName);try{await a.up(e),await e.withPlugin(this.#s).insertInto(this.#i).values({name:a.name,timestamp:new Date().toISOString()}).execute(),s[o]={migrationName:a.name,direction:"Up",status:"Success"}}catch(c){throw s[o]={migrationName:a.name,direction:"Up",status:"Error"},new ks({error:c,results:s})}}return{results:s}}};n(uc,"Migrator");var ks=class extends Error{#e;constructor(e){super(),this.#e=e}get resultSet(){return this.#e}};n(ks,"MigrationResultSetError");var $q=/"/g,pc=class extends Wn{sanitizeIdentifier(e){return e.replace($q,'""')}};n(pc,"PostgresQueryCompiler");var Hq=BigInt("3853314791062309107"),fc=class extends Un{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e){await ot`select pg_advisory_xact_lock(${ot.lit(Hq)})`.execute(e)}async releaseMigrationLock(){}};n(fc,"PostgresAdapter");var Gq=/`/g,mc=class extends Wn{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(e){return e.replace(Gq,"``")}};n(mc,"MysqlQueryCompiler");var hc=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(r=>({name:r.SCHEMA_NAME}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",s=>s.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA"]).where("columns.TABLE_SCHEMA","=",ot`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();e.withInternalKyselyTables||(r=r.where("columns.TABLE_NAME","!=",lc).where("columns.TABLE_NAME","!=",Ms));let i=await r.execute();return this.#t(i)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,i)=>{let s=r.find(o=>o.name===i.TABLE_NAME);return s||(s=d({name:i.TABLE_NAME,isView:i.TABLE_TYPE==="VIEW",schema:i.TABLE_SCHEMA,columns:[]}),r.push(s)),s.columns.push(d({name:i.COLUMN_NAME,dataType:i.DATA_TYPE,isNullable:i.IS_NULLABLE==="YES",isAutoIncrementing:i.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:i.COLUMN_DEFAULT!==null})),r},[])}};n(hc,"MysqlIntrospector");var zv="ea586330-2c93-47c8-908d-981d9d270f9d",Bq=60*60,_c=class extends Un{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(e){await ot`select get_lock(${ot.lit(zv)}, ${ot.lit(Bq)})`.execute(e)}async releaseMigrationLock(e){await ot`select release_lock(${ot.lit(zv)})`.execute(e)}};n(_c,"MysqlAdapter");var yc=class{#e;constructor(e){this.#e=e}async init(){}async acquireConnection(){return new wu(this.#e)}async beginTransaction(e){await e.beginTransaction()}async commitTransaction(e){await e.commitTransaction()}async rollbackTransaction(e){await e.rollbackTransaction()}async releaseConnection(e){}async destroy(){}};n(yc,"DataApiDriver");var wu=class{#e;#t;constructor(e){this.#e=e}async beginTransaction(){let e=await this.#e.client.beginTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,database:this.#e.database});this.#t=e.transactionId}async commitTransaction(){if(!this.#t)throw new Error("Cannot commit a transaction before creating it");await this.#e.client.commitTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,transactionId:this.#t})}async rollbackTransaction(){if(!this.#t)throw new Error("Cannot rollback a transaction before creating it");await this.#e.client.rollbackTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,transactionId:this.#t})}async executeQuery(e){let r=await this.#e.client.executeStatement({transactionId:this.#t,secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,sql:e.sql,parameters:e.parameters,database:this.#e.database,includeResultMetadata:!0});if(!r.columnMetadata){let o=BigInt(r.numberOfRecordsUpdated||0);return{numAffectedRows:o,numUpdatedOrDeletedRows:o,insertId:r.generatedFields&&r.generatedFields.length>0?BigInt(r.generatedFields[0].longValue):void 0,rows:[]}}return{rows:r.records?.filter(o=>o.length!==0).map(o=>Object.fromEntries(o.map((a,c)=>[r.columnMetadata[c].label||r.columnMetadata[c].name,a.isNull?null:a.stringValue??a.doubleValue??a.longValue??a.booleanValue??this.#r(a.arrayValue)??a.blobValue??null])))||[]}}async*streamQuery(e,r){throw new Error("Data API does not support streaming")}#r(e){if(e)return e.stringValues??e.doubleValues??e.longValues??e.booleanValues??e.arrayValues?.map(this.#r)}};n(wu,"DataApiConnection");var gc=class extends pc{appendValue(e){let r=this.numParameters;this.append(this.getCurrentParameterPlaceholder()),this.addParameter({name:r.toString(),...Wv(e)})}getCurrentParameterPlaceholder(){return":"+this.numParameters}};n(gc,"PostgresDataApiQueryCompiler");var wc=class extends mc{appendValue(e){let r=this.numParameters;this.append(this.getCurrentParameterPlaceholder()),this.addParameter({name:r.toString(),...Wv(e)})}getCurrentParameterPlaceholder(){return":"+this.numParameters}};n(wc,"MysqlDataApiQueryCompiler");function Wv(t){switch(typeof t){case"bigint":return{value:{doubleValue:Number(t)}};case"boolean":return{value:{booleanValue:t}};case"number":return Number.isInteger(t)?{value:{longValue:t}}:{value:{doubleValue:t}};case"object":if(t==null)return{value:{isNull:!0}};if(Buffer.isBuffer(t))return{value:{blobValue:t}};if(t instanceof Date)return{typeHint:"TIMESTAMP",value:{stringValue:Uv(t.toISOString())}};if(t?.value&&Yq(t.value))return t.typeHint&&t.value.stringValue&&typeof t.value.stringValue=="string"&&(t.value.stringValue=Jq(t.typeHint,t.value.stringValue)),t;break;case"string":return{value:{stringValue:t}}}throw new Ds("Could not serialize value")}n(Wv,"serialize");function Jq(t,e){switch(t){case"DATE":return uy(e).slice(0,10);case"TIME":return e.match(/^\d{4}-\d{2}-\d{2}/)?uy(e).slice(11,23):Kq(e);case"TIMESTAMP":return Uv(uy(e))}return e}n(Jq,"fixStringValue");function Kq(t){let e=(t||"00:00:00").split(":");for(;e.length<3;)e.push("00");return e.join(":").slice(0,12)}n(Kq,"fixTimeString");function Uv(t){return t.replace("T"," ").slice(0,23)}n(Uv,"fixISOString");function uy(t){return new Date(Date.parse(t)).toISOString()}n(uy,"parseToISOString");function Yq(t){for(let e of Xq)if(t[e])return!0;if(t.arrayValue){for(let e of Qq)if(t.arrayValue?.[e])return!0}return!1}n(Yq,"isValueObject");var Ds=class extends Error{constructor(e){super(e),this.name=Ds.name}};n(Ds,"QueryCompilerError");var Qq=["booleanValues","doubleValues","longValues","stringValues"],Xq=["blobValue","booleanValue","doubleValue","isNull","longValue","stringValue"];var Ec=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(r=>({name:r.nspname}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",this.#e.selectFrom("pg_class").select(ot`true`.as("auto_incrementing")).whereRef("relnamespace","=","c.relnamespace").where("relkind","=","S").where("relname","=",ot`c.relname || '_' || a.attname || '_seq'`).as("auto_incrementing")]).where(s=>s.where("c.relkind","=","r").orWhere("c.relkind","=","v")).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();e.withInternalKyselyTables||(r=r.where("c.relname","!=",lc).where("c.relname","!=",Ms));let i=await r.execute();return this.#t(i)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,i)=>{let s=r.find(o=>o.name===i.table&&o.schema===i.schema);return s||(s=Object.freeze({name:i.table,isView:i.table_type==="v",schema:i.schema,columns:[]}),r.push(s)),s.columns.push(Object.freeze({name:i.column,dataType:i.type,dataTypeSchema:i.type_schema,isNullable:!i.not_null,isAutoIncrementing:!!i.auto_incrementing,hasDefaultValue:i.has_default})),r},[])}};n(Ec,"PostgresIntrospector");var vc=class{#e;constructor(e){this.#e=e}createAdapter(){if(this.#e.mode==="postgres")return new fc;if(this.#e.mode==="mysql")return new _c;throw new Error("Unknown mode "+this.#e.mode)}createDriver(){return new yc(this.#e.driver)}createQueryCompiler(){if(this.#e.mode==="postgres")return new gc;if(this.#e.mode==="mysql")return new wc;throw new Error("Unknown mode "+this.#e.mode)}createIntrospector(e){if(this.#e.mode==="postgres")return new Ec(e);if(this.#e.mode==="mysql")return new hc(e);throw new Error("Unknown mode "+this.#e.mode)}};n(vc,"DataApiDialect");var nq=pq(iq(),1);import w8 from"url";async function FSe(t){console.log("initializing db");let e=new Mt({dialect:new vc({mode:process.env.RDS_ENGINE_MODE,driver:{client:new nq.RDSData({}),database:t?.database||process.env.RDS_DATABASE,secretArn:process.env.RDS_SECRET,resourceArn:process.env.RDS_ARN}})});console.log("creating migrator");let r=new uc({db:e,provider:new D_(g8.resolve(process.env.RDS_MIGRATIONS_PATH))});if(console.log("processing event",t),!t.type||t.type==="latest"){console.log("migrating to latest");let i=await r.migrateToLatest(),s=i.error||i.results?.find(o=>o.status==="Error");if(s)throw s;return i}if(t.type==="to"){if(console.log("migrating to",t.data.name),!t.data.name)return await r.migrateTo(dy);let i=await r.migrateTo(t.data.name),s=i.error||i.results?.find(o=>o.status==="Error");if(s)throw s;return i}if(t.type==="list")return console.log("listing migrations"),await r.getMigrations()}n(FSe,"handler");var D_=class{#e;constructor(e){this.#e=e}async getMigrations(){let e=await import("fs/promises"),r=await import("path"),i={},s=await e.readdir(this.#e);for(let o of s)if(o.endsWith(".js")||o.endsWith(".cjs")||o.endsWith(".mjs")){let[a]=r.basename(o).split("."),c=r.join(this.#e,o);if(process.env.LAMBDA_TASK_ROOT){let p=await import(c);i[a]=p;continue}let l=c.replace(/(mjs|cjs|js)$/g,`${Date.now()}.$1`);try{await e.copyFile(c,l);let p=await import(w8.pathToFileURL(l).href);i[a]=p}catch(p){console.error(p)}await e.rm(l)}return i}};n(D_,"DynamicFileMigrationProvider");export{FSe as handler};
